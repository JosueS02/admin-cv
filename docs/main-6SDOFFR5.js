import{a as O,b as pe,c as Np,d as N,e as T0,f as sl,g as S0,h as A0,i as x0,j as Pp,k as M0,l as Ka,m as kp,n as al,o as R0,p as N0,q as Op,r as Ge,s as Oi,t as Hn,u as cl,v as Qa,w as P0,x as k0,y as $r,z as an}from"./chunk-4ZHOUZTK.js";function O0(n,e){return Object.is(n,e)}var ft=null,ul=!1,ll=1,pr=Symbol("SIGNAL");function be(n){let e=ft;return ft=n,e}function F0(){return ft}var Za={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Lp(n){if(ul)throw new Error("");if(ft===null)return;ft.consumerOnSignalRead(n);let e=ft.nextProducerIndex++;if(pl(ft),e<ft.producerNode.length&&ft.producerNode[e]!==n&&Ya(ft)){let t=ft.producerNode[e];fl(t,ft.producerIndexOfThis[e])}ft.producerNode[e]!==n&&(ft.producerNode[e]=n,ft.producerIndexOfThis[e]=Ya(ft)?B0(n,ft,e):0),ft.producerLastReadVersion[e]=n.version}function tN(){ll++}function V0(n){if(!(Ya(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===ll)){if(!n.producerMustRecompute(n)&&!Bp(n)){n.dirty=!1,n.lastCleanEpoch=ll;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=ll}}function L0(n){if(n.liveConsumerNode===void 0)return;let e=ul;ul=!0;try{for(let t of n.liveConsumerNode)t.dirty||nN(t)}finally{ul=e}}function j0(){return ft?.consumerAllowSignalWrites!==!1}function nN(n){n.dirty=!0,L0(n),n.consumerMarkedDirty?.(n)}function hl(n){return n&&(n.nextProducerIndex=0),be(n)}function jp(n,e){if(be(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Ya(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)fl(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Bp(n){pl(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(V0(t),r!==t.version))return!0}return!1}function Up(n){if(pl(n),Ya(n))for(let e=0;e<n.producerNode.length;e++)fl(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function B0(n,e,t){if(U0(n),n.liveConsumerNode.length===0&&$0(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=B0(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function fl(n,e){if(U0(n),n.liveConsumerNode.length===1&&$0(n))for(let r=0;r<n.producerNode.length;r++)fl(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];pl(i),i.producerIndexOfThis[r]=e}}function Ya(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function pl(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function U0(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function $0(n){return n.producerNode!==void 0}function H0(n){let e=Object.create(rN);e.computation=n;let t=()=>{if(V0(e),Lp(e),e.value===dl)throw e.error;return e.value};return t[pr]=e,t}var Fp=Symbol("UNSET"),Vp=Symbol("COMPUTING"),dl=Symbol("ERRORED"),rN=pe(O({},Za),{value:Fp,dirty:!0,error:null,equal:O0,producerMustRecompute(n){return n.value===Fp||n.value===Vp},producerRecomputeValue(n){if(n.value===Vp)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Vp;let t=hl(n),r;try{r=n.computation()}catch(i){r=dl,n.error=i}finally{jp(n,t)}if(e!==Fp&&e!==dl&&r!==dl&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function iN(){throw new Error}var q0=iN;function z0(){q0()}function G0(n){q0=n}var oN=null;function W0(n){let e=Object.create(Q0);e.value=n;let t=()=>(Lp(e),e.value);return t[pr]=e,t}function $p(n,e){j0()||z0(),n.equal(n.value,e)||(n.value=e,sN(n))}function K0(n,e){j0()||z0(),$p(n,e(n.value))}var Q0=pe(O({},Za),{equal:O0,value:void 0});function sN(n){n.version++,tN(),L0(n),oN?.()}function se(n){return typeof n=="function"}function $o(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var gl=$o(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Fi(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Je=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(se(r))try{r()}catch(o){e=o instanceof gl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Y0(o)}catch(s){e=e??[],s instanceof gl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new gl(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Y0(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Fi(t,e)}remove(e){let{_finalizers:t}=this;t&&Fi(t,e),e instanceof n&&e._removeParent(this)}};Je.EMPTY=(()=>{let n=new Je;return n.closed=!0,n})();var Hp=Je.EMPTY;function ml(n){return n instanceof Je||n&&"closed"in n&&se(n.remove)&&se(n.add)&&se(n.unsubscribe)}function Y0(n){se(n)?n():n.unsubscribe()}var An={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ho={setTimeout(n,e,...t){let{delegate:r}=Ho;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ho;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function yl(n){Ho.setTimeout(()=>{let{onUnhandledError:e}=An;if(e)e(n);else throw n})}function Ja(){}var Z0=qp("C",void 0,void 0);function J0(n){return qp("E",void 0,n)}function X0(n){return qp("N",n,void 0)}function qp(n,e,t){return{kind:n,value:e,error:t}}var Vi=null;function qo(n){if(An.useDeprecatedSynchronousErrorHandling){let e=!Vi;if(e&&(Vi={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Vi;if(Vi=null,t)throw r}}else n()}function eI(n){An.useDeprecatedSynchronousErrorHandling&&Vi&&(Vi.errorThrown=!0,Vi.error=n)}var Li=class extends Je{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ml(e)&&e.add(this)):this.destination=uN}static create(e,t,r){return new gr(e,t,r)}next(e){this.isStopped?Gp(X0(e),this):this._next(e)}error(e){this.isStopped?Gp(J0(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Gp(Z0,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},aN=Function.prototype.bind;function zp(n,e){return aN.call(n,e)}var Wp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){vl(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){vl(r)}else vl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){vl(t)}}},gr=class extends Li{constructor(e,t,r){super();let i;if(se(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&An.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&zp(e.next,o),error:e.error&&zp(e.error,o),complete:e.complete&&zp(e.complete,o)}):i=e}this.destination=new Wp(i)}};function vl(n){An.useDeprecatedSynchronousErrorHandling?eI(n):yl(n)}function cN(n){throw n}function Gp(n,e){let{onStoppedNotification:t}=An;t&&Ho.setTimeout(()=>t(n,e))}var uN={closed:!0,next:Ja,error:cN,complete:Ja};var zo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Vt(n){return n}function Kp(...n){return Qp(n)}function Qp(n){return n.length===0?Vt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var me=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=dN(t)?t:new gr(t,r,i);return qo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=tI(r),new r((i,o)=>{let s=new gr({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[zo](){return this}pipe(...t){return Qp(t)(this)}toPromise(t){return t=tI(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function tI(n){var e;return(e=n??An.Promise)!==null&&e!==void 0?e:Promise}function lN(n){return n&&se(n.next)&&se(n.error)&&se(n.complete)}function dN(n){return n&&n instanceof Li||lN(n)&&ml(n)}function Yp(n){return se(n?.lift)}function de(n){return e=>{if(Yp(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function he(n,e,t,r,i){return new Zp(n,e,t,r,i)}var Zp=class extends Li{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Go(){return de((n,e)=>{let t=null;n._refCount++;let r=he(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Wo=class extends me{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Yp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Je;let t=this.getSubject();e.add(this.source.subscribe(he(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Je.EMPTY)}return e}refCount(){return Go()(this)}};var nI=$o(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var qe=(()=>{class n extends me{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new _l(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new nI}next(t){qo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){qo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){qo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Hp:(this.currentObservers=null,o.push(t),new Je(()=>{this.currentObservers=null,Fi(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new me;return t.source=this,t}}return n.create=(e,t)=>new _l(e,t),n})(),_l=class extends qe{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Hp}};var Ct=class extends qe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Xa={now(){return(Xa.delegate||Date).now()},delegate:void 0};var wl=class extends qe{constructor(e=1/0,t=1/0,r=Xa){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var El=class extends Je{constructor(e,t){super()}schedule(e,t=0){return this}};var ec={setInterval(n,e,...t){let{delegate:r}=ec;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=ec;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Ko=class extends El{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return ec.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&ec.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Fi(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Qo=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Qo.now=Xa.now;var Yo=class extends Qo{constructor(e,t=Qo.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var tc=new Yo(Ko);var Il=class extends Ko{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Cl=class extends Yo{};var Jp=new Cl(Il);var Lt=new me(n=>n.complete());function rI(n){return n&&se(n.schedule)}function Xp(n){return n[n.length-1]}function bl(n){return se(Xp(n))?n.pop():void 0}function qn(n){return rI(Xp(n))?n.pop():void 0}function iI(n,e){return typeof Xp(n)=="number"?n.pop():e}var Dl=n=>n&&typeof n.length=="number"&&typeof n!="function";function Tl(n){return se(n?.then)}function Sl(n){return se(n[zo])}function Al(n){return Symbol.asyncIterator&&se(n?.[Symbol.asyncIterator])}function xl(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function hN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ml=hN();function Rl(n){return se(n?.[Ml])}function Nl(n){return S0(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield sl(t.read());if(i)return yield sl(void 0);yield yield sl(r)}}finally{t.releaseLock()}})}function Pl(n){return se(n?.getReader)}function Ue(n){if(n instanceof me)return n;if(n!=null){if(Sl(n))return fN(n);if(Dl(n))return pN(n);if(Tl(n))return gN(n);if(Al(n))return oI(n);if(Rl(n))return mN(n);if(Pl(n))return yN(n)}throw xl(n)}function fN(n){return new me(e=>{let t=n[zo]();if(se(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function pN(n){return new me(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function gN(n){return new me(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,yl)})}function mN(n){return new me(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function oI(n){return new me(e=>{vN(n,e).catch(t=>e.error(t))})}function yN(n){return oI(Nl(n))}function vN(n,e){var t,r,i,o;return T0(this,void 0,void 0,function*(){try{for(t=A0(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Qt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function gn(n,e=0){return de((t,r)=>{t.subscribe(he(r,i=>Qt(r,n,()=>r.next(i),e),()=>Qt(r,n,()=>r.complete(),e),i=>Qt(r,n,()=>r.error(i),e)))})}function xn(n,e=0){return de((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function sI(n,e){return Ue(n).pipe(xn(e),gn(e))}function aI(n,e){return Ue(n).pipe(xn(e),gn(e))}function cI(n,e){return new me(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function uI(n,e){return new me(t=>{let r;return Qt(t,e,()=>{r=n[Ml](),Qt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>se(r?.return)&&r.return()})}function kl(n,e){if(!n)throw new Error("Iterable cannot be null");return new me(t=>{Qt(t,e,()=>{let r=n[Symbol.asyncIterator]();Qt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function lI(n,e){return kl(Nl(n),e)}function dI(n,e){if(n!=null){if(Sl(n))return sI(n,e);if(Dl(n))return cI(n,e);if(Tl(n))return aI(n,e);if(Al(n))return kl(n,e);if(Rl(n))return uI(n,e);if(Pl(n))return lI(n,e)}throw xl(n)}function De(n,e){return e?dI(n,e):Ue(n)}function re(...n){let e=qn(n);return De(n,e)}function Zo(n,e){let t=se(n)?n:()=>n,r=i=>i.error(t());return new me(e?i=>e.schedule(r,0,i):r)}function eg(n){return!!n&&(n instanceof me||se(n.lift)&&se(n.subscribe))}var mr=$o(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Z(n,e){return de((t,r)=>{let i=0;t.subscribe(he(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:_N}=Array;function wN(n,e){return _N(e)?n(...e):n(e)}function Ol(n){return Z(e=>wN(n,e))}var{isArray:EN}=Array,{getPrototypeOf:IN,prototype:CN,keys:bN}=Object;function Fl(n){if(n.length===1){let e=n[0];if(EN(e))return{args:e,keys:null};if(DN(e)){let t=bN(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function DN(n){return n&&typeof n=="object"&&IN(n)===CN}function Vl(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function nc(...n){let e=qn(n),t=bl(n),{args:r,keys:i}=Fl(n);if(r.length===0)return De([],e);let o=new me(TN(r,e,i?s=>Vl(i,s):Vt));return t?o.pipe(Ol(t)):o}function TN(n,e,t=Vt){return r=>{hI(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)hI(e,()=>{let l=De(n[c],e),h=!1;l.subscribe(he(r,p=>{o[c]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function hI(n,e,t){n?Qt(t,n,e):e()}function fI(n,e,t,r,i,o,s,a){let c=[],l=0,h=0,p=!1,m=()=>{p&&!c.length&&!l&&e.complete()},y=A=>l<r?D(A):c.push(A),D=A=>{o&&e.next(A),l++;let x=!1;Ue(t(A,h++)).subscribe(he(e,U=>{i?.(U),o?y(U):e.next(U)},()=>{x=!0},void 0,()=>{if(x)try{for(l--;c.length&&l<r;){let U=c.shift();s?Qt(e,s,()=>D(U)):D(U)}m()}catch(U){e.error(U)}}))};return n.subscribe(he(e,y,()=>{p=!0,m()})),()=>{a?.()}}function st(n,e,t=1/0){return se(e)?st((r,i)=>Z((o,s)=>e(r,o,i,s))(Ue(n(r,i))),t):(typeof e=="number"&&(t=e),de((r,i)=>fI(r,i,n,t)))}function Hr(n=1/0){return st(Vt,n)}function pI(){return Hr(1)}function Jo(...n){return pI()(De(n,qn(n)))}function Ll(n){return new me(e=>{Ue(n()).subscribe(e)})}function tg(...n){let e=bl(n),{args:t,keys:r}=Fl(n),i=new me(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let h=0;h<s;h++){let p=!1;Ue(t[h]).subscribe(he(o,m=>{p||(p=!0,l--),a[h]=m},()=>c--,void 0,()=>{(!c||!p)&&(l||o.next(r?Vl(r,a):a),o.complete())}))}});return e?i.pipe(Ol(e)):i}function ng(...n){let e=qn(n),t=iI(n,1/0),r=n;return r.length?r.length===1?Ue(r[0]):Hr(t)(De(r,e)):Lt}function bt(n,e){return de((t,r)=>{let i=0;t.subscribe(he(r,o=>n.call(e,o,i++)&&r.next(o)))})}function qr(n){return de((e,t)=>{let r=null,i=!1,o;r=e.subscribe(he(t,void 0,void 0,s=>{o=Ue(n(s,qr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function gI(n,e,t,r,i){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(he(s,h=>{let p=l++;c=a?n(c,h,p):(a=!0,h),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function ji(n,e){return se(e)?st(n,e,1):st(n,1)}function zr(n){return de((e,t)=>{let r=!1;e.subscribe(he(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function yr(n){return n<=0?()=>Lt:de((e,t)=>{let r=0;e.subscribe(he(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function rg(n){return Z(()=>n)}function ig(n,e=Vt){return n=n??SN,de((t,r)=>{let i,o=!0;t.subscribe(he(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function SN(n,e){return n===e}function jl(n=AN){return de((e,t)=>{let r=!1;e.subscribe(he(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function AN(){return new mr}function rc(n){return de((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function mn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?bt((i,o)=>n(i,o,r)):Vt,yr(1),t?zr(e):jl(()=>new mr))}function Xo(n){return n<=0?()=>Lt:de((e,t)=>{let r=[];e.subscribe(he(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function og(n,e){let t=arguments.length>=2;return r=>r.pipe(n?bt((i,o)=>n(i,o,r)):Vt,Xo(1),t?zr(e):jl(()=>new mr))}function ic(){return de((n,e)=>{let t,r=!1;n.subscribe(he(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function Bi(n,e){return de(gI(n,e,arguments.length>=2,!0))}function mI(n={}){let{connector:e=()=>new qe,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,c,l=0,h=!1,p=!1,m=()=>{a?.unsubscribe(),a=void 0},y=()=>{m(),s=c=void 0,h=p=!1},D=()=>{let A=s;y(),A?.unsubscribe()};return de((A,x)=>{l++,!p&&!h&&m();let U=c=c??e();x.add(()=>{l--,l===0&&!p&&!h&&(a=sg(D,i))}),U.subscribe(x),!s&&l>0&&(s=new gr({next:W=>U.next(W),error:W=>{p=!0,m(),a=sg(y,t,W),U.error(W)},complete:()=>{h=!0,m(),a=sg(y,r),U.complete()}}),Ue(A).subscribe(s))})(o)}}function sg(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new gr({next:()=>{r.unsubscribe(),n()}});return Ue(e(...t)).subscribe(r)}function Bl(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,mI({connector:()=>new wl(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Ui(...n){let e=qn(n);return de((t,r)=>{(e?Jo(n,t,e):Jo(n,t)).subscribe(r)})}function Xe(n,e){return de((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(he(r,c=>{i?.unsubscribe();let l=0,h=o++;Ue(n(c,h)).subscribe(i=he(r,p=>r.next(e?e(c,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Ul(n,e){return se(e)?Xe(()=>n,e):Xe(()=>n)}function ag(n){return de((e,t)=>{Ue(n).subscribe(he(t,()=>t.complete(),Ja)),!t.closed&&e.subscribe(t)})}function pt(n,e,t){let r=se(n)||e||t?{next:n,error:e,complete:t}:n;return r?de((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(he(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Vt}var rC="https://g.co/ng/security#xss",ee=class extends Error{constructor(e,t){super(cm(e,t)),this.code=e}};function cm(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function pc(n){return{toString:n}.toString()}var $l="__parameters__";function xN(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function iC(n,e,t){return pc(()=>{let r=xN(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,h){let p=c.hasOwnProperty($l)?c[$l]:Object.defineProperty(c,$l,{value:[]})[$l];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Nn=globalThis;function Fe(n){for(let e in n)if(n[e]===Fe)return e;throw Error("Could not find renamed property on target object.")}function MN(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Bt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Bt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function yI(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var RN=Fe({__forward_ref__:Fe});function _s(n){return n.__forward_ref__=_s,n.toString=function(){return Bt(this())},n}function jt(n){return oC(n)?n():n}function oC(n){return typeof n=="function"&&n.hasOwnProperty(RN)&&n.__forward_ref__===_s}function G(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function vt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Td(n){return vI(n,aC)||vI(n,cC)}function sC(n){return Td(n)!==null}function vI(n,e){return n.hasOwnProperty(e)?n[e]:null}function NN(n){let e=n&&(n[aC]||n[cC]);return e||null}function _I(n){return n&&(n.hasOwnProperty(wI)||n.hasOwnProperty(PN))?n[wI]:null}var aC=Fe({\u0275prov:Fe}),wI=Fe({\u0275inj:Fe}),cC=Fe({ngInjectableDef:Fe}),PN=Fe({ngInjectorDef:Fe}),Q=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=G({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function uC(n){return n&&!!n.\u0275providers}var kN=Fe({\u0275cmp:Fe}),ON=Fe({\u0275dir:Fe}),FN=Fe({\u0275pipe:Fe}),VN=Fe({\u0275mod:Fe}),Jl=Fe({\u0275fac:Fe}),sc=Fe({__NG_ELEMENT_ID__:Fe}),EI=Fe({__NG_ENV_ID__:Fe});function $i(n){return typeof n=="string"?n:n==null?"":String(n)}function LN(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():$i(n)}function jN(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new ee(-200,n)}function um(n,e){throw new ee(-201,!1)}var fe=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(fe||{}),Eg;function lC(){return Eg}function yn(n){let e=Eg;return Eg=n,e}function dC(n,e,t){let r=Td(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&fe.Optional)return null;if(e!==void 0)return e;um(n,"Injector")}var BN={},cc=BN,Ig="__NG_DI_FLAG__",Xl="ngTempTokenPath",UN="ngTokenPath",$N=/\n/gm,HN="\u0275",II="__source",is;function qN(){return is}function Gr(n){let e=is;return is=n,e}function zN(n,e=fe.Default){if(is===void 0)throw new ee(-203,!1);return is===null?dC(n,void 0,e):is.get(n,e&fe.Optional?null:void 0,e)}function L(n,e=fe.Default){return(lC()||zN)(jt(n),e)}function H(n,e=fe.Default){return L(n,Sd(e))}function Sd(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Cg(n){let e=[];for(let t=0;t<n.length;t++){let r=jt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new ee(900,!1);let i,o=fe.Default;for(let s=0;s<r.length;s++){let a=r[s],c=GN(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(L(i,o))}else e.push(L(r))}return e}function hC(n,e){return n[Ig]=e,n.prototype[Ig]=e,n}function GN(n){return n[Ig]}function WN(n,e,t,r){let i=n[Xl];throw e[II]&&i.unshift(e[II]),n.message=KN(`
`+n.message,i,t,r),n[UN]=i,n[Xl]=null,n}function KN(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==HN?n.slice(2):n;let i=Bt(e);if(Array.isArray(e))i=e.map(Bt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Bt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace($N,`
  `)}`}var ws=hC(iC("Optional"),8);var lm=hC(iC("SkipSelf"),4);function ss(n,e){let t=n.hasOwnProperty(Jl);return t?n[Jl]:null}function dm(n,e){n.forEach(t=>Array.isArray(t)?dm(t,e):e(t))}function fC(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function ed(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function QN(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function YN(n,e,t){let r=gc(n,e);return r>=0?n[r|1]=t:(r=~r,QN(n,r,e,t)),r}function cg(n,e){let t=gc(n,e);if(t>=0)return n[t|1]}function gc(n,e){return ZN(n,e,1)}function ZN(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var as={},vn=[],cs=new Q(""),pC=new Q("",-1),gC=new Q(""),td=class{get(e,t=cc){if(t===cc){let r=new Error(`NullInjectorError: No provider for ${Bt(e)}!`);throw r.name="NullInjectorError",r}return t}},mC=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(mC||{}),Wn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Wn||{}),Qr=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Qr||{});function JN(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function bg(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];XN(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function yC(n){return n===3||n===4||n===6}function XN(n){return n.charCodeAt(0)===64}function uc(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?CI(n,t,i,null,e[++r]):CI(n,t,i,null,null))}}return n}function CI(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var vC="ng-template";function e1(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&JN(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(hm(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function hm(n){return n.type===4&&n.value!==vC}function t1(n,e,t){let r=n.type===4&&!t?vC:n.value;return e===r}function n1(n,e,t){let r=4,i=n.attrs,o=i!==null?o1(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Mn(r)&&!Mn(c))return!1;if(s&&Mn(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!t1(n,c,t)||c===""&&e.length===1){if(Mn(r))return!1;s=!0}}else if(r&8){if(i===null||!e1(n,i,c,t)){if(Mn(r))return!1;s=!0}}else{let l=e[++a],h=r1(c,i,hm(n),t);if(h===-1){if(Mn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Mn(r))return!1;s=!0}}}}return Mn(r)||s}function Mn(n){return(n&1)===0}function r1(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return s1(e,n)}function i1(n,e,t=!1){for(let r=0;r<e.length;r++)if(n1(n,e[r],t))return!0;return!1}function o1(n){for(let e=0;e<n.length;e++){let t=n[e];if(yC(t))return e}return n.length}function s1(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function bI(n,e){return n?":not("+e.trim()+")":e}function a1(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Mn(s)&&(e+=bI(o,i),i=""),r=s,o=o||!Mn(r);t++}return i!==""&&(e+=bI(o,i)),e}function c1(n){return n.map(a1).join(",")}function u1(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Mn(i))break;i=o}r++}return{attrs:e,classes:t}}function _t(n){return pc(()=>{let e=CC(n),t=pe(O({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===mC.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Wn.Emulated,styles:n.styles||vn,_:null,schemas:n.schemas||null,tView:null,id:""});bC(t);let r=n.dependencies;return t.directiveDefs=TI(r,!1),t.pipeDefs=TI(r,!0),t.id=h1(t),t})}function l1(n){return Yr(n)||_C(n)}function d1(n){return n!==null}function wt(n){return pc(()=>({type:n.type,bootstrap:n.bootstrap||vn,declarations:n.declarations||vn,imports:n.imports||vn,exports:n.exports||vn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function DI(n,e){if(n==null)return as;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=Qr.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==Qr.None?[r,a]:r,e[o]=s):t[o]=r}return t}function $t(n){return pc(()=>{let e=CC(n);return bC(e),e})}function Yr(n){return n[kN]||null}function _C(n){return n[ON]||null}function wC(n){return n[FN]||null}function EC(n){let e=Yr(n)||_C(n)||wC(n);return e!==null?e.standalone:!1}function IC(n,e){let t=n[VN]||null;if(!t&&e===!0)throw new Error(`Type ${Bt(n)} does not have '\u0275mod' property.`);return t}function CC(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||as,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||vn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:DI(n.inputs,e),outputs:DI(n.outputs),debugInfo:null}}function bC(n){n.features?.forEach(e=>e(n))}function TI(n,e){if(!n)return null;let t=e?wC:l1;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(d1)}function h1(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function f1(...n){return{\u0275providers:DC(!0,n),\u0275fromNgModule:!0}}function DC(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return dm(e,s=>{let a=s;Dg(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&TC(i,o),t}function TC(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];fm(i,o=>{e(o,r)})}}function Dg(n,e,t,r){if(n=jt(n),!n)return!1;let i=null,o=_I(n),s=!o&&Yr(n);if(!o&&!s){let c=n.ngModule;if(o=_I(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)Dg(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{dm(o.imports,h=>{Dg(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&TC(l,e)}if(!a){let l=ss(i)||(()=>new i);e({provide:i,useFactory:l,deps:vn},i),e({provide:gC,useValue:i,multi:!0},i),e({provide:cs,useValue:()=>L(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=n;fm(c,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function fm(n,e){for(let t of n)uC(t)&&(t=t.\u0275providers),Array.isArray(t)?fm(t,e):e(t)}var p1=Fe({provide:String,useValue:Fe});function SC(n){return n!==null&&typeof n=="object"&&p1 in n}function g1(n){return!!(n&&n.useExisting)}function m1(n){return!!(n&&n.useFactory)}function us(n){return typeof n=="function"}function y1(n){return!!n.useClass}var Ad=new Q(""),Kl={},v1={},ug;function pm(){return ug===void 0&&(ug=new td),ug}var cn=class{},lc=class extends cn{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Sg(e,s=>this.processProvider(s)),this.records.set(pC,es(void 0,this)),i.has("environment")&&this.records.set(cn,es(void 0,this));let o=this.records.get(Ad);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(gC,vn,fe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=be(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),be(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Gr(this),r=yn(void 0),i;try{return e()}finally{Gr(t),yn(r)}}get(e,t=cc,r=fe.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(EI))return e[EI](this);r=Sd(r);let i,o=Gr(this),s=yn(void 0);try{if(!(r&fe.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=C1(e)&&Td(e);l&&this.injectableDefInScope(l)?c=es(Tg(e),Kl):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&fe.Self?pm():this.parent;return t=r&fe.Optional&&t===cc?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Xl]=a[Xl]||[]).unshift(Bt(e)),o)throw a;return WN(a,e,"R3InjectorError",this.source)}else throw a}finally{yn(s),Gr(o)}}resolveInjectorInitializers(){let e=be(null),t=Gr(this),r=yn(void 0),i;try{let o=this.get(cs,vn,fe.Self);for(let s of o)s()}finally{Gr(t),yn(r),be(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Bt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ee(205,!1)}processProvider(e){e=jt(e);let t=us(e)?e:jt(e&&e.provide),r=w1(e);if(!us(e)&&e.multi===!0){let i=this.records.get(t);i||(i=es(void 0,Kl,!0),i.factory=()=>Cg(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=be(null);try{return t.value===Kl&&(t.value=v1,t.value=t.factory()),typeof t.value=="object"&&t.value&&I1(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{be(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=jt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Tg(n){let e=Td(n),t=e!==null?e.factory:ss(n);if(t!==null)return t;if(n instanceof Q)throw new ee(204,!1);if(n instanceof Function)return _1(n);throw new ee(204,!1)}function _1(n){if(n.length>0)throw new ee(204,!1);let t=NN(n);return t!==null?()=>t.factory(n):()=>new n}function w1(n){if(SC(n))return es(void 0,n.useValue);{let e=AC(n);return es(e,Kl)}}function AC(n,e,t){let r;if(us(n)){let i=jt(n);return ss(i)||Tg(i)}else if(SC(n))r=()=>jt(n.useValue);else if(m1(n))r=()=>n.useFactory(...Cg(n.deps||[]));else if(g1(n))r=()=>L(jt(n.useExisting));else{let i=jt(n&&(n.useClass||n.provide));if(E1(n))r=()=>new i(...Cg(n.deps));else return ss(i)||Tg(i)}return r}function es(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function E1(n){return!!n.deps}function I1(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function C1(n){return typeof n=="function"||typeof n=="object"&&n instanceof Q}function Sg(n,e){for(let t of n)Array.isArray(t)?Sg(t,e):t&&uC(t)?Sg(t.\u0275providers,e):e(t)}function Zn(n,e){n instanceof lc&&n.assertNotDestroyed();let t,r=Gr(n),i=yn(void 0);try{return e()}finally{Gr(r),yn(i)}}function xC(){return lC()!==void 0||qN()!=null}function b1(n){if(!xC())throw new ee(-203,!1)}function D1(n){let e=Nn.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function T1(n){return typeof n=="function"}var Er=0,ve=1,ae=2,Ut=3,Rn=4,kn=5,nd=6,rd=7,Pn=8,ls=9,Kn=10,gt=11,dc=12,SI=13,Es=14,Qn=15,ds=16,ts=17,hs=18,xd=19,MC=20,Wr=21,lg=22,_n=23,Zr=25,RC=1;var qi=7,id=8,od=9,wn=10,sd=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(sd||{});function Kr(n){return Array.isArray(n)&&typeof n[RC]=="object"}function Ir(n){return Array.isArray(n)&&n[RC]===!0}function NC(n){return(n.flags&4)!==0}function Md(n){return n.componentOffset>-1}function gm(n){return(n.flags&1)===1}function Jr(n){return!!n.template}function Ag(n){return(n[ae]&512)!==0}var xg=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function PC(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Zi(){return kC}function kC(n){return n.type.prototype.ngOnChanges&&(n.setInput=A1),S1}Zi.ngInherit=!0;function S1(){let n=FC(this),e=n?.current;if(e){let t=n.previous;if(t===as)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function A1(n,e,t,r,i){let o=this.declaredInputs[r],s=FC(n)||x1(n,{previous:as,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new xg(l&&l.currentValue,t,c===as),PC(n,e,i,t)}var OC="__ngSimpleChanges__";function FC(n){return n[OC]||null}function x1(n,e){return n[OC]=e}var AI=null;var zn=function(n,e,t){AI?.(n,e,t)},M1="svg",R1="math";function Yn(n){for(;Array.isArray(n);)n=n[Er];return n}function VC(n,e){return Yn(e[n])}function En(n,e){return Yn(e[n.index])}function LC(n,e){return n.data[e]}function ti(n,e){let t=e[n];return Kr(t)?t:t[Er]}function mm(n){return(n[ae]&128)===128}function N1(n){return Ir(n[Ut])}function ad(n,e){return e==null?null:n[e]}function jC(n){n[ts]=0}function BC(n){n[ae]&1024||(n[ae]|=1024,mm(n)&&Nd(n))}function P1(n,e){for(;n>0;)e=e[Es],n--;return e}function Rd(n){return!!(n[ae]&9216||n[_n]?.dirty)}function Mg(n){n[Kn].changeDetectionScheduler?.notify(8),n[ae]&64&&(n[ae]|=1024),Rd(n)&&Nd(n)}function Nd(n){n[Kn].changeDetectionScheduler?.notify(0);let e=zi(n);for(;e!==null&&!(e[ae]&8192||(e[ae]|=8192,!mm(e)));)e=zi(e)}function UC(n,e){if((n[ae]&256)===256)throw new ee(911,!1);n[Wr]===null&&(n[Wr]=[]),n[Wr].push(e)}function k1(n,e){if(n[Wr]===null)return;let t=n[Wr].indexOf(e);t!==-1&&n[Wr].splice(t,1)}function zi(n){let e=n[Ut];return Ir(e)?e[Ut]:e}var ye={lFrame:ZC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var $C=!1;function O1(){return ye.lFrame.elementDepthCount}function F1(){ye.lFrame.elementDepthCount++}function V1(){ye.lFrame.elementDepthCount--}function HC(){return ye.bindingsEnabled}function L1(){return ye.skipHydrationRootTNode!==null}function j1(n){return ye.skipHydrationRootTNode===n}function B1(){ye.skipHydrationRootTNode=null}function Le(){return ye.lFrame.lView}function ln(){return ye.lFrame.tView}function Te(n){return ye.lFrame.contextLView=n,n[Pn]}function Se(n){return ye.lFrame.contextLView=null,n}function Ht(){let n=qC();for(;n!==null&&n.type===64;)n=n.parent;return n}function qC(){return ye.lFrame.currentTNode}function U1(){let n=ye.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function mc(n,e){let t=ye.lFrame;t.currentTNode=n,t.isParent=e}function zC(){return ye.lFrame.isParent}function $1(){ye.lFrame.isParent=!1}function GC(){return $C}function xI(n){$C=n}function H1(){return ye.lFrame.bindingIndex}function q1(n){return ye.lFrame.bindingIndex=n}function Pd(){return ye.lFrame.bindingIndex++}function WC(n){let e=ye.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function z1(){return ye.lFrame.inI18n}function G1(n,e){let t=ye.lFrame;t.bindingIndex=t.bindingRootIndex=n,Rg(e)}function W1(){return ye.lFrame.currentDirectiveIndex}function Rg(n){ye.lFrame.currentDirectiveIndex=n}function K1(n){let e=ye.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function KC(n){ye.lFrame.currentQueryIndex=n}function Q1(n){let e=n[ve];return e.type===2?e.declTNode:e.type===1?n[kn]:null}function QC(n,e,t){if(t&fe.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&fe.Host);)if(i=Q1(o),i===null||(o=o[Es],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ye.lFrame=YC();return r.currentTNode=e,r.lView=n,!0}function ym(n){let e=YC(),t=n[ve];ye.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function YC(){let n=ye.lFrame,e=n===null?null:n.child;return e===null?ZC(n):e}function ZC(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function JC(){let n=ye.lFrame;return ye.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var XC=JC;function vm(){let n=JC();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Y1(n){return(ye.lFrame.contextLView=P1(n,ye.lFrame.contextLView))[Pn]}function Ji(){return ye.lFrame.selectedIndex}function Gi(n){ye.lFrame.selectedIndex=n}function _m(){let n=ye.lFrame;return LC(n.tView,n.selectedIndex)}function Z1(){return ye.lFrame.currentNamespace}var eb=!0;function wm(){return eb}function Em(n){eb=n}function J1(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=kC(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Im(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Ql(n,e,t){tb(n,e,3,t)}function Yl(n,e,t,r){(n[ae]&3)===t&&tb(n,e,t,r)}function dg(n,e){let t=n[ae];(t&3)===e&&(t&=16383,t+=1,n[ae]=t)}function tb(n,e,t,r){let i=r!==void 0?n[ts]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[ts]+=65536),(a<o||o==-1)&&(X1(n,t,e,c),n[ts]=(n[ts]&4294901760)+c+2),c++}function MI(n,e){zn(4,n,e);let t=be(null);try{e.call(n)}finally{be(t),zn(5,n,e)}}function X1(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ae]>>14<n[ts]>>16&&(n[ae]&3)===e&&(n[ae]+=16384,MI(a,o)):MI(a,o)}var os=-1,Wi=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function eP(n){return n instanceof Wi}function tP(n){return(n.flags&8)!==0}function nP(n){return(n.flags&16)!==0}var hg={},Ng=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Sd(r);let i=this.injector.get(e,hg,r);return i!==hg||t===hg?i:this.parentInjector.get(e,t,r)}};function nb(n){return n!==os}function cd(n){return n&32767}function rP(n){return n>>16}function ud(n,e){let t=rP(n),r=e;for(;t>0;)r=r[Es],t--;return r}var Pg=!0;function RI(n){let e=Pg;return Pg=n,e}var iP=256,rb=iP-1,ib=5,oP=0,Gn={};function sP(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(sc)&&(r=t[sc]),r==null&&(r=t[sc]=oP++);let i=r&rb,o=1<<i;e.data[n+(i>>ib)]|=o}function ld(n,e){let t=ob(n,e);if(t!==-1)return t;let r=e[ve];r.firstCreatePass&&(n.injectorIndex=e.length,fg(r.data,n),fg(e,null),fg(r.blueprint,null));let i=Cm(n,e),o=n.injectorIndex;if(nb(i)){let s=cd(i),a=ud(i,e),c=a[ve].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function fg(n,e){n.push(0,0,0,0,0,0,0,0,e)}function ob(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Cm(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=lb(i),r===null)return os;if(t++,i=i[Es],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return os}function kg(n,e,t){sP(n,e,t)}function aP(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(yC(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function sb(n,e,t){if(t&fe.Optional||n!==void 0)return n;um(e,"NodeInjector")}function ab(n,e,t,r){if(t&fe.Optional&&r===void 0&&(r=null),!(t&(fe.Self|fe.Host))){let i=n[ls],o=yn(void 0);try{return i?i.get(e,r,t&fe.Optional):dC(e,r,t&fe.Optional)}finally{yn(o)}}return sb(r,e,t)}function cb(n,e,t,r=fe.Default,i){if(n!==null){if(e[ae]&2048&&!(r&fe.Self)){let s=hP(n,e,t,r,Gn);if(s!==Gn)return s}let o=ub(n,e,t,r,Gn);if(o!==Gn)return o}return ab(e,t,r,i)}function ub(n,e,t,r,i){let o=lP(t);if(typeof o=="function"){if(!QC(e,n,r))return r&fe.Host?sb(i,t,r):ab(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&fe.Optional))um(t);else return s}finally{XC()}}else if(typeof o=="number"){let s=null,a=ob(n,e),c=os,l=r&fe.Host?e[Qn][kn]:null;for((a===-1||r&fe.SkipSelf)&&(c=a===-1?Cm(n,e):e[a+8],c===os||!PI(r,!1)?a=-1:(s=e[ve],a=cd(c),e=ud(c,e)));a!==-1;){let h=e[ve];if(NI(o,a,h.data)){let p=cP(a,e,t,s,r,l);if(p!==Gn)return p}c=e[a+8],c!==os&&PI(r,e[ve].data[a+8]===l)&&NI(o,a,e)?(s=h,a=cd(c),e=ud(c,e)):a=-1}}return i}function cP(n,e,t,r,i,o){let s=e[ve],a=s.data[n+8],c=r==null?Md(a)&&Pg:r!=s&&(a.type&3)!==0,l=i&fe.Host&&o===a,h=uP(a,s,t,c,l);return h!==null?fs(e,s,h,a):Gn}function uP(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let y=p;y<m;y++){let D=s[y];if(y<c&&t===D||y>=c&&D.type===t)return y}if(i){let y=s[c];if(y&&Jr(y)&&y.type===t)return c}return null}function fs(n,e,t,r){let i=n[t],o=e.data;if(eP(i)){let s=i;s.resolving&&jN(LN(o[t]));let a=RI(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?yn(s.injectImpl):null,h=QC(n,r,fe.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&J1(t,o[t],e)}finally{l!==null&&yn(l),RI(a),s.resolving=!1,XC()}}return i}function lP(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(sc)?n[sc]:void 0;return typeof e=="number"?e>=0?e&rb:dP:e}function NI(n,e,t){let r=1<<n;return!!(t[e+(n>>ib)]&r)}function PI(n,e){return!(n&fe.Self)&&!(n&fe.Host&&e)}var Hi=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return cb(this._tNode,this._lView,e,Sd(r),t)}};function dP(){return new Hi(Ht(),Le())}function yc(n){return pc(()=>{let e=n.prototype.constructor,t=e[Jl]||Og(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Jl]||Og(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Og(n){return oC(n)?()=>{let e=Og(jt(n));return e&&e()}:ss(n)}function hP(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ae]&2048&&!(s[ae]&512);){let a=ub(o,s,t,r|fe.Self,Gn);if(a!==Gn)return a;let c=o.parent;if(!c){let l=s[MC];if(l){let h=l.get(t,Gn,r);if(h!==Gn)return h}c=lb(s),s=s[Es]}o=c}return i}function lb(n){let e=n[ve],t=e.type;return t===2?e.declTNode:t===1?n[kn]:null}function bm(n){return aP(Ht(),n)}function kI(n,e=null,t=null,r){let i=db(n,e,t,r);return i.resolveInjectorInitializers(),i}function db(n,e=null,t=null,r,i=new Set){let o=[t||vn,f1(n)];return r=r||(typeof n=="object"?void 0:Bt(n)),new lc(o,e||pm(),r||null,i)}var un=class n{static{this.THROW_IF_NOT_FOUND=cc}static{this.NULL=new td}static create(e,t){if(Array.isArray(e))return kI({name:""},t,e,"");{let r=e.name??"";return kI({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=G({token:n,providedIn:"any",factory:()=>L(pC)})}static{this.__NG_ELEMENT_ID__=-1}};var fP=new Q("");fP.__NG_ELEMENT_ID__=n=>{let e=Ht();if(e===null)throw new ee(204,!1);if(e.type&2)return e.value;if(n&fe.Optional)return null;throw new ee(204,!1)};var pP="ngOriginalError";function pg(n){return n[pP]}var hb=!0,Dm=(()=>{class n{static{this.__NG_ELEMENT_ID__=gP}static{this.__NG_ENV_ID__=t=>t}}return n})(),Fg=class extends Dm{constructor(e){super(),this._lView=e}onDestroy(e){return UC(this._lView,e),()=>k1(this._lView,e)}};function gP(){return new Fg(Le())}var Is=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ct(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=G({token:n,providedIn:"root",factory:()=>new n})}}return n})();var Vg=class extends qe{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,xC()&&(this.destroyRef=H(Dm,{optional:!0})??void 0,this.pendingTasks=H(Is,{optional:!0})??void 0)}emit(e){let t=be(null);try{super.next(e)}finally{be(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Je&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},at=Vg;function dd(...n){}function fb(n){let e,t;function r(){n=dd;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function OI(n){return queueMicrotask(()=>n()),()=>{n=dd}}var Tm="isAngularZone",hd=Tm+"_ID",mP=0,Ee=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new at(!1),this.onMicrotaskEmpty=new at(!1),this.onStable=new at(!1),this.onError=new at(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=hb}=e;if(typeof Zone>"u")throw new ee(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,_P(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Tm)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new ee(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new ee(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,yP,dd,dd);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},yP={};function Sm(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function vP(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){fb(()=>{n.callbackScheduled=!1,Lg(n),n.isCheckStableRunning=!0,Sm(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Lg(n)}function _P(n){let e=()=>{vP(n)},t=mP++;n._inner=n._inner.fork({name:"angular",properties:{[Tm]:!0,[hd]:t,[hd+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(wP(c))return r.invokeTask(o,s,a,c);try{return FI(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),VI(n)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return FI(n),r.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!EP(c)&&e(),VI(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Lg(n),Sm(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Lg(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function FI(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function VI(n){n._nesting--,Sm(n)}var fd=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new at,this.onMicrotaskEmpty=new at,this.onStable=new at,this.onError=new at}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function wP(n){return pb(n,"__ignore_ng_zone__")}function EP(n){return pb(n,"__scheduler_tick__")}function pb(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function IP(n="zone.js",e){return n==="noop"?new fd:n==="zone.js"?new Ee(e):n}var vr=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&pg(e);for(;t&&pg(t);)t=pg(t);return t||null}},CP=new Q("",{providedIn:"root",factory:()=>{let n=H(Ee),e=H(vr);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function bP(){return kd(Ht(),Le())}function kd(n,e){return new ni(En(n,e))}var ni=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=bP}}return n})();function gb(n){return(n.flags&128)===128}var mb=new Map,DP=0;function TP(){return DP++}function SP(n){mb.set(n[xd],n)}function jg(n){mb.delete(n[xd])}var LI="__ngContext__";function Ki(n,e){Kr(e)?(n[LI]=e[xd],SP(e)):n[LI]=e}function yb(n){return _b(n[dc])}function vb(n){return _b(n[Rn])}function _b(n){for(;n!==null&&!Ir(n);)n=n[Rn];return n}var Bg;function wb(n){Bg=n}function AP(){if(Bg!==void 0)return Bg;if(typeof document<"u")return document;throw new ee(210,!1)}var Od=new Q("",{providedIn:"root",factory:()=>xP}),xP="ng",Am=new Q(""),Yt=new Q("",{providedIn:"platform",factory:()=>"unknown"});var xm=new Q("",{providedIn:"root",factory:()=>AP().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var MP="h",RP="b";var NP=()=>null;function Mm(n,e,t=!1){return NP(n,e,t)}var Eb=!1,PP=new Q("",{providedIn:"root",factory:()=>Eb});var Hl;function kP(){if(Hl===void 0&&(Hl=null,Nn.trustedTypes))try{Hl=Nn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Hl}function jI(n){return kP()?.createScriptURL(n)||n}var pd=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${rC})`}};function vc(n){return n instanceof pd?n.changingThisBreaksApplicationSecurity:n}function Rm(n,e){let t=OP(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${rC})`)}return t===e}function OP(n){return n instanceof pd&&n.getTypeName()||null}var FP=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Ib(n){return n=String(n),n.match(FP)?n:"unsafe:"+n}var Fd=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Fd||{});function Nm(n){let e=bb();return e?e.sanitize(Fd.URL,n)||"":Rm(n,"URL")?vc(n):Ib($i(n))}function VP(n){let e=bb();if(e)return jI(e.sanitize(Fd.RESOURCE_URL,n)||"");if(Rm(n,"ResourceURL"))return jI(vc(n));throw new ee(904,!1)}function LP(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?VP:Nm}function Cb(n,e,t){return LP(e,t)(n)}function bb(){let n=Le();return n&&n[Kn].sanitizer}function Db(n){return n instanceof Function?n():n}function jP(n){return(n??H(un)).get(Yt)==="browser"}var _r=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(_r||{}),BP;function Pm(n,e){return BP(n,e)}function ns(n,e,t,r,i){if(r!=null){let o,s=!1;Ir(r)?o=r:Kr(r)&&(s=!0,r=r[Er]);let a=Yn(r);n===0&&t!==null?i==null?Mb(e,t,a):gd(e,t,a,i||null,!0):n===1&&t!==null?gd(e,t,a,i||null,!0):n===2?tk(e,a,s):n===3&&e.destroyNode(a),o!=null&&rk(e,n,o,t,i)}}function UP(n,e){return n.createText(e)}function $P(n,e,t){n.setValue(e,t)}function Tb(n,e,t){return n.createElement(e,t)}function HP(n,e){Sb(n,e),e[Er]=null,e[kn]=null}function qP(n,e,t,r,i,o){r[Er]=i,r[kn]=e,Vd(n,r,t,1,i,o)}function Sb(n,e){e[Kn].changeDetectionScheduler?.notify(9),Vd(n,e,e[gt],2,null,null)}function zP(n){let e=n[dc];if(!e)return gg(n[ve],n);for(;e;){let t=null;if(Kr(e))t=e[dc];else{let r=e[wn];r&&(t=r)}if(!t){for(;e&&!e[Rn]&&e!==n;)Kr(e)&&gg(e[ve],e),e=e[Ut];e===null&&(e=n),Kr(e)&&gg(e[ve],e),t=e&&e[Rn]}e=t}}function GP(n,e,t,r){let i=wn+r,o=t.length;r>0&&(t[i-1][Rn]=e),r<o-wn?(e[Rn]=t[i],fC(t,wn+r,e)):(t.push(e),e[Rn]=null),e[Ut]=t;let s=e[ds];s!==null&&t!==s&&Ab(s,e);let a=e[hs];a!==null&&a.insertView(n),Mg(e),e[ae]|=128}function Ab(n,e){let t=n[od],r=e[Ut];if(Kr(r))n[ae]|=sd.HasTransplantedViews;else{let i=r[Ut][Qn];e[Qn]!==i&&(n[ae]|=sd.HasTransplantedViews)}t===null?n[od]=[e]:t.push(e)}function km(n,e){let t=n[od],r=t.indexOf(e);t.splice(r,1)}function Ug(n,e){if(n.length<=wn)return;let t=wn+e,r=n[t];if(r){let i=r[ds];i!==null&&i!==n&&km(i,r),e>0&&(n[t-1][Rn]=r[Rn]);let o=ed(n,wn+e);HP(r[ve],r);let s=o[hs];s!==null&&s.detachView(o[ve]),r[Ut]=null,r[Rn]=null,r[ae]&=-129}return r}function xb(n,e){if(!(e[ae]&256)){let t=e[gt];t.destroyNode&&Vd(n,e,t,3,null,null),zP(e)}}function gg(n,e){if(e[ae]&256)return;let t=be(null);try{e[ae]&=-129,e[ae]|=256,e[_n]&&Up(e[_n]),KP(n,e),WP(n,e),e[ve].type===1&&e[gt].destroy();let r=e[ds];if(r!==null&&Ir(e[Ut])){r!==e[Ut]&&km(r,e);let i=e[hs];i!==null&&i.detachView(n)}jg(e)}finally{be(t)}}function WP(n,e){let t=n.cleanup,r=e[rd];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[rd]=null);let i=e[Wr];if(i!==null){e[Wr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function KP(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Wi)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];zn(4,a,c);try{c.call(a)}finally{zn(5,a,c)}}else{zn(4,i,o);try{o.call(i)}finally{zn(5,i,o)}}}}}function QP(n,e,t){return YP(n,e.parent,t)}function YP(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Er];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Wn.None||o===Wn.Emulated)return null}return En(r,t)}}function gd(n,e,t,r,i){n.insertBefore(e,t,r,i)}function Mb(n,e,t){n.appendChild(e,t)}function BI(n,e,t,r,i){r!==null?gd(n,e,t,r,i):Mb(n,e,t)}function Rb(n,e){return n.parentNode(e)}function ZP(n,e){return n.nextSibling(e)}function JP(n,e,t){return ek(n,e,t)}function XP(n,e,t){return n.type&40?En(n,t):null}var ek=XP,UI;function Om(n,e,t,r){let i=QP(n,r,e),o=e[gt],s=r.parent||e[kn],a=JP(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)BI(o,i,t[c],a,!1);else BI(o,i,t,a,!1);UI!==void 0&&UI(o,r,e,t,i)}function oc(n,e){if(e!==null){let t=e.type;if(t&3)return En(e,n);if(t&4)return $g(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return oc(n,r);{let i=n[e.index];return Ir(i)?$g(-1,i):Yn(i)}}else{if(t&128)return oc(n,e.next);if(t&32)return Pm(e,n)()||Yn(n[e.index]);{let r=Nb(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=zi(n[Qn]);return oc(i,r)}else return oc(n,e.next)}}}return null}function Nb(n,e){if(e!==null){let r=n[Qn][kn],i=e.projection;return r.projection[i]}return null}function $g(n,e){let t=wn+n+1;if(t<e.length){let r=e[t],i=r[ve].firstChild;if(i!==null)return oc(r,i)}return e[qi]}function tk(n,e,t){n.removeChild(null,e,t)}function Fm(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&Ki(Yn(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)Fm(n,e,t.child,r,i,o,!1),ns(e,n,i,a,o);else if(c&32){let l=Pm(t,r),h;for(;h=l();)ns(e,n,i,h,o);ns(e,n,i,a,o)}else c&16?nk(n,e,r,t,i,o):ns(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Vd(n,e,t,r,i,o){Fm(t,r,n.firstChild,e,i,o,!1)}function nk(n,e,t,r,i,o){let s=t[Qn],c=s[kn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let h=c[l];ns(e,n,i,h,o)}else{let l=c,h=s[Ut];gb(r)&&(l.flags|=128),Fm(n,e,l,h,i,o,!0)}}function rk(n,e,t,r,i){let o=t[qi],s=Yn(t);o!==s&&ns(e,n,r,o,i);for(let a=wn;a<t.length;a++){let c=t[a];Vd(c[ve],c,n,e,r,o)}}function ik(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:_r.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=_r.Important),n.setStyle(t,r,i,o))}}function ok(n,e,t){n.setAttribute(e,"style",t)}function Pb(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function kb(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&bg(n,e,r),i!==null&&Pb(n,e,i),o!==null&&ok(n,e,o)}var ri={};function K(n=1){Ob(ln(),Le(),Ji()+n,!1)}function Ob(n,e,t,r){if(!r)if((e[ae]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Ql(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Yl(e,o,0,t)}Gi(t)}function oe(n,e=fe.Default){let t=Le();if(t===null)return L(n,e);let r=Ht();return cb(r,t,jt(n),e)}function Fb(){let n="invalid";throw new Error(n)}function Vb(n,e,t,r,i,o){let s=be(null);try{let a=null;i&Qr.SignalBased&&(a=e[r][pr]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Qr.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):PC(e,a,r,o)}finally{be(s)}}function sk(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Gi(~i);else{let o=i,s=t[++r],a=t[++r];G1(s,o);let c=e[o];a(2,c)}}}finally{Gi(-1)}}function Ld(n,e,t,r,i,o,s,a,c,l,h){let p=e.blueprint.slice();return p[Er]=i,p[ae]=r|4|128|8|64,(l!==null||n&&n[ae]&2048)&&(p[ae]|=2048),jC(p),p[Ut]=p[Es]=n,p[Pn]=t,p[Kn]=s||n&&n[Kn],p[gt]=a||n&&n[gt],p[ls]=c||n&&n[ls]||null,p[kn]=o,p[xd]=TP(),p[nd]=h,p[MC]=l,p[Qn]=e.type==2?n[Qn]:p,p}function jd(n,e,t,r,i){let o=n.data[e];if(o===null)o=ak(n,e,t,r,i),z1()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=U1();o.injectorIndex=s===null?-1:s.injectorIndex}return mc(o,!0),o}function ak(n,e,t,r,i){let o=qC(),s=zC(),a=s?o:o&&o.parent,c=n.data[e]=hk(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function Lb(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function jb(n,e,t,r,i){let o=Ji(),s=r&2;try{Gi(-1),s&&e.length>Zr&&Ob(n,e,Zr,!1),zn(s?2:0,i),t(r,i)}finally{Gi(o),zn(s?3:1,i)}}function Bb(n,e,t){if(NC(e)){let r=be(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{be(r)}}}function Ub(n,e,t){HC()&&(vk(n,e,t,En(t,e)),(t.flags&64)===64&&Wb(n,e,t))}function $b(n,e,t=En){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function Hb(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Vm(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Vm(n,e,t,r,i,o,s,a,c,l,h){let p=Zr+r,m=p+i,y=ck(p,m),D=typeof l=="function"?l():l;return y[ve]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:D,incompleteFirstPass:!1,ssrId:h}}function ck(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:ri);return t}function uk(n,e,t,r){let o=r.get(PP,Eb)||t===Wn.ShadowDom,s=n.selectRootElement(e,o);return lk(s),s}function lk(n){dk(n)}var dk=()=>null;function hk(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return L1()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function $I(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=Qr.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?HI(r,t,l,a,c):HI(r,t,l,a)}return r}function HI(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function fk(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],c=null,l=null;for(let h=r;h<i;h++){let p=o[h],m=t?t.get(p):null,y=m?m.inputs:null,D=m?m.outputs:null;c=$I(0,p.inputs,h,c,y),l=$I(1,p.outputs,h,l,D);let A=c!==null&&s!==null&&!hm(e)?xk(c,h,s):null;a.push(A)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function pk(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function qb(n,e,t,r,i,o,s,a){let c=En(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(Lm(n,t,h,r,i),Md(e)&&gk(t,e.index)):e.type&3?(r=pk(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function gk(n,e){let t=ti(e,n);t[ae]&16||(t[ae]|=64)}function zb(n,e,t,r){if(HC()){let i=r===null?null:{"":-1},o=wk(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&Gb(n,e,t,s,i,a),i&&Ek(t,r,i)}t.mergedAttrs=uc(t.mergedAttrs,t.attrs)}function Gb(n,e,t,r,i,o){for(let l=0;l<r.length;l++)kg(ld(t,e),n,r[l].type);Ck(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,c=Lb(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=uc(t.mergedAttrs,h.hostAttrs),bk(n,t,e,c,h),Ik(c,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let p=h.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}fk(n,t,o)}function mk(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;yk(s)!=a&&s.push(a),s.push(t,r,o)}}function yk(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function vk(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;Md(t)&&Dk(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||ld(t,e),Ki(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let c=n.data[a],l=fs(e,n,a,t);if(Ki(l,e),s!==null&&Ak(e,a-i,l,c,t,s),Jr(c)){let h=ti(t.index,e);h[Pn]=fs(e,n,a,t)}}}function Wb(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=W1();try{Gi(o);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];Rg(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&_k(c,l)}}finally{Gi(-1),Rg(s)}}function _k(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function wk(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(i1(e,s.selectors,!1))if(r||(r=[]),Jr(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;Hg(n,e,c)}else r.unshift(s),Hg(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Hg(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function Ek(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new ee(-301,!1);r.push(e[i],o)}}}function Ik(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Jr(e)&&(t[""]=n)}}function Ck(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function bk(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=ss(i.type,!0)),s=new Wi(o,Jr(i),oe);n.blueprint[r]=s,t[r]=s,mk(n,e,r,Lb(n,t,i.hostVars,ri),i)}function Dk(n,e,t){let r=En(e,n),i=Hb(t),o=n[Kn].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=Bd(n,Ld(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function Tk(n,e,t,r,i,o){let s=En(n,e);Sk(e[gt],s,o,n.value,t,r,i)}function Sk(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?$i(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function Ak(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],h=s[a++],p=s[a++];Vb(r,t,c,l,h,p)}}function xk(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function Kb(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function Qb(n,e){let t=n.contentQueries;if(t!==null){let r=be(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];KC(o),a.contentQueries(2,e[s],s)}}}finally{be(r)}}}function Bd(n,e){return n[dc]?n[SI][Rn]=e:n[dc]=e,n[SI]=e,e}function qg(n,e,t){KC(0);let r=be(null);try{e(n,t)}finally{be(r)}}function Mk(n){return n[rd]??=[]}function Rk(n){return n.cleanup??=[]}function Yb(n,e){let t=n[ls],r=t?t.get(vr,null):null;r&&r.handleError(e)}function Lm(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],c=t[o++],l=e[s],h=n.data[s];Vb(h,l,r,a,c,i)}}function Zb(n,e,t){let r=VC(e,n);$P(n[gt],r,t)}function Nk(n,e){let t=ti(e,n),r=t[ve];Pk(r,t);let i=t[Er];i!==null&&t[nd]===null&&(t[nd]=Mm(i,t[ls])),jm(r,t,t[Pn])}function Pk(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function jm(n,e,t){ym(e);try{let r=n.viewQuery;r!==null&&qg(1,r,t);let i=n.template;i!==null&&jb(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[hs]?.finishViewCreation(n),n.staticContentQueries&&Qb(n,e),n.staticViewQueries&&qg(2,n.viewQuery,t);let o=n.components;o!==null&&kk(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ae]&=-5,vm()}}function kk(n,e){for(let t=0;t<e.length;t++)Nk(n,e[t])}function Ok(n,e,t,r){let i=be(null);try{let o=e.tView,a=n[ae]&4096?4096:16,c=Ld(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[ds]=l;let h=n[hs];return h!==null&&(c[hs]=h.createEmbeddedView(o)),jm(o,c,t),c}finally{be(i)}}function qI(n,e){return!e||e.firstChild===null||gb(n)}function Fk(n,e,t,r=!0){let i=e[ve];if(GP(i,e,n,t),r){let s=$g(t,n),a=e[gt],c=Rb(a,n[qi]);c!==null&&qP(i,n[kn],a,e,c,s)}let o=e[nd];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function md(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Yn(o)),Ir(o)&&Vk(o,r);let s=t.type;if(s&8)md(n,e,t.child,r);else if(s&32){let a=Pm(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=Nb(e,t);if(Array.isArray(a))r.push(...a);else{let c=zi(e[Qn]);md(c[ve],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function Vk(n,e){for(let t=wn;t<n.length;t++){let r=n[t],i=r[ve].firstChild;i!==null&&md(r[ve],r,i,e)}n[qi]!==n[Er]&&e.push(n[qi])}var Jb=[];function Lk(n){return n[_n]??jk(n)}function jk(n){let e=Jb.pop()??Object.create(Uk);return e.lView=n,e}function Bk(n){n.lView[_n]!==n&&(n.lView=null,Jb.push(n))}var Uk=pe(O({},Za),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Nd(n.lView)},consumerOnSignalRead(){this.lView[_n]=this}});function $k(n){let e=n[_n]??Object.create(Hk);return e.lView=n,e}var Hk=pe(O({},Za),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=zi(n.lView);for(;e&&!Xb(e[ve]);)e=zi(e);e&&BC(e)},consumerOnSignalRead(){this.lView[_n]=this}});function Xb(n){return n.type!==2}var qk=100;function eD(n,e=!0,t=0){let r=n[Kn],i=r.rendererFactory,o=!1;o||i.begin?.();try{zk(n,t)}catch(s){throw e&&Yb(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function zk(n,e){let t=GC();try{xI(!0),zg(n,e);let r=0;for(;Rd(n);){if(r===qk)throw new ee(103,!1);r++,zg(n,1)}}finally{xI(t)}}function Gk(n,e,t,r){let i=e[ae];if((i&256)===256)return;let o=!1,s=!1;!o&&e[Kn].inlineEffectRunner?.flush(),ym(e);let a=!0,c=null,l=null;o||(Xb(n)?(l=Lk(e),c=hl(l)):F0()===null?(a=!1,l=$k(e),c=hl(l)):e[_n]&&(Up(e[_n]),e[_n]=null));try{jC(e),q1(n.bindingStartIndex),t!==null&&jb(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&Ql(e,y,null)}else{let y=n.preOrderHooks;y!==null&&Yl(e,y,0,null),dg(e,0)}if(s||Wk(e),tD(e,0),n.contentQueries!==null&&Qb(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&Ql(e,y)}else{let y=n.contentHooks;y!==null&&Yl(e,y,1),dg(e,1)}sk(n,e);let p=n.components;p!==null&&rD(e,p,0);let m=n.viewQuery;if(m!==null&&qg(2,m,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&Ql(e,y)}else{let y=n.viewHooks;y!==null&&Yl(e,y,2),dg(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[lg]){for(let y of e[lg])y();e[lg]=null}o||(e[ae]&=-73)}catch(h){throw o||Nd(e),h}finally{l!==null&&(jp(l,c),a&&Bk(l)),vm()}}function tD(n,e){for(let t=yb(n);t!==null;t=vb(t))for(let r=wn;r<t.length;r++){let i=t[r];nD(i,e)}}function Wk(n){for(let e=yb(n);e!==null;e=vb(e)){if(!(e[ae]&sd.HasTransplantedViews))continue;let t=e[od];for(let r=0;r<t.length;r++){let i=t[r];BC(i)}}}function Kk(n,e,t){let r=ti(e,n);nD(r,t)}function nD(n,e){mm(n)&&zg(n,e)}function zg(n,e){let r=n[ve],i=n[ae],o=n[_n],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Bp(o)),s||=!1,o&&(o.dirty=!1),n[ae]&=-9217,s)Gk(r,n,r.template,n[Pn]);else if(i&8192){tD(n,1);let a=r.components;a!==null&&rD(n,a,1)}}function rD(n,e,t){for(let r=0;r<e.length;r++)Kk(n,e[r],t)}function Bm(n,e){let t=GC()?64:1088;for(n[Kn].changeDetectionScheduler?.notify(e);n;){n[ae]|=t;let r=zi(n);if(Ag(n)&&!r)return n;n=r}return null}var Qi=class{get rootNodes(){let e=this._lView,t=e[ve];return md(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Pn]}set context(e){this._lView[Pn]=e}get destroyed(){return(this._lView[ae]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ut];if(Ir(e)){let t=e[id],r=t?t.indexOf(this):-1;r>-1&&(Ug(e,r),ed(t,r))}this._attachedToViewContainer=!1}xb(this._lView[ve],this._lView)}onDestroy(e){UC(this._lView,e)}markForCheck(){Bm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ae]&=-129}reattach(){Mg(this._lView),this._lView[ae]|=128}detectChanges(){this._lView[ae]|=1024,eD(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ee(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Ag(this._lView),t=this._lView[ds];t!==null&&!e&&km(t,this._lView),Sb(this._lView[ve],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ee(902,!1);this._appRef=e;let t=Ag(this._lView),r=this._lView[ds];r!==null&&!t&&Ab(r,this._lView),Mg(this._lView)}},Ud=(()=>{class n{static{this.__NG_ELEMENT_ID__=Zk}}return n})(),Qk=Ud,Yk=class extends Qk{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=Ok(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Qi(i)}};function Zk(){return Jk(Ht(),Le())}function Jk(n,e){return n.type&4?new Yk(e,n,kd(n,e)):null}var a5=new RegExp(`^(\\d+)*(${RP}|${MP})*(.*)`);var Xk=()=>null;function zI(n,e){return Xk(n,e)}var ps=class{},Um=new Q("",{providedIn:"root",factory:()=>!1});var iD=new Q(""),oD=new Q(""),Gg=class{},yd=class{};function eO(n){let e=Error(`No component factory found for ${Bt(n)}.`);return e[tO]=n,e}var tO="ngComponent";var Wg=class{resolveComponentFactory(e){throw eO(e)}},gs=class{static{this.NULL=new Wg}},ms=class{},Xi=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>nO()}}return n})();function nO(){let n=Le(),e=Ht(),t=ti(e.index,n);return(Kr(t)?t:n)[gt]}var rO=(()=>{class n{static{this.\u0275prov=G({token:n,providedIn:"root",factory:()=>null})}}return n})();function Kg(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=yI(i,a);else if(o==2){let c=a,l=e[++s];r=yI(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var vd=class extends gs{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Yr(e);return new ys(t,this.ngModule)}};function GI(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:Qr.None;e?t.push({propName:s,templateName:r,isSignal:(a&Qr.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function iO(n){let e=n.toLowerCase();return e==="svg"?M1:e==="math"?R1:null}var ys=class extends yd{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=GI(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return GI(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=c1(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=be(null);try{i=i||this.ngModule;let s=i instanceof cn?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Ng(e,s):e,c=a.get(ms,null);if(c===null)throw new ee(407,!1);let l=a.get(rO,null),h=a.get(ps,null),p={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=c.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",D=r?uk(m,r,this.componentDef.encapsulation,a):Tb(m,y,iO(y)),A=512;this.componentDef.signals?A|=4096:this.componentDef.onPush||(A|=16);let x=null;D!==null&&(x=Mm(D,a,!0));let U=Vm(0,null,null,1,0,null,null,null,null,null,null),W=Ld(null,U,null,A,null,null,p,m,a,null,x);ym(W);let j,X,ie=null;try{let te=this.componentDef,E,v=null;te.findHostDirectiveDefs?(E=[],v=new Map,te.findHostDirectiveDefs(te,E,v),E.push(te)):E=[te];let w=oO(W,D);ie=sO(w,D,te,E,W,p,m),X=LC(U,Zr),D&&uO(m,te,D,r),t!==void 0&&lO(X,this.ngContentSelectors,t),j=cO(ie,te,E,v,W,[dO]),jm(U,W,null)}catch(te){throw ie!==null&&jg(ie),jg(W),te}finally{vm()}return new Qg(this.componentType,j,kd(X,W),W,X)}finally{be(o)}}},Qg=class extends Gg{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Qi(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;Lm(o[ve],o,i,e,t),this.previousInputValues.set(e,t);let s=ti(this._tNode.index,o);Bm(s,1)}}get injector(){return new Hi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function oO(n,e){let t=n[ve],r=Zr;return n[r]=e,jd(t,r,2,"#host",null)}function sO(n,e,t,r,i,o,s){let a=i[ve];aO(r,n,e,s);let c=null;e!==null&&(c=Mm(e,i[ls]));let l=o.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let p=Ld(i,Hb(t),null,h,i[n.index],n,o,l,null,null,c);return a.firstCreatePass&&Hg(a,n,r.length-1),Bd(i,p),i[n.index]=p}function aO(n,e,t,r){for(let i of n)e.mergedAttrs=uc(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Kg(e,e.mergedAttrs,!0),t!==null&&kb(r,t,e))}function cO(n,e,t,r,i,o){let s=Ht(),a=i[ve],c=En(s,i);Gb(a,i,s,t,null,r);for(let h=0;h<t.length;h++){let p=s.directiveStart+h,m=fs(i,a,p,s);Ki(m,i)}Wb(a,i,s),c&&Ki(c,i);let l=fs(i,a,s.directiveStart+s.componentOffset,s);if(n[Pn]=i[Pn]=l,o!==null)for(let h of o)h(l,e);return Bb(a,s,i),l}function uO(n,e,t,r){if(r)bg(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:o}=u1(e.selectors[0]);i&&bg(n,t,i),o&&o.length>0&&Pb(n,t,o.join(" "))}}function lO(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function dO(){let n=Ht();Im(Le()[ve],n)}var Cs=(()=>{class n{static{this.__NG_ELEMENT_ID__=hO}}return n})();function hO(){let n=Ht();return pO(n,Le())}var fO=Cs,sD=class extends fO{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return kd(this._hostTNode,this._hostLView)}get injector(){return new Hi(this._hostTNode,this._hostLView)}get parentInjector(){let e=Cm(this._hostTNode,this._hostLView);if(nb(e)){let t=ud(e,this._hostLView),r=cd(e),i=t[ve].data[r+8];return new Hi(i,t)}else return new Hi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=WI(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-wn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=zI(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,qI(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!T1(e),a;if(s)a=t;else{let D=t||{};a=D.index,r=D.injector,i=D.projectableNodes,o=D.environmentInjector||D.ngModuleRef}let c=s?e:new ys(Yr(e)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let A=(s?l:this.parentInjector).get(cn,null);A&&(o=A)}let h=Yr(c.componentType??{}),p=zI(this._lContainer,h?.id??null),m=p?.firstChild??null,y=c.create(l,i,m,o);return this.insertImpl(y.hostView,a,qI(this._hostTNode,p)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(N1(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Ut],l=new sD(c,c[kn],c[Ut]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return Fk(s,i,o,r),e.attachToViewContainerRef(),fC(mg(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=WI(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Ug(this._lContainer,t);r&&(ed(mg(this._lContainer),t),xb(r[ve],r))}detach(e){let t=this._adjustIndex(e,-1),r=Ug(this._lContainer,t);return r&&ed(mg(this._lContainer),t)!=null?new Qi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function WI(n){return n[id]}function mg(n){return n[id]||(n[id]=[])}function pO(n,e){let t,r=e[n.index];return Ir(r)?t=r:(t=Kb(r,e,null,n),e[n.index]=t,Bd(e,t)),mO(t,e,n,r),new sD(t,n,e)}function gO(n,e){let t=n[gt],r=t.createComment(""),i=En(e,n),o=Rb(t,i);return gd(t,o,r,ZP(t,i),!1),r}var mO=_O,yO=()=>!1;function vO(n,e,t){return yO(n,e,t)}function _O(n,e,t,r){if(n[qi])return;let i;t.type&8?i=Yn(r):i=gO(e,t),n[qi]=i}var KI=new Set;function _c(n){KI.has(n)||(KI.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function wO(n){return typeof n=="function"&&n[pr]!==void 0}function wc(n,e){_c("NgSignals");let t=W0(n),r=t[pr];return e?.equal&&(r.equal=e.equal),t.set=i=>$p(r,i),t.update=i=>K0(r,i),t.asReadonly=EO.bind(t),t}function EO(){let n=this[pr];if(n.readonlyFn===void 0){let e=()=>this();e[pr]=n,n.readonlyFn=e}return n.readonlyFn}function aD(n){return wO(n)&&typeof n.set=="function"}function IO(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(TO))}return o}return _d.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,h=i.styleUrls;i.styleUrls.forEach((p,m)=>{a.push(""),s.push(r(p).then(y=>{a[l+m]=y,h.splice(h.indexOf(p),1),h.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let c=Promise.all(s).then(()=>SO(o));e.push(c)}),bO(),Promise.all(e).then(()=>{})}var _d=new Map,CO=new Set;function bO(){let n=_d;return _d=new Map,n}function DO(){return _d.size===0}function TO(n){return typeof n=="string"?n:n.text()}function SO(n){CO.delete(n)}function AO(n){return Object.getPrototypeOf(n.prototype).constructor}function ii(n){let e=AO(n.type),t=!0,r=[n];for(;e;){let i;if(Jr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ee(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=ql(n.inputs),s.inputTransforms=ql(n.inputTransforms),s.declaredInputs=ql(n.declaredInputs),s.outputs=ql(n.outputs);let a=i.hostBindings;a&&PO(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&RO(n,c),l&&NO(n,l),xO(n,i),MN(n.outputs,i.outputs),Jr(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===ii&&(t=!1)}}e=Object.getPrototypeOf(e)}MO(r)}function xO(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function MO(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=uc(i.hostAttrs,t=uc(t,i.hostAttrs))}}function ql(n){return n===as?{}:n===vn?[]:n}function RO(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function NO(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function PO(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function $m(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}var Xr=class{},hc=class{};var wd=class extends Xr{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new vd(this);let o=IC(e);this._bootstrapComponents=Db(o.bootstrap),this._r3Injector=db(e,t,[{provide:Xr,useValue:this},{provide:gs,useValue:this.componentFactoryResolver},...r],Bt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Ed=class extends hc{constructor(e){super(),this.moduleType=e}create(e){return new wd(this.moduleType,e,[])}};function kO(n,e,t){return new wd(n,e,t,!1)}var Yg=class extends Xr{constructor(e){super(),this.componentFactoryResolver=new vd(this),this.instance=null;let t=new lc([...e.providers,{provide:Xr,useValue:this},{provide:gs,useValue:this.componentFactoryResolver}],e.parent||pm(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function $d(n,e,t=null){return new Yg({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function cD(n){return FO(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function OO(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function FO(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function ei(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function VO(n,e,t,r){let i=ei(n,e,t);return ei(n,e+1,r)||i}function LO(n,e,t,r,i){let o=VO(n,e,t,r);return ei(n,e+2,i)||o}function jO(n){return(n.flags&32)===32}function BO(n,e,t,r,i,o,s,a,c){let l=e.consts,h=jd(e,n,4,s||null,a||null);zb(e,t,h,ad(l,c)),Im(e,h);let p=h.tView=Vm(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function UO(n,e,t,r,i,o,s,a,c,l){let h=t+Zr,p=e.firstCreatePass?BO(h,e,n,r,i,o,s,a,c):e.data[h];mc(p,!1);let m=$O(e,n,p,t);wm()&&Om(e,n,m,p),Ki(m,n);let y=Kb(m,n,m,p);return n[h]=y,Bd(n,y),vO(y,p,n),gm(p)&&Ub(e,n,p),c!=null&&$b(n,p,l),p}function et(n,e,t,r,i,o,s,a){let c=Le(),l=ln(),h=ad(l.consts,o);return UO(c,l,n,e,t,r,i,h,s,a),et}var $O=HO;function HO(n,e,t,r){return Em(!0),e[gt].createComment("")}var rs=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(rs||{}),uD=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=G({token:n,providedIn:"root",factory:()=>new n})}}return n})(),Zg=class n{constructor(){this.ngZone=H(Ee),this.scheduler=H(ps),this.errorHandler=H(vr,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[rs.EarlyRead,rs.Write,rs.MixedReadWrite,rs.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=G({token:n,providedIn:"root",factory:()=>new n})}},Jg=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function Hm(n,e){!e?.injector&&b1(Hm);let t=e?.injector??H(un);return jP(t)?(_c("NgAfterNextRender"),zO(n,t,e,!0)):GO}function qO(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function zO(n,e,t,r){let i=e.get(uD);i.impl??=e.get(Zg);let o=t?.phase??rs.MixedReadWrite,s=t?.manualCleanup!==!0?e.get(Dm):null,a=new Jg(i.impl,qO(n,o),r,s);return i.impl.register(a),a}var GO={destroy(){}};function Hd(n,e,t,r){let i=Le(),o=Pd();if(ei(i,o,e)){let s=ln(),a=_m();Tk(a,i,n,e,t,r)}return Hd}function WO(n,e,t,r){return ei(n,Pd(),t)?e+$i(t)+r:ri}function KO(n,e,t,r,i,o,s,a){let c=H1(),l=LO(n,c,t,i,s);return WC(3),l?e+$i(t)+r+$i(i)+o+$i(s)+a:ri}function zl(n,e){return n<<17|e<<2}function Yi(n){return n>>17&32767}function QO(n){return(n&2)==2}function YO(n,e){return n&131071|e<<17}function Xg(n){return n|2}function vs(n){return(n&131068)>>2}function yg(n,e){return n&-131069|e<<2}function ZO(n){return(n&1)===1}function em(n){return n|1}function JO(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Yi(s),c=vs(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||gc(p,h)>0)&&(l=!0)}else h=t;if(i)if(c!==0){let m=Yi(n[a+1]);n[r+1]=zl(m,a),m!==0&&(n[m+1]=yg(n[m+1],r)),n[a+1]=YO(n[a+1],r)}else n[r+1]=zl(a,0),a!==0&&(n[a+1]=yg(n[a+1],r)),a=r;else n[r+1]=zl(c,0),a===0?a=r:n[c+1]=yg(n[c+1],r),c=r;l&&(n[r+1]=Xg(n[r+1])),QI(n,h,r,!0),QI(n,h,r,!1),XO(e,h,n,r,o),s=zl(a,c),o?e.classBindings=s:e.styleBindings=s}function XO(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&gc(o,e)>=0&&(t[r+1]=em(t[r+1]))}function QI(n,e,t,r){let i=n[t+1],o=e===null,s=r?Yi(i):vs(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],l=n[s+1];eF(c,e)&&(a=!0,n[s+1]=r?em(l):Xg(l)),s=r?Yi(l):vs(l)}a&&(n[t+1]=r?Xg(i):em(i))}function eF(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?gc(n,e)>=0:!1}function We(n,e,t){let r=Le(),i=Pd();if(ei(r,i,e)){let o=ln(),s=_m();qb(o,s,r,n,e,r[gt],t,!1)}return We}function YI(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";Lm(n,t,o[s],s,r)}function qd(n,e,t){return lD(n,e,t,!1),qd}function zd(n,e){return lD(n,e,null,!0),zd}function lD(n,e,t,r){let i=Le(),o=ln(),s=WC(2);if(o.firstUpdatePass&&nF(o,n,s,r),e!==ri&&ei(i,s,e)){let a=o.data[Ji()];aF(o,a,i,i[gt],n,i[s+1]=cF(e,t),r,s)}}function tF(n,e){return e>=n.expandoStartIndex}function nF(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Ji()],s=tF(n,t);uF(o,r)&&e===null&&!s&&(e=!1),e=rF(i,o,e,r),JO(i,o,e,t,s,r)}}function rF(n,e,t,r){let i=K1(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=vg(null,n,e,t,r),t=fc(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=vg(i,n,e,t,r),o===null){let c=iF(n,e,r);c!==void 0&&Array.isArray(c)&&(c=vg(null,n,e,c[1],r),c=fc(c,e.attrs,r),oF(n,e,r,c))}else o=sF(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function iF(n,e,t){let r=t?e.classBindings:e.styleBindings;if(vs(r)!==0)return n[Yi(r)]}function oF(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Yi(i)]=r}function sF(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=fc(r,s,t)}return fc(r,e.attrs,t)}function vg(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=fc(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function fc(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),YN(n,s,t?!0:e[++o]))}return n===void 0?null:n}function aF(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],h=ZO(l)?ZI(c,e,t,i,vs(l),s):void 0;if(!Id(h)){Id(o)||QO(l)&&(o=ZI(c,null,t,i,a,s));let p=VC(Ji(),t);ik(r,s,p,i,o)}}function ZI(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),h=l?c[1]:c,p=h===null,m=t[i+1];m===ri&&(m=p?vn:void 0);let y=p?cg(m,r):h===r?m:void 0;if(l&&!Id(y)&&(y=cg(c,r)),Id(y)&&(a=y,s))return a;let D=n[i+1];i=s?Yi(D):vs(D)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=cg(c,r))}return a}function Id(n){return n!==void 0}function cF(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Bt(vc(n)))),n}function uF(n,e){return(n.flags&(e?8:16))!==0}function lF(n,e,t,r,i,o){let s=e.consts,a=ad(s,i),c=jd(e,n,2,r,a);return zb(e,t,c,ad(s,o)),c.attrs!==null&&Kg(c,c.attrs,!1),c.mergedAttrs!==null&&Kg(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function k(n,e,t,r){let i=Le(),o=ln(),s=Zr+n,a=i[gt],c=o.firstCreatePass?lF(s,o,i,e,t,r):o.data[s],l=dF(o,i,c,a,e,n);i[s]=l;let h=gm(c);return mc(c,!0),kb(a,l,c),!jO(c)&&wm()&&Om(o,i,l,c),O1()===0&&Ki(l,i),F1(),h&&(Ub(o,i,c),Bb(o,c,i)),r!==null&&$b(i,c),k}function P(){let n=Ht();zC()?$1():(n=n.parent,mc(n,!1));let e=n;j1(e)&&B1(),V1();let t=ln();return t.firstCreatePass&&(Im(t,n),NC(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&tP(e)&&YI(t,e,Le(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&nP(e)&&YI(t,e,Le(),e.stylesWithoutHost,!1),P}function On(n,e,t,r){return k(n,e,t,r),P(),On}var dF=(n,e,t,r,i,o)=>(Em(!0),Tb(r,i,Z1()));function ct(){return Le()}var Cd="en-US";var hF=Cd;function fF(n){typeof n=="string"&&(hF=n.toLowerCase().replace(/_/g,"-"))}var pF=(n,e,t)=>{};function ge(n,e,t,r){let i=Le(),o=ln(),s=Ht();return dD(o,i,i[gt],s,n,e,r),ge}function gF(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[rd],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function dD(n,e,t,r,i,o,s){let a=gm(r),l=n.firstCreatePass&&Rk(n),h=e[Pn],p=Mk(e),m=!0;if(r.type&3||s){let A=En(r,e),x=s?s(A):A,U=p.length,W=s?X=>s(Yn(X[r.index])):r.index,j=null;if(!s&&a&&(j=gF(n,e,i,r.index)),j!==null){let X=j.__ngLastListenerFn__||j;X.__ngNextListenerFn__=o,j.__ngLastListenerFn__=o,m=!1}else{o=XI(r,e,h,o),pF(A,i,o);let X=t.listen(x,i,o);p.push(o,X),l&&l.push(i,W,U,U+1)}}else o=XI(r,e,h,o);let y=r.outputs,D;if(m&&y!==null&&(D=y[i])){let A=D.length;if(A)for(let x=0;x<A;x+=2){let U=D[x],W=D[x+1],ie=e[U][W].subscribe(o),te=p.length;p.push(o,ie),l&&l.push(i,r.index,te,-(te+1))}}}function JI(n,e,t,r){let i=be(null);try{return zn(6,e,t),t(r)!==!1}catch(o){return Yb(n,o),!1}finally{zn(7,e,t),be(i)}}function XI(n,e,t,r){return function i(o){if(o===Function)return r;let s=n.componentOffset>-1?ti(n.index,e):e;Bm(s,5);let a=JI(e,t,r,o),c=i.__ngNextListenerFn__;for(;c;)a=JI(e,t,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function we(n=1){return Y1(n)}function B(n,e=""){let t=Le(),r=ln(),i=n+Zr,o=r.firstCreatePass?jd(r,i,1,e,null):r.data[i],s=mF(r,t,o,e,n);t[i]=s,wm()&&Om(r,t,s,o),mc(o,!1)}var mF=(n,e,t,r,i)=>(Em(!0),UP(e[gt],r));function Ke(n){return Rt("",n,""),Ke}function Rt(n,e,t){let r=Le(),i=WO(r,n,e,t);return i!==ri&&Zb(r,Ji(),i),Rt}function qm(n,e,t,r,i,o,s){let a=Le(),c=KO(a,n,e,t,r,i,o,s);return c!==ri&&Zb(a,Ji(),c),qm}function Me(n,e,t){aD(e)&&(e=e());let r=Le(),i=Pd();if(ei(r,i,e)){let o=ln(),s=_m();qb(o,s,r,n,e,r[gt],t,!1)}return Me}function Ne(n,e){let t=aD(n);return t&&n.set(e),t}function Re(n,e){let t=Le(),r=ln(),i=Ht();return dD(r,t,t[gt],i,n,e),Re}function yF(n,e,t){let r=ln();if(r.firstCreatePass){let i=Jr(n);tm(t,r.data,r.blueprint,i,!0),tm(e,r.data,r.blueprint,i,!1)}}function tm(n,e,t,r,i){if(n=jt(n),Array.isArray(n))for(let o=0;o<n.length;o++)tm(n[o],e,t,r,i);else{let o=ln(),s=Le(),a=Ht(),c=us(n)?n:jt(n.provide),l=AC(n),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(us(n)||!n.multi){let y=new Wi(l,i,oe),D=wg(c,e,i?h:h+m,p);D===-1?(kg(ld(a,s),o,c),_g(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[D]=y,s[D]=y)}else{let y=wg(c,e,h+m,p),D=wg(c,e,h,h+m),A=y>=0&&t[y],x=D>=0&&t[D];if(i&&!x||!i&&!A){kg(ld(a,s),o,c);let U=wF(i?_F:vF,t.length,i,r,l);!i&&x&&(t[D].providerFactory=U),_g(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(U),s.push(U)}else{let U=hD(t[i?D:y],l,!i&&r);_g(o,n,y>-1?y:D,U)}!i&&r&&x&&t[D].componentProviders++}}}function _g(n,e,t,r){let i=us(e),o=y1(e);if(i||o){let c=(o?jt(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,c]):l[h+1].push(r,c)}else l.push(t,c)}}}function hD(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function wg(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function vF(n,e,t,r){return nm(this.multi,[])}function _F(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=fs(t,t[ve],this.providerFactory.index,r);o=a.slice(0,s),nm(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],nm(i,o);return o}function nm(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function wF(n,e,t,r,i){let o=new Wi(n,t,oe);return o.multi=[],o.index=e,o.componentProviders=0,hD(o,i,r&&!t),o}function Gd(n,e=[]){return t=>{t.providersResolver=(r,i)=>yF(r,i?i(n):n,e)}}var EF=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=DC(!1,t.type),i=r.length>0?$d([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=G({token:n,providedIn:"environment",factory:()=>new n(L(cn))})}}return n})();function fD(n){_c("NgStandalone"),n.getStandaloneInjector=e=>e.get(EF).getOrCreateStandaloneInjector(n)}var Gl=null;function IF(n){Gl!==null&&(n.defaultEncapsulation!==Gl.defaultEncapsulation||n.preserveWhitespaces!==Gl.preserveWhitespaces)||(Gl=n)}var wr=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},pD=new wr("18.2.13");var Wd=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var zm=new Q(""),Ec=new Q(""),Kd=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Gm||(CF(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ee.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(L(Ee),L(Qd),L(Ec))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),Qd=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return Gm?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function CF(n){Gm=n}var Gm;function eo(n){return!!n&&typeof n.then=="function"}function gD(n){return!!n&&typeof n.subscribe=="function"}var Yd=new Q(""),mD=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=H(Yd,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(eo(o))t.push(o);else if(gD(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Wm=new Q("");function bF(){G0(()=>{throw new ee(600,!1)})}function DF(n){return n.isBoundToModule}var TF=10;function SF(n,e,t){try{let r=t();return eo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function yD(n,e){return Array.isArray(e)?e.reduce(yD,n):O(O({},n),e)}var oi=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=H(CP),this.afterRenderManager=H(uD),this.zonelessEnabled=H(Um),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new qe,this.afterTick=new qe,this.componentTypes=[],this.components=[],this.isStable=H(Is).hasPendingTasks.pipe(Z(t=>!t)),this._injector=H(cn)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof yd;if(!this._injector.get(mD).done){let m=!i&&EC(t),y=!1;throw new ee(405,y)}let s;i?s=t:s=this._injector.get(gs).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=DF(s)?void 0:this._injector.get(Xr),c=r||s.selector,l=s.create(un.NULL,[],c,a),h=l.location.nativeElement,p=l.injector.get(zm,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),Zl(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new ee(101,!1);let t=be(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,be(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(ms,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<TF;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)AF(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Rd(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Zl(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(Wm,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Zl(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ee(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Zl(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function AF(n,e,t,r){if(!t&&!Rd(n))return;eD(n,e,t&&!r?0:1)}var rm=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Zd=(()=>{class n{compileModuleSync(t){return new Ed(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=IC(t),o=Db(i.declarations).reduce((s,a)=>{let c=Yr(a);return c&&s.push(new ys(c)),s},[]);return new rm(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),xF=new Q("");function MF(n,e,t){let r=new Ed(t);return Promise.resolve(r)}function eC(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var RF=(()=>{class n{constructor(){this.zone=H(Ee),this.changeDetectionScheduler=H(ps),this.applicationRef=H(oi)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function NF({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Ee(pe(O({},vD()),{scheduleInRootZone:t})),[{provide:Ee,useFactory:n},{provide:cs,multi:!0,useFactory:()=>{let r=H(RF,{optional:!0});return()=>r.initialize()}},{provide:cs,multi:!0,useFactory:()=>{let r=H(PF);return()=>{r.initialize()}}},e===!0?{provide:iD,useValue:!0}:[],{provide:oD,useValue:t??hb}]}function vD(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var PF=(()=>{class n{constructor(){this.subscription=new Je,this.initialized=!1,this.zone=H(Ee),this.pendingTasks=H(Is)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ee.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ee.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var kF=(()=>{class n{constructor(){this.appRef=H(oi),this.taskService=H(Is),this.ngZone=H(Ee),this.zonelessEnabled=H(Um),this.disableScheduling=H(iD,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Je,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(hd):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(H(oD,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof fd||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?OI:fb;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(hd+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,OI(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function OF(){return typeof $localize<"u"&&$localize.locale||Cd}var Km=new Q("",{providedIn:"root",factory:()=>H(Km,fe.Optional|fe.SkipSelf)||OF()});var bd=new Q("");function Wl(n){return!n.moduleRef}function FF(n){let e=Wl(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ee);return t.run(()=>{Wl(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(vr,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Wl(n)){let o=()=>e.destroy(),s=n.platformInjector.get(bd);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(bd);s.add(o),n.moduleRef.onDestroy(()=>{Zl(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return SF(r,t,()=>{let o=e.get(mD);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Km,Cd);if(fF(s||Cd),Wl(n)){let a=e.get(oi);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return VF(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function VF(n,e){let t=n.injector.get(oi);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new ee(-403,!1);e.push(n)}var _D=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,o=()=>IP(r?.ngZone,pe(O({},vD({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[NF({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:ps,useExisting:kF}],c=kO(t.moduleType,this.injector,a);return FF({moduleRef:c,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=yD({},r);return MF(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ee(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(bd,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(L(un))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),ac=null,wD=new Q("");function LF(n){if(ac&&!ac.get(wD,!1))throw new ee(400,!1);bF(),ac=n;let e=n.get(_D);return UF(n),e}function Qm(n,e,t=[]){let r=`Platform: ${e}`,i=new Q(r);return(o=[])=>{let s=ED();if(!s||s.injector.get(wD,!1)){let a=[...t,...o,{provide:i,useValue:!0}];n?n(a):LF(jF(a,r))}return BF(i)}}function jF(n=[],e){return un.create({name:e,providers:[{provide:Ad,useValue:"platform"},{provide:bd,useValue:new Set([()=>ac=null])},...n]})}function BF(n){let e=ED();if(!e)throw new ee(401,!1);return e}function ED(){return ac?.get(_D)??null}function UF(n){n.get(Am,null)?.forEach(t=>t())}function Ym(){return!1}var to=(()=>{class n{static{this.__NG_ELEMENT_ID__=$F}}return n})();function $F(n){return HF(Ht(),Le(),(n&16)===16)}function HF(n,e,t){if(Md(n)&&!t){let r=ti(n.index,e);return new Qi(r,r)}else if(n.type&175){let r=e[Qn];return new Qi(r,e)}return null}var im=class{constructor(){}supports(e){return cD(e)}create(e){return new om(e)}},qF=(n,e)=>e,om=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||qF}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<tC(r,i,o)?t:r,a=tC(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=c-i;if(l!=h){for(let m=0;m<l;m++){let y=m<o.length?o[m]:o[m]=0,D=y+m;h<=D&&D<l&&(o[m]=y+1)}let p=s.previousIndex;o[p]=h-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!cD(e))throw new ee(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,OO(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new sm(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Dd),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Dd),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},sm=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},am=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Dd=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new am,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function tC(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function nC(){return new Zm([new im])}var Zm=(()=>{class n{static{this.\u0275prov=G({token:n,providedIn:"root",factory:nC})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||nC()),deps:[[n,new lm,new ws]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new ee(901,!1)}}return n})();var ID=Qm(null,"core",[]),CD=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(L(oi))}}static{this.\u0275mod=wt({type:n})}static{this.\u0275inj=vt({})}}return n})();function no(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Ic(n,e){_c("NgSignals");let t=H0(n);return e?.equal&&(t[pr].equal=e.equal),t}function Cr(n){let e=be(null);try{return n()}finally{be(e)}}function bD(n){let e=Yr(n);if(!e)return null;let t=new ys(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var xD=null;function Jn(){return xD}function MD(n){xD??=n}var Jd=class{};var Zt=new Q(""),ny=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>H(zF),providedIn:"platform"})}}return n})(),RD=new Q(""),zF=(()=>{class n extends ny{constructor(){super(),this._doc=H(Zt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Jn().getBaseHref(this._doc)}onPopState(t){let r=Jn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Jn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function ry(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function DD(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function br(n){return n&&n[0]!=="?"?"?"+n:n}var Dr=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>H(iy),providedIn:"root"})}}return n})(),ND=new Q(""),iy=(()=>{class n extends Dr{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??H(Zt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ry(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+br(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+br(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+br(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(L(ny),L(ND,8))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),PD=(()=>{class n extends Dr{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=ry(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+br(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+br(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(L(ny),L(ND,8))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),bs=(()=>{class n{constructor(t){this._subject=new at,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=KF(DD(TD(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+br(r))}normalize(t){return n.stripTrailingSlash(WF(this._basePath,TD(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+br(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+br(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=br}static{this.joinWithSlash=ry}static{this.stripTrailingSlash=DD}static{this.\u0275fac=function(r){return new(r||n)(L(Dr))}}static{this.\u0275prov=G({token:n,factory:()=>GF(),providedIn:"root"})}}return n})();function GF(){return new bs(L(Dr))}function WF(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function TD(n){return n.replace(/\/index.html$/,"")}function KF(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function kD(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Jm=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},In=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Jm(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),SD(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);SD(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(oe(Cs),oe(Ud),oe(Zm))}}static{this.\u0275dir=$t({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function SD(n,e){n.context.$implicit=e.item}var Jt=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Xm,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){AD("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){AD("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(oe(Cs),oe(Ud))}}static{this.\u0275dir=$t({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),Xm=class{constructor(){this.$implicit=null,this.ngIf=null}};function AD(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Bt(e)}'.`)}var OD=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=wt({type:n})}static{this.\u0275inj=vt({})}}return n})(),oy="browser",QF="server";function YF(n){return n===oy}function ro(n){return n===QF}var FD=(()=>{class n{static{this.\u0275prov=G({token:n,providedIn:"root",factory:()=>YF(H(Yt))?new ey(H(Zt),window):new ty})}}return n})(),ey=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=ZF(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function ZF(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var ty=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Xd=class{};var cy=class extends Jd{constructor(){super(...arguments),this.supportsDOMEvents=!0}},uy=class n extends cy{static makeCurrent(){MD(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=XF();return t==null?null:eV(t)}resetBaseElement(){Cc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return kD(document.cookie,e)}},Cc=null;function XF(){return Cc=Cc||document.querySelector("base"),Cc?Cc.getAttribute("href"):null}function eV(n){return new URL(n,document.baseURI).pathname}var ly=class{addToWindow(e){Nn.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new ee(5103,!1);return o},Nn.getAllAngularTestabilities=()=>e.getAllTestabilities(),Nn.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=Nn.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};Nn.frameworkStabilizers||(Nn.frameworkStabilizers=[]),Nn.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?Jn().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},tV=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),dy=new Q(""),BD=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new ee(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(L(dy),L(Ee))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),eh=class{constructor(e){this._doc=e}},sy="ng-app-id",UD=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ro(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${sy}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(sy),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(sy,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(L(Zt),L(Od),L(xm,8),L(Yt))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),ay={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},fy=/%COMP%/g,$D="%COMP%",nV=`_nghost-${$D}`,rV=`_ngcontent-${$D}`,iV=!0,oV=new Q("",{providedIn:"root",factory:()=>iV});function sV(n){return rV.replace(fy,n)}function aV(n){return nV.replace(fy,n)}function HD(n,e){return e.map(t=>t.replace(fy,n))}var VD=(()=>{class n{constructor(t,r,i,o,s,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=ro(a),this.defaultRenderer=new bc(t,s,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Wn.ShadowDom&&(r=pe(O({},r),{encapsulation:Wn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof th?i.applyToHost(t):i instanceof Dc&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case Wn.Emulated:o=new th(c,l,r,this.appId,h,s,a,p);break;case Wn.ShadowDom:return new hy(c,l,t,r,s,a,this.nonce,p);default:o=new Dc(c,l,r,h,s,a,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(L(BD),L(UD),L(Od),L(oV),L(Zt),L(Yt),L(Ee),L(xm))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),bc=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(ay[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(LD(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(LD(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ee(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=ay[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=ay[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(_r.DashCase|_r.Important)?e.style.setProperty(t,r,i&_r.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&_r.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Jn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function LD(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var hy=class extends bc{constructor(e,t,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=HD(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Dc=class extends bc{constructor(e,t,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?HD(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},th=class extends Dc{constructor(e,t,r,i,o,s,a,c){let l=i+"-"+r.id;super(e,t,r,o,s,a,c,l),this.contentAttr=sV(l),this.hostAttr=aV(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},cV=(()=>{class n extends eh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(L(Zt))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),jD=["alt","control","meta","shift"],uV={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},lV={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},dV=(()=>{class n extends eh{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Jn().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),jD.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=uV[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),jD.forEach(s=>{if(s!==i){let a=lV[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(L(Zt))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})();function hV(){uy.makeCurrent()}function fV(){return new vr}function pV(){return wb(document),document}var gV=[{provide:Yt,useValue:oy},{provide:Am,useValue:hV,multi:!0},{provide:Zt,useFactory:pV,deps:[]}],qD=Qm(ID,"browser",gV),mV=new Q(""),yV=[{provide:Ec,useClass:ly,deps:[]},{provide:zm,useClass:Kd,deps:[Ee,Qd,Ec]},{provide:Kd,useClass:Kd,deps:[Ee,Qd,Ec]}],vV=[{provide:Ad,useValue:"root"},{provide:vr,useFactory:fV,deps:[]},{provide:dy,useClass:cV,multi:!0,deps:[Zt,Ee,Yt]},{provide:dy,useClass:dV,multi:!0,deps:[Zt]},VD,UD,BD,{provide:ms,useExisting:VD},{provide:Xd,useClass:tV,deps:[]},[]],zD=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Od,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(L(mV,12))}}static{this.\u0275mod=wt({type:n})}static{this.\u0275inj=vt({providers:[...vV,...yV],imports:[OD,CD]})}}return n})();var GD=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(L(Zt))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var tT=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(oe(Xi),oe(ni))}}static{this.\u0275dir=$t({type:n})}}return n})(),_V=(()=>{class n extends tT{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=yc(n)))(i||n)}})()}static{this.\u0275dir=$t({type:n,features:[ii]})}}return n})(),nT=new Q("");var wV={provide:nT,useExisting:_s(()=>Nt),multi:!0};function EV(){let n=Jn()?Jn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var IV=new Q(""),Nt=(()=>{class n extends tT{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!EV())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(oe(Xi),oe(ni),oe(IV,8))}}static{this.\u0275dir=$t({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&ge("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[Gd([wV]),ii]})}}return n})();var rT=new Q(""),iT=new Q("");function oT(n){return n!=null}function sT(n){return eo(n)?De(n):n}function aT(n){let e={};return n.forEach(t=>{e=t!=null?O(O({},e),t):e}),Object.keys(e).length===0?null:e}function cT(n,e){return e.map(t=>t(n))}function CV(n){return!n.validate}function uT(n){return n.map(e=>CV(e)?e:t=>e.validate(t))}function bV(n){if(!n)return null;let e=n.filter(oT);return e.length==0?null:function(t){return aT(cT(t,e))}}function gy(n){return n!=null?bV(uT(n)):null}function DV(n){if(!n)return null;let e=n.filter(oT);return e.length==0?null:function(t){let r=cT(t,e).map(sT);return tg(r).pipe(Z(aT))}}function my(n){return n!=null?DV(uT(n)):null}function KD(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function TV(n){return n._rawValidators}function SV(n){return n._rawAsyncValidators}function py(n){return n?Array.isArray(n)?n:[n]:[]}function rh(n,e){return Array.isArray(n)?n.includes(e):n===e}function QD(n,e){let t=py(e);return py(n).forEach(i=>{rh(t,i)||t.push(i)}),t}function YD(n,e){return py(e).filter(t=>!rh(n,t))}var ih=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=gy(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=my(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Ss=class extends ih{get formDirective(){return null}get path(){return null}},Rc=class extends ih{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},oh=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},AV={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},gG=pe(O({},AV),{"[class.ng-submitted]":"isSubmitted"}),Xt=(()=>{class n extends oh{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(oe(Rc,2))}}static{this.\u0275dir=$t({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&zd("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[ii]})}}return n})(),en=(()=>{class n extends oh{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(oe(Ss,10))}}static{this.\u0275dir=$t({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&zd("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[ii]})}}return n})();var Tc="VALID",nh="INVALID",Ds="PENDING",Sc="DISABLED",As=class{},sh=class extends As{constructor(e,t){super(),this.value=e,this.source=t}},xc=class extends As{constructor(e,t){super(),this.pristine=e,this.source=t}},Mc=class extends As{constructor(e,t){super(),this.touched=e,this.source=t}},Ts=class extends As{constructor(e,t){super(),this.status=e,this.source=t}};function lT(n){return(uh(n)?n.validators:n)||null}function xV(n){return Array.isArray(n)?gy(n):n||null}function dT(n,e){return(uh(e)?e.asyncValidators:n)||null}function MV(n){return Array.isArray(n)?my(n):n||null}function uh(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function RV(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new ee(1e3,"");if(!r[t])throw new ee(1001,"")}function NV(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new ee(1002,"")})}var ah=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Ic(()=>this.statusReactive()),this.statusReactive=wc(void 0),this._pristine=Ic(()=>this.pristineReactive()),this.pristineReactive=wc(!0),this._touched=Ic(()=>this.touchedReactive()),this.touchedReactive=wc(!1),this._events=new qe,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Cr(this.statusReactive)}set status(e){Cr(()=>this.statusReactive.set(e))}get valid(){return this.status===Tc}get invalid(){return this.status===nh}get pending(){return this.status==Ds}get disabled(){return this.status===Sc}get enabled(){return this.status!==Sc}get pristine(){return Cr(this.pristineReactive)}set pristine(e){Cr(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Cr(this.touchedReactive)}set touched(e){Cr(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(QD(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(QD(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(YD(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(YD(e,this._rawAsyncValidators))}hasValidator(e){return rh(this._rawValidators,e)}hasAsyncValidator(e){return rh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(pe(O({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Mc(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Mc(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(pe(O({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new xc(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new xc(!0,r))}markAsPending(e={}){this.status=Ds;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ts(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(pe(O({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Sc,this.errors=null,this._forEachChild(i=>{i.disable(pe(O({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new sh(this.value,r)),this._events.next(new Ts(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(pe(O({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Tc,this._forEachChild(r=>{r.enable(pe(O({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(pe(O({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Tc||this.status===Ds)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new sh(this.value,t)),this._events.next(new Ts(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(pe(O({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Sc:Tc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Ds,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=sT(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Ts(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new at,this.statusChanges=new at}_calculateStatus(){return this._allControlsDisabled()?Sc:this.errors?nh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ds)?Ds:this._anyControlsHaveStatus(nh)?nh:Tc}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new xc(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Mc(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){uh(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=xV(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=MV(this._rawAsyncValidators)}},ch=class extends ah{constructor(e,t,r){super(lT(t),dT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){NV(this,!0,e),Object.keys(e).forEach(r=>{RV(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var yy=new Q("CallSetDisabledState",{providedIn:"root",factory:()=>vy}),vy="always";function PV(n,e){return[...e.path,n]}function hT(n,e,t=vy){fT(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),OV(n,e),VV(n,e),FV(n,e),kV(n,e)}function ZD(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function kV(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function fT(n,e){let t=TV(n);e.validator!==null?n.setValidators(KD(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=SV(n);e.asyncValidator!==null?n.setAsyncValidators(KD(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();ZD(e._rawValidators,i),ZD(e._rawAsyncValidators,i)}function OV(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&pT(n,e)})}function FV(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&pT(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function pT(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function VV(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function LV(n,e){n==null,fT(n,e)}function jV(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function BV(n){return Object.getPrototypeOf(n.constructor)===_V}function UV(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function $V(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Nt?t=o:BV(o)?r=o:i=o}),i||r||t||null}var HV={provide:Ss,useExisting:_s(()=>qt)},Ac=Promise.resolve(),qt=(()=>{class n extends Ss{get submitted(){return Cr(this.submittedReactive)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=Ic(()=>this.submittedReactive()),this.submittedReactive=wc(!1),this._directives=new Set,this.ngSubmit=new at,this.form=new ch({},gy(t),my(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Ac.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),hT(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Ac.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Ac.then(()=>{let r=this._findContainer(t.path),i=new ch({});LV(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Ac.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Ac.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),UV(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(oe(rT,10),oe(iT,10),oe(yy,8))}}static{this.\u0275dir=$t({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&ge("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Gd([HV]),ii]})}}return n})();function JD(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function XD(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var qV=class extends ah{constructor(e=null,t,r){super(lT(t),dT(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),uh(t)&&(t.nonNullable||t.initialValueIsDefault)&&(XD(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){JD(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){JD(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){XD(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var zV={provide:Rc,useExisting:_s(()=>zt)},eT=Promise.resolve(),zt=(()=>{class n extends Rc{constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new qV,this._registered=!1,this.name="",this.update=new at,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=$V(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),jV(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){hT(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){eT.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&no(r);eT.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?PV(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(oe(Ss,9),oe(rT,10),oe(iT,10),oe(nT,10),oe(to,8),oe(yy,8))}}static{this.\u0275dir=$t({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Gd([zV]),ii,Zi]})}}return n})(),tn=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=$t({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();var GV=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=wt({type:n})}static{this.\u0275inj=vt({})}}return n})();var gT=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:yy,useValue:t.callSetDisabledState??vy}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=wt({type:n})}static{this.\u0275inj=vt({imports:[GV]})}}return n})();var WV="firebase",KV="10.14.1";$r(WV,KV,"app");var Nc=new wr("ANGULARFIRE2_VERSION");var QV=(n,e)=>{let t=e?[e]:k0(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},oo=class{constructor(){return QV(YV)}},YV="app-check";function _y(){}var lh=class{zone;delegate;constructor(e,t=Jp){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},wy=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",_y,{},_y,_y)),t.pipe(pt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},dh=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new lh(Zone.current)),this.insideAngular=t.run(()=>new lh(Zone.current,tc)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(L(Ee))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ZV(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function nn(n){return JV(ZV())(n)}function JV(n){return function(t){return t=t.lift(new wy(n.ngZone)),t.pipe(xn(n.outsideAngular),gn(n.insideAngular))}}var XV="firebase",eL="10.14.1";an.registerVersion(XV,eL,"app-compat");var tL=["ngOnDestroy"],vT=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(tL.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>t.run(()=>l)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,l)=>s.then(h=>{let p=h?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,p),p})})})});var hh=class{constructor(e){return e}},xs=new Q("angularfire2.app.options"),Ms=new Q("angularfire2.app.name");function Pc(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=an.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>an.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;nL("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new hh(s)}var nL=(n,...e)=>{Ym()&&typeof console<"u"&&console[n](...e)},rL={provide:hh,useFactory:Pc,deps:[xs,Ee,[new ws,Ms]]},_T=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:xs,useValue:t},{provide:Ms,useValue:r}]}}constructor(t){an.registerVersion("angularfire",Nc.full,"core"),an.registerVersion("angularfire",Nc.full,"app-compat"),an.registerVersion("angular",pD.full,t.toString())}static \u0275fac=function(r){return new(r||n)(L(Yt))};static \u0275mod=wt({type:n});static \u0275inj=vt({providers:[rL]})}return n})();function fh(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return iL(i,s)||(yT("error",`${e} was already initialized on the ${t} Firebase App with different settings.${oL?" You may need to reload as Firebase is not HMR aware.":""}`),yT("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function iL(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var oL=typeof module<"u"&&!!module.hot,yT=(n,...e)=>{Ym()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var wT={production:!1,firebase:{apiKey:"AIzaSyCCNhbr8JDWZDLCzfWTgoMx9WVv42EfbqY",authDomain:"josue-mycv.firebaseapp.com",projectId:"josue-mycv",storageBucket:"josue-mycv.firebasestorage.app",messagingSenderId:"592889568746",appId:"1:592889568746:web:da01af268b0ce6263e6693"}};var le="primary",Wc=Symbol("RouteTitle"),Dy=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Fs(n){return new Dy(n)}function sL(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function aL(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Xn(n[t],e[t]))return!1;return!0}function Xn(n,e){let t=n?Ty(n):void 0,r=e?Ty(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!RT(n[i],e[i]))return!1;return!0}function Ty(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function RT(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function NT(n){return n.length>0?n[n.length-1]:null}function ui(n){return eg(n)?n:eo(n)?De(Promise.resolve(n)):re(n)}var cL={exact:kT,subset:OT},PT={exact:uL,subset:lL,ignored:()=>!0};function ET(n,e,t){return cL[t.paths](n.root,e.root,t.matrixParams)&&PT[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function uL(n,e){return Xn(n,e)}function kT(n,e,t){if(!ao(n.segments,e.segments)||!mh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!kT(n.children[r],e.children[r],t))return!1;return!0}function lL(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>RT(n[t],e[t]))}function OT(n,e,t){return FT(n,e,e.segments,t)}function FT(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!ao(i,t)||e.hasChildren()||!mh(i,t,r))}else if(n.segments.length===t.length){if(!ao(n.segments,t)||!mh(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!OT(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!ao(n.segments,i)||!mh(n.segments,i,r)||!n.children[le]?!1:FT(n.children[le],e,o,r)}}function mh(n,e,t){return e.every((r,i)=>PT[t](n[i].parameters,r.parameters))}var Sr=class{constructor(e=new Pe([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Fs(this.queryParams),this._queryParamMap}toString(){return fL.serialize(this)}},Pe=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return yh(this)}},so=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Fs(this.parameters),this._parameterMap}toString(){return LT(this)}};function dL(n,e){return ao(n,e)&&n.every((t,r)=>Xn(t.parameters,e[r].parameters))}function ao(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function hL(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===le&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==le&&(t=t.concat(e(i,r)))}),t}var Kc=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>new Vs,providedIn:"root"})}}return n})(),Vs=class{parse(e){let t=new Ay(e);return new Sr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${kc(e.root,!0)}`,r=mL(e.queryParams),i=typeof e.fragment=="string"?`#${pL(e.fragment)}`:"";return`${t}${r}${i}`}},fL=new Vs;function yh(n){return n.segments.map(e=>LT(e)).join("/")}function kc(n,e){if(!n.hasChildren())return yh(n);if(e){let t=n.children[le]?kc(n.children[le],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==le&&r.push(`${i}:${kc(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=hL(n,(r,i)=>i===le?[kc(n.children[le],!1)]:[`${i}:${kc(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[le]!=null?`${yh(n)}/${t[0]}`:`${yh(n)}/(${t.join("//")})`}}function VT(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ph(n){return VT(n).replace(/%3B/gi,";")}function pL(n){return encodeURI(n)}function Sy(n){return VT(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function vh(n){return decodeURIComponent(n)}function IT(n){return vh(n.replace(/\+/g,"%20"))}function LT(n){return`${Sy(n.path)}${gL(n.parameters)}`}function gL(n){return Object.entries(n).map(([e,t])=>`;${Sy(e)}=${Sy(t)}`).join("")}function mL(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${ph(t)}=${ph(i)}`).join("&"):`${ph(t)}=${ph(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var yL=/^[^\/()?;#]+/;function Ey(n){let e=n.match(yL);return e?e[0]:""}var vL=/^[^\/()?;=#]+/;function _L(n){let e=n.match(vL);return e?e[0]:""}var wL=/^[^=?&#]+/;function EL(n){let e=n.match(wL);return e?e[0]:""}var IL=/^[^&#]+/;function CL(n){let e=n.match(IL);return e?e[0]:""}var Ay=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Pe([],{}):new Pe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[le]=new Pe(e,t)),r}parseSegment(){let e=Ey(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ee(4009,!1);return this.capture(e),new so(vh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=_L(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Ey(this.remaining);i&&(r=i,this.capture(r))}e[vh(t)]=vh(r)}parseQueryParam(e){let t=EL(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=CL(this.remaining);s&&(r=s,this.capture(r))}let i=IT(t),o=IT(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Ey(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new ee(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=le);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[le]:new Pe([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ee(4011,!1)}};function jT(n){return n.segments.length>0?new Pe([],{[le]:n}):n}function BT(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=BT(i);if(r===le&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Pe(n.segments,e);return bL(t)}function bL(n){if(n.numberOfChildren===1&&n.children[le]){let e=n.children[le];return new Pe(n.segments.concat(e.segments),e.children)}return n}function co(n){return n instanceof Sr}function DL(n,e,t=null,r=null){let i=UT(n);return $T(i,e,t,r)}function UT(n){let e;function t(o){let s={};for(let c of o.children){let l=t(c);s[c.outlet]=l}let a=new Pe(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=jT(r);return e??i}function $T(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Iy(i,i,i,t,r);let o=TL(e);if(o.toRoot())return Iy(i,i,new Pe([],{}),t,r);let s=SL(o,i,n),a=s.processChildren?Vc(s.segmentGroup,s.index,o.commands):qT(s.segmentGroup,s.index,o.commands);return Iy(i,s.segmentGroup,a,t,r)}function _h(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Bc(n){return typeof n=="object"&&n!=null&&n.outlets}function Iy(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=HT(n,e,t);let a=jT(BT(s));return new Sr(a,o,i)}function HT(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=HT(o,e,t)}),new Pe(n.segments,r)}var wh=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&_h(r[0]))throw new ee(4003,!1);let i=r.find(Bc);if(i&&i!==NT(r))throw new ee(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function TL(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new wh(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new wh(t,e,r)}var Ps=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function SL(n,e,t){if(n.isAbsolute)return new Ps(e,!0,0);if(!t)return new Ps(e,!1,NaN);if(t.parent===null)return new Ps(t,!0,0);let r=_h(n.commands[0])?0:1,i=t.segments.length-1+r;return AL(t,i,n.numberOfDoubleDots)}function AL(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new ee(4005,!1);i=r.segments.length}return new Ps(r,!1,i-o)}function xL(n){return Bc(n[0])?n[0].outlets:{[le]:n}}function qT(n,e,t){if(n??=new Pe([],{}),n.segments.length===0&&n.hasChildren())return Vc(n,e,t);let r=ML(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Pe(n.segments.slice(0,r.pathIndex),{});return o.children[le]=new Pe(n.segments.slice(r.pathIndex),n.children),Vc(o,0,i)}else return r.match&&i.length===0?new Pe(n.segments,{}):r.match&&!n.hasChildren()?xy(n,e,t):r.match?Vc(n,0,i):xy(n,e,t)}function Vc(n,e,t){if(t.length===0)return new Pe(n.segments,{});{let r=xL(t),i={};if(Object.keys(r).some(o=>o!==le)&&n.children[le]&&n.numberOfChildren===1&&n.children[le].segments.length===0){let o=Vc(n.children[le],e,t);return new Pe(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=qT(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Pe(n.segments,i)}}function ML(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Bc(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!bT(c,l,s))return o;r+=2}else{if(!bT(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function xy(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Bc(o)){let c=RL(o.outlets);return new Pe(r,c)}if(i===0&&_h(t[0])){let c=n.segments[e];r.push(new so(c.path,CT(t[0]))),i++;continue}let s=Bc(o)?o.outlets[le]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&_h(a)?(r.push(new so(s,CT(a))),i+=2):(r.push(new so(s,{})),i++)}return new Pe(r,{})}function RL(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=xy(new Pe([],{}),0,r))}),e}function CT(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function bT(n,e,t){return n==t.path&&Xn(e,t.parameters)}var Lc="imperative",Et=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Et||{}),Cn=class{constructor(e,t){this.id=e,this.url=t}},Ls=class extends Cn{constructor(e,t,r="imperative",i=null){super(e,t),this.type=Et.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},er=class extends Cn{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=Et.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},hn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(hn||{}),Eh=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Eh||{}),Tr=class extends Cn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Et.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ai=class extends Cn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Et.NavigationSkipped}},Uc=class extends Cn{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=Et.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ih=class extends Cn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Et.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},My=class extends Cn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Et.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ry=class extends Cn{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=Et.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Ny=class extends Cn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Et.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Py=class extends Cn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Et.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ky=class{constructor(e){this.route=e,this.type=Et.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Oy=class{constructor(e){this.route=e,this.type=Et.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Fy=class{constructor(e){this.snapshot=e,this.type=Et.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Vy=class{constructor(e){this.snapshot=e,this.type=Et.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ly=class{constructor(e){this.snapshot=e,this.type=Et.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},jy=class{constructor(e){this.snapshot=e,this.type=Et.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ch=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=Et.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},$c=class{},js=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function NL(n,e){return n.providers&&!n._injector&&(n._injector=$d(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Fn(n){return n.outlet||le}function PL(n,e){let t=n.filter(r=>Fn(r)===e);return t.push(...n.filter(r=>Fn(r)!==e)),t}function Qc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var By=class{get injector(){return Qc(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Yc(this.rootInjector),this.attachRef=null}},Yc=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new By(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(L(cn))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),bh=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Uy(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Uy(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=$y(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return $y(e,this._root).map(t=>t.value)}};function Uy(n,e){if(n===e.value)return e;for(let t of e.children){let r=Uy(n,t);if(r)return r}return null}function $y(n,e){if(n===e.value)return[e];for(let t of e.children){let r=$y(n,t);if(r.length)return r.unshift(e),r}return[]}var dn=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Ns(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Dh=class extends bh{constructor(e,t){super(e),this.snapshot=t,Zy(this,e)}toString(){return this.snapshot.toString()}};function zT(n){let e=kL(n),t=new Ct([new so("",{})]),r=new Ct({}),i=new Ct({}),o=new Ct({}),s=new Ct(""),a=new uo(t,r,o,s,i,le,n,e.root);return a.snapshot=e.root,new Dh(new dn(a,[]),e)}function kL(n){let e={},t={},r={},i="",o=new ks([],e,r,i,t,le,n,null,{});return new Sh("",new dn(o,[]))}var uo=class{constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Z(l=>l[Wc]))??re(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Z(e=>Fs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Z(e=>Fs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Th(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:O(O({},e.params),n.params),data:O(O({},e.data),n.data),resolve:O(O(O(O({},n.data),e.data),i?.data),n._resolvedData)}:r={params:O({},n.params),data:O({},n.data),resolve:O(O({},n.data),n._resolvedData??{})},i&&WT(i)&&(r.resolve[Wc]=i.title),r}var ks=class{get title(){return this.data?.[Wc]}constructor(e,t,r,i,o,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Fs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Fs(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Sh=class extends bh{constructor(e,t){super(t),this.url=e,Zy(this,t)}toString(){return GT(this._root)}};function Zy(n,e){e.value._routerState=n,e.children.forEach(t=>Zy(n,t))}function GT(n){let e=n.children.length>0?` { ${n.children.map(GT).join(", ")} } `:"";return`${n.value}${e}`}function Cy(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Xn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Xn(e.params,t.params)||n.paramsSubject.next(t.params),aL(e.url,t.url)||n.urlSubject.next(t.url),Xn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Hy(n,e){let t=Xn(n.params,e.params)&&dL(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Hy(n.parent,e.parent))}function WT(n){return typeof n.title=="string"||n.title===null}var Jy=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=le,this.activateEvents=new at,this.deactivateEvents=new at,this.attachEvents=new at,this.detachEvents=new at,this.parentContexts=H(Yc),this.location=H(Cs),this.changeDetector=H(to),this.inputBinder=H(Nh,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ee(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ee(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ee(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new ee(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new qy(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=$t({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Zi]})}}return n})(),qy=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===uo?this.route:e===Yc?this.childContexts:this.parent.get(e,t)}},Nh=new Q(""),DT=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=nc([r.queryParams,r.params,r.data]).pipe(Xe(([o,s,a],c)=>(a=O(O(O({},o),s),a),c===0?re(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=bD(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})();function OL(n,e,t){let r=Hc(n,e._root,t?t._root:void 0);return new Dh(r,e)}function Hc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=FL(n,e,t);return new dn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Hc(n,a)),s}}let r=VL(e.value),i=e.children.map(o=>Hc(n,o));return new dn(r,i)}}function FL(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Hc(n,r,i);return Hc(n,r)})}function VL(n){return new uo(new Ct(n.url),new Ct(n.params),new Ct(n.queryParams),new Ct(n.fragment),new Ct(n.data),n.outlet,n.component,n)}var qc=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},KT="ngNavigationCancelingError";function Ah(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=co(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=QT(!1,hn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function QT(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[KT]=!0,t.cancellationCode=e,t}function LL(n){return YT(n)&&co(n.url)}function YT(n){return!!n&&n[KT]}var jL=(n,e,t,r)=>Z(i=>(new zy(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),zy=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Cy(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Ns(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ns(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ns(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Ns(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new jy(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Vy(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Cy(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Cy(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},xh=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Os=class{constructor(e,t){this.component=e,this.route=t}};function BL(n,e,t){let r=n._root,i=e?e._root:null;return Oc(r,i,t,[r.value])}function UL(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Us(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!sC(n)?n:e.get(n):r}function Oc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ns(e);return n.children.forEach(s=>{$L(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>jc(a,t.getContext(s),i)),i}function $L(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=HL(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new xh(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Oc(n,e,a?a.children:null,r,i):Oc(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Os(a.outlet.component,s))}else s&&jc(e,a,i),i.canActivateChecks.push(new xh(r)),o.component?Oc(n,null,a?a.children:null,r,i):Oc(n,null,t,r,i);return i}function HL(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!ao(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ao(n.url,e.url)||!Xn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Hy(n,e)||!Xn(n.queryParams,e.queryParams);case"paramsChange":default:return!Hy(n,e)}}function jc(n,e,t){let r=Ns(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?jc(s,e.children.getContext(o),t):jc(s,null,t):jc(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Os(e.outlet.component,i)):t.canDeactivateChecks.push(new Os(null,i)):t.canDeactivateChecks.push(new Os(null,i))}function Zc(n){return typeof n=="function"}function qL(n){return typeof n=="boolean"}function zL(n){return n&&Zc(n.canLoad)}function GL(n){return n&&Zc(n.canActivate)}function WL(n){return n&&Zc(n.canActivateChild)}function KL(n){return n&&Zc(n.canDeactivate)}function QL(n){return n&&Zc(n.canMatch)}function ZT(n){return n instanceof mr||n?.name==="EmptyError"}var gh=Symbol("INITIAL_VALUE");function Bs(){return Xe(n=>nc(n.map(e=>e.pipe(yr(1),Ui(gh)))).pipe(Z(e=>{for(let t of e)if(t!==!0){if(t===gh)return gh;if(t===!1||YL(t))return t}return!0}),bt(e=>e!==gh),yr(1)))}function YL(n){return co(n)||n instanceof qc}function ZL(n,e){return st(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?re(pe(O({},t),{guardsResult:!0})):JL(s,r,i,n).pipe(st(a=>a&&qL(a)?XL(r,o,n,e):re(a)),Z(a=>pe(O({},t),{guardsResult:a})))})}function JL(n,e,t,r){return De(n).pipe(st(i=>i2(i.component,i.route,t,e,r)),mn(i=>i!==!0,!0))}function XL(n,e,t,r){return De(e).pipe(ji(i=>Jo(t2(i.route.parent,r),e2(i.route,r),r2(n,i.path,t),n2(n,i.route,t))),mn(i=>i!==!0,!0))}function e2(n,e){return n!==null&&e&&e(new Ly(n)),re(!0)}function t2(n,e){return n!==null&&e&&e(new Fy(n)),re(!0)}function n2(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return re(!0);let i=r.map(o=>Ll(()=>{let s=Qc(e)??t,a=Us(o,s),c=GL(a)?a.canActivate(e,n):Zn(s,()=>a(e,n));return ui(c).pipe(mn())}));return re(i).pipe(Bs())}function r2(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>UL(s)).filter(s=>s!==null).map(s=>Ll(()=>{let a=s.guards.map(c=>{let l=Qc(s.node)??t,h=Us(c,l),p=WL(h)?h.canActivateChild(r,n):Zn(l,()=>h(r,n));return ui(p).pipe(mn())});return re(a).pipe(Bs())}));return re(o).pipe(Bs())}function i2(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return re(!0);let s=o.map(a=>{let c=Qc(e)??i,l=Us(a,c),h=KL(l)?l.canDeactivate(n,e,t,r):Zn(c,()=>l(n,e,t,r));return ui(h).pipe(mn())});return re(s).pipe(Bs())}function o2(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return re(!0);let o=i.map(s=>{let a=Us(s,n),c=zL(a)?a.canLoad(e,t):Zn(n,()=>a(e,t));return ui(c)});return re(o).pipe(Bs(),JT(r))}function JT(n){return Kp(pt(e=>{if(typeof e!="boolean")throw Ah(n,e)}),Z(e=>e===!0))}function s2(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return re(!0);let o=i.map(s=>{let a=Us(s,n),c=QL(a)?a.canMatch(e,t):Zn(n,()=>a(e,t));return ui(c)});return re(o).pipe(Bs(),JT(r))}var zc=class{constructor(e){this.segmentGroup=e||null}},Gc=class extends Error{constructor(e){super(),this.urlTree=e}};function Rs(n){return Zo(new zc(n))}function a2(n){return Zo(new ee(4e3,!1))}function c2(n){return Zo(QT(!1,hn.GuardRejected))}var Gy=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return re(r);if(i.numberOfChildren>1||!i.children[le])return a2(`${e.redirectTo}`);i=i.children[le]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:h,url:p,outlet:m,params:y,data:D,title:A}=i,x=Zn(o,()=>a({params:y,data:D,queryParams:c,fragment:l,routeConfig:h,url:p,outlet:m,title:A}));if(x instanceof Sr)throw new Gc(x);t=x}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Gc(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Sr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new Pe(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new ee(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Wy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function u2(n,e,t,r,i){let o=XT(n,e,t);return o.matched?(r=NL(e,r),s2(r,e,t,i).pipe(Z(s=>s===!0?o:O({},Wy)))):re(o)}function XT(n,e,t){if(e.path==="**")return l2(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?O({},Wy):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||sL)(t,n,e);if(!i)return O({},Wy);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?O(O({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function l2(n){return{matched:!0,parameters:n.length>0?NT(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function TT(n,e,t,r){return t.length>0&&f2(n,t,r)?{segmentGroup:new Pe(e,h2(r,new Pe(t,n.children))),slicedSegments:[]}:t.length===0&&p2(n,t,r)?{segmentGroup:new Pe(n.segments,d2(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Pe(n.segments,n.children),slicedSegments:t}}function d2(n,e,t,r){let i={};for(let o of t)if(Ph(n,e,o)&&!r[Fn(o)]){let s=new Pe([],{});i[Fn(o)]=s}return O(O({},r),i)}function h2(n,e){let t={};t[le]=e;for(let r of n)if(r.path===""&&Fn(r)!==le){let i=new Pe([],{});t[Fn(r)]=i}return t}function f2(n,e,t){return t.some(r=>Ph(n,e,r)&&Fn(r)!==le)}function p2(n,e,t){return t.some(r=>Ph(n,e,r))}function Ph(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function g2(n,e,t){return e.length===0&&!n.children[t]}var Ky=class{};function m2(n,e,t,r,i,o,s="emptyOnly"){return new Qy(n,e,t,r,i,s,o).recognize()}var y2=31,Qy=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Gy(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ee(4002,`'${e.segmentGroup}'`)}recognize(){let e=TT(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Z(({children:t,rootSnapshot:r})=>{let i=new dn(r,t),o=new Sh("",i),s=DL(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new ks([],Object.freeze({}),Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),le,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,le,t).pipe(Z(r=>({children:r,rootSnapshot:t})),qr(r=>{if(r instanceof Gc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof zc?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(Z(s=>s instanceof dn?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return De(o).pipe(ji(s=>{let a=r.children[s],c=PL(t,s);return this.processSegmentGroup(e,c,a,s,i)}),Bi((s,a)=>(s.push(...a),s)),zr(null),og(),st(s=>{if(s===null)return Rs(r);let a=eS(s);return v2(a),re(a)}))}processSegment(e,t,r,i,o,s,a){return De(t).pipe(ji(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(qr(l=>{if(l instanceof zc)return re(null);throw l}))),mn(c=>!!c),qr(c=>{if(ZT(c))return g2(r,i,o)?re(new Ky):Rs(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return Fn(r)!==s&&(s===le||!Ph(i,o,r))?Rs(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):Rs(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=XT(t,i,o);if(!c)return Rs(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>y2&&(this.allowRedirects=!1));let y=new ks(o,l,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,ST(i),Fn(i),i.component??i._loadedComponent??null,i,AT(i)),D=Th(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(D.params),y.data=Object.freeze(D.data);let A=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e);return this.applyRedirects.lineralizeSegments(i,A).pipe(st(x=>this.processSegment(e,r,t,x.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=u2(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Xe(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Xe(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=c,D=new ks(m,p,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,ST(r),Fn(r),r.component??r._loadedComponent??null,r,AT(r)),A=Th(D,s,this.paramsInheritanceStrategy);D.params=Object.freeze(A.params),D.data=Object.freeze(A.data);let{segmentGroup:x,slicedSegments:U}=TT(t,m,y,l);if(U.length===0&&x.hasChildren())return this.processChildren(h,l,x,D).pipe(Z(j=>new dn(D,j)));if(l.length===0&&U.length===0)return re(new dn(D,[]));let W=Fn(r)===o;return this.processSegment(h,l,x,U,W?le:o,!0,D).pipe(Z(j=>new dn(D,j instanceof dn?[j]:[])))}))):Rs(t)))}getChildConfig(e,t,r){return t.children?re({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?re({routes:t._loadedRoutes,injector:t._loadedInjector}):o2(e,t,r,this.urlSerializer).pipe(st(i=>i?this.configLoader.loadChildren(e,t).pipe(pt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):c2(t))):re({routes:[],injector:e})}};function v2(n){n.sort((e,t)=>e.value.outlet===le?-1:t.value.outlet===le?1:e.value.outlet.localeCompare(t.value.outlet))}function _2(n){let e=n.value.routeConfig;return e&&e.path===""}function eS(n){let e=[],t=new Set;for(let r of n){if(!_2(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=eS(r.children);e.push(new dn(r.value,i))}return e.filter(r=>!t.has(r))}function ST(n){return n.data||{}}function AT(n){return n.resolve||{}}function w2(n,e,t,r,i,o){return st(s=>m2(n,e,t,r,s.extractedUrl,i,o).pipe(Z(({state:a,tree:c})=>pe(O({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function E2(n,e){return st(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return re(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of tS(c))s.add(l);let a=0;return De(s).pipe(ji(c=>o.has(c)?I2(c,r,n,e):(c.data=Th(c,c.parent,n).resolve,re(void 0))),pt(()=>a++),Xo(1),st(c=>a===s.size?re(t):Lt))})}function tS(n){let e=n.children.map(t=>tS(t)).flat();return[n,...e]}function I2(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!WT(i)&&(o[Wc]=i.title),C2(o,n,e,r).pipe(Z(s=>(n._resolvedData=s,n.data=Th(n,n.parent,t).resolve,null)))}function C2(n,e,t,r){let i=Ty(n);if(i.length===0)return re({});let o={};return De(i).pipe(st(s=>b2(n[s],e,t,r).pipe(mn(),pt(a=>{if(a instanceof qc)throw Ah(new Vs,a);o[s]=a}))),Xo(1),rg(o),qr(s=>ZT(s)?Lt:Zo(s)))}function b2(n,e,t,r){let i=Qc(e)??r,o=Us(n,i),s=o.resolve?o.resolve(e,t):Zn(i,()=>o(e,t));return ui(s)}function by(n){return Xe(e=>{let t=n(e);return t?De(t).pipe(Z(()=>e)):re(e)})}var nS=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===le);return r}getResolvedTitleForRoute(t){return t.data[Wc]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>H(D2),providedIn:"root"})}}return n})(),D2=(()=>{class n extends nS{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(L(GD))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Jc=new Q("",{providedIn:"root",factory:()=>({})}),T2=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=_t({type:n,selectors:[["ng-component"]],standalone:!0,features:[fD],decls:1,vars:0,template:function(r,i){r&1&&On(0,"router-outlet")},dependencies:[Jy],encapsulation:2})}}return n})();function Xy(n){let e=n.children&&n.children.map(Xy),t=e?pe(O({},n),{children:e}):O({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==le&&(t.component=T2),t}var Mh=new Q(""),ev=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=H(Zd)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return re(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=ui(t.loadComponent()).pipe(Z(rS),pt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),rc(()=>{this.componentLoaders.delete(t)})),i=new Wo(r,()=>new qe).pipe(Go());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return re({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=S2(r,this.compiler,t,this.onLoadEndListener).pipe(rc(()=>{this.childrenLoaders.delete(r)})),s=new Wo(o,()=>new qe).pipe(Go());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function S2(n,e,t,r){return ui(n.loadChildren()).pipe(Z(rS),st(i=>i instanceof hc||Array.isArray(i)?re(i):De(e.compileModuleAsync(i))),Z(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Mh,[],{optional:!0,self:!0}).flat()),{routes:s.map(Xy),injector:o}}))}function A2(n){return n&&typeof n=="object"&&"default"in n}function rS(n){return A2(n)?n.default:n}var tv=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>H(x2),providedIn:"root"})}}return n})(),x2=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),iS=new Q(""),oS=new Q("");function M2(n,e,t){let r=n.get(oS),i=n.get(Zt);return n.get(Ee).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),R2(n))),{onViewTransitionCreated:c}=r;return c&&Zn(n,()=>c({transition:a,from:e,to:t})),s})}function R2(n){return new Promise(e=>{Hm({read:()=>setTimeout(e)},{injector:n})})}var N2=new Q(""),nv=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new qe,this.transitionAbortSubject=new qe,this.configLoader=H(ev),this.environmentInjector=H(cn),this.urlSerializer=H(Kc),this.rootContexts=H(Yc),this.location=H(bs),this.inputBindingEnabled=H(Nh,{optional:!0})!==null,this.titleStrategy=H(nS),this.options=H(Jc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=H(tv),this.createViewTransition=H(iS,{optional:!0}),this.navigationErrorHandler=H(N2,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>re(void 0),this.rootComponentType=null;let t=i=>this.events.next(new ky(i)),r=i=>this.events.next(new Oy(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(pe(O(O({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new Ct({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Lc,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(bt(o=>o.id!==0),Z(o=>pe(O({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Xe(o=>{let s=!1,a=!1;return re(o).pipe(Xe(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",hn.SupersededByNewNavigation),Lt;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?pe(O({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new ai(c.id,this.urlSerializer.serialize(c.rawUrl),p,Eh.IgnoredSameUrlNavigation)),c.resolve(!1),Lt}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return re(c).pipe(Xe(p=>{let m=this.transitions?.getValue();return this.events.next(new Ls(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?Lt:Promise.resolve(p)}),w2(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),pt(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=pe(O({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new Ih(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:p,extractedUrl:m,source:y,restoredState:D,extras:A}=c,x=new Ls(p,this.urlSerializer.serialize(m),y,D);this.events.next(x);let U=zT(this.rootComponentType).snapshot;return this.currentTransition=o=pe(O({},c),{targetSnapshot:U,urlAfterRedirects:m,extras:pe(O({},A),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,re(o)}else{let p="";return this.events.next(new ai(c.id,this.urlSerializer.serialize(c.extractedUrl),p,Eh.IgnoredByUrlHandlingStrategy)),c.resolve(!1),Lt}}),pt(c=>{let l=new My(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),Z(c=>(this.currentTransition=o=pe(O({},c),{guards:BL(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),ZL(this.environmentInjector,c=>this.events.next(c)),pt(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Ah(this.urlSerializer,c.guardsResult);let l=new Ry(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),bt(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",hn.GuardRejected),!1)),by(c=>{if(c.guards.canActivateChecks.length)return re(c).pipe(pt(l=>{let h=new Ny(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Xe(l=>{let h=!1;return re(l).pipe(E2(this.paramsInheritanceStrategy,this.environmentInjector),pt({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",hn.NoDataFromResolver)}}))}),pt(l=>{let h=new Py(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),by(c=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(pt(m=>{h.component=m}),Z(()=>{})));for(let m of h.children)p.push(...l(m));return p};return nc(l(c.targetSnapshot.root)).pipe(zr(null),yr(1))}),by(()=>this.afterPreactivation()),Xe(()=>{let{currentSnapshot:c,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return h?De(h).pipe(Z(()=>o)):re(o)}),Z(c=>{let l=OL(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=pe(O({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),pt(()=>{this.events.next(new $c)}),jL(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),yr(1),pt({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new er(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),ag(this.transitionAbortSubject.pipe(pt(c=>{throw c}))),rc(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",hn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),qr(c=>{if(a=!0,YT(c))this.events.next(new Tr(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),LL(c)?this.events.next(new js(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{let l=new Uc(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{let h=Zn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof qc){let{message:p,cancellationCode:m}=Ah(this.urlSerializer,h);this.events.next(new Tr(o.id,this.urlSerializer.serialize(o.extractedUrl),p,m)),this.events.next(new js(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=t.errorHandler(c);o.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return Lt}))}))}cancelNavigationTransition(t,r,i){let o=new Tr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function P2(n){return n!==Lc}var k2=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>H(O2),providedIn:"root"})}}return n})(),Yy=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},O2=(()=>{class n extends Yy{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=yc(n)))(i||n)}})()}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),sS=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:()=>H(F2),providedIn:"root"})}}return n})(),F2=(()=>{class n extends sS{constructor(){super(...arguments),this.location=H(bs),this.urlSerializer=H(Kc),this.options=H(Jc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=H(tv),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Sr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=zT(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Ls)this.stateMemento=this.createStateMemento();else if(t instanceof ai)this.rawUrlTree=r.initialUrl;else if(t instanceof Ih){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof $c?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Tr&&(t.code===hn.GuardRejected||t.code===hn.NoDataFromResolver)?this.restoreHistory(r):t instanceof Uc?this.restoreHistory(r,!0):t instanceof er&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof Sr?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=O(O({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=O(O({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=yc(n)))(i||n)}})()}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Fc=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Fc||{});function aS(n,e){n.events.pipe(bt(t=>t instanceof er||t instanceof Tr||t instanceof Uc||t instanceof ai),Z(t=>t instanceof er||t instanceof ai?Fc.COMPLETE:(t instanceof Tr?t.code===hn.Redirect||t.code===hn.SupersededByNewNavigation:!1)?Fc.REDIRECTING:Fc.FAILED),bt(t=>t!==Fc.REDIRECTING),yr(1)).subscribe(()=>{e()})}function V2(n){throw n}var L2={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},j2={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ci=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=H(Wd),this.stateManager=H(sS),this.options=H(Jc,{optional:!0})||{},this.pendingTasks=H(Is),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=H(nv),this.urlSerializer=H(Kc),this.location=H(bs),this.urlHandlingStrategy=H(tv),this._events=new qe,this.errorHandler=this.options.errorHandler||V2,this.navigated=!1,this.routeReuseStrategy=H(k2),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=H(Mh,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!H(Nh,{optional:!0}),this.eventsSubscription=new Je,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Tr&&r.code!==hn.Redirect&&r.code!==hn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof er)this.navigated=!0;else if(r instanceof js){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=O({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||P2(i.source)},s);this.scheduleNavigation(a,Lc,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}U2(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Lc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=O({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Xy),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=O(O({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=UT(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return $T(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=co(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Lc,null,r)}navigate(t,r={skipLocationChange:!1}){return B2(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=O({},L2):r===!1?i=O({},j2):i=r,co(t))return ET(this.currentUrlTree,t,i);let o=this.parseUrl(t);return ET(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,c=m});let h=this.pendingTasks.add();return aS(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function B2(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new ee(4008,!1)}function U2(n){return!(n instanceof $c)&&!(n instanceof js)}var cS=(()=>{class n{constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.onChanges=new qe,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof er&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(co(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:Cb(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:co(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(oe(ci),oe(uo),bm("tabindex"),oe(Xi),oe(ni),oe(Dr))}}static{this.\u0275dir=$t({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&ge("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Hd("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",no],skipLocationChange:[2,"skipLocationChange","skipLocationChange",no],replaceUrl:[2,"replaceUrl","replaceUrl",no],routerLink:"routerLink"},standalone:!0,features:[$m,Zi]})}}return n})();var Rh=class{};var $2=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(bt(t=>t instanceof er),ji(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=$d(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return De(i).pipe(Hr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=re(null);let o=i.pipe(st(s=>s===null?re(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return De([o,s]).pipe(Hr())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(L(ci),L(Zd),L(cn),L(Rh),L(ev))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),uS=new Q(""),H2=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ls?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof er?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof ai&&t.code===Eh.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ch&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Ch(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){Fb()}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})();function q2(n){return n.routerState.root}function Xc(n,e){return{\u0275kind:n,\u0275providers:e}}function z2(){let n=H(un);return e=>{let t=n.get(oi);if(e!==t.components[0])return;let r=n.get(ci),i=n.get(lS);n.get(rv)===1&&r.initialNavigation(),n.get(dS,null,fe.Optional)?.setUpPreloading(),n.get(uS,null,fe.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var lS=new Q("",{factory:()=>new qe}),rv=new Q("",{providedIn:"root",factory:()=>1});function G2(){return Xc(2,[{provide:rv,useValue:0},{provide:Yd,multi:!0,deps:[un],useFactory:e=>{let t=e.get(RD,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(ci),o=e.get(lS);aS(i,()=>{r(!0)}),e.get(nv).afterPreactivation=()=>(r(!0),o.closed?re(void 0):o),i.initialNavigation()}))}}])}function W2(){return Xc(3,[{provide:Yd,multi:!0,useFactory:()=>{let e=H(ci);return()=>{e.setUpLocationChangeListener()}}},{provide:rv,useValue:2}])}var dS=new Q("");function K2(n){return Xc(0,[{provide:dS,useExisting:$2},{provide:Rh,useExisting:n}])}function Q2(){return Xc(8,[DT,{provide:Nh,useExisting:DT}])}function Y2(n){let e=[{provide:iS,useValue:M2},{provide:oS,useValue:O({skipNextTransition:!!n?.skipInitialTransition},n)}];return Xc(9,e)}var xT=new Q("ROUTER_FORROOT_GUARD"),Z2=[bs,{provide:Kc,useClass:Vs},ci,Yc,{provide:uo,useFactory:q2,deps:[ci]},ev,[]],iv=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Z2,[],{provide:Mh,multi:!0,useValue:t},{provide:xT,useFactory:tj,deps:[[ci,new ws,new lm]]},{provide:Jc,useValue:r||{}},r?.useHash?X2():ej(),J2(),r?.preloadingStrategy?K2(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?nj(r):[],r?.bindToComponentInputs?Q2().\u0275providers:[],r?.enableViewTransitions?Y2().\u0275providers:[],rj()]}}static forChild(t){return{ngModule:n,providers:[{provide:Mh,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(L(xT,8))}}static{this.\u0275mod=wt({type:n})}static{this.\u0275inj=vt({})}}return n})();function J2(){return{provide:uS,useFactory:()=>{let n=H(FD),e=H(Ee),t=H(Jc),r=H(nv),i=H(Kc);return t.scrollOffset&&n.setOffset(t.scrollOffset),new H2(i,r,n,e,t)}}}function X2(){return{provide:Dr,useClass:PD}}function ej(){return{provide:Dr,useClass:iy}}function tj(n){return"guarded"}function nj(n){return[n.initialNavigation==="disabled"?W2().\u0275providers:[],n.initialNavigation==="enabledBlocking"?G2().\u0275providers:[]]}var MT=new Q("");function rj(){return[{provide:MT,useFactory:z2},{provide:Wm,multi:!0,useExisting:MT}]}var eu=class{constructor(){this.startDate="",this.endDate="",this.location="",this.position="",this.company="",this.accomplishments=""}};var aj=new Map,cj={activated:!1,tokenObservers:[]},uj={initialized:!1,enabled:!1};function Vn(n){return aj.get(n)||Object.assign({},cj)}function mS(){return uj}var lj="https://content-firebaseappcheck.googleapis.com/v1";var dj="exchangeDebugToken",hS={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},d8=24*60*60*1e3;var sv=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return N(this,null,function*(){this.stop();try{this.pending=new Pp,this.pending.promise.catch(t=>{}),yield hj(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Pp,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function hj(n){return new Promise(e=>{setTimeout(e,n)})}var fj={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},li=new N0("appCheck","AppCheck",fj);function yS(n){if(!Vn(n).activated)throw li.create("use-before-activation",{appName:n.name})}function vS(r,i){return N(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(y){throw li.create("fetch-network-error",{originalErrorMessage:y?.message})}if(c.status!==200)throw li.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(y){throw li.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw li.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function _S(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${lj}/projects/${t}/apps/${r}:${dj}?key=${i}`,body:{debug_token:e}}}var pj="firebase-app-check-database",gj=1,av="firebase-app-check-store";var kh=null;function mj(){return kh||(kh=new Promise((n,e)=>{try{let t=indexedDB.open(pj,gj);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(li.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(av,{keyPath:"compositeKey"})}}}catch(t){e(li.create("storage-open",{originalErrorMessage:t?.message}))}}),kh)}function yj(n,e){return vj(_j(n),e)}function vj(n,e){return N(this,null,function*(){let r=(yield mj()).transaction(av,"readwrite"),o=r.objectStore(av).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(li.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function _j(n){return`${n.options.appId}-${n.name}`}var cv=new cl("@firebase/app-check");function ov(n,e){return al()?yj(n,e).catch(t=>{cv.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function wS(){return mS().enabled}function ES(){return N(this,null,function*(){let n=mS();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var wj={error:"UNKNOWN_ERROR"};function Ej(n){return x0.encodeString(JSON.stringify(n),!1)}function uv(n,e=!1){return N(this,null,function*(){let t=n.app;yS(t);let r=Vn(t),i=r.token,o;if(i&&!tu(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(tu(c)?i=c:yield ov(t,void 0))}if(!e&&i&&tu(i))return{token:i.token};let s=!1;if(wS()){r.exchangeTokenPromise||(r.exchangeTokenPromise=vS(_S(t,yield ES()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let c=yield r.exchangeTokenPromise;return yield ov(t,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield Vn(t).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?cv.warn(c.message):cv.error(c),o=c}let a;return i?o?tu(i)?a={token:i.token,internalError:o}:a=pS(o):(a={token:i.token},r.token=i,yield ov(t,i)):a=pS(o),s&&Dj(t,a),a})}function Ij(n){return N(this,null,function*(){let e=n.app;yS(e);let{provider:t}=Vn(e);if(wS()){let r=yield ES(),{token:i}=yield vS(_S(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function Cj(n,e,t,r){let{app:i}=n,o=Vn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&tu(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),fS(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>fS(n))}function IS(n,e){let t=Vn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function fS(n){let{app:e}=n,t=Vn(e),r=t.tokenRefresher;r||(r=bj(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function bj(n){let{app:e}=n;return new sv(()=>N(this,null,function*(){let t=Vn(e),r;if(t.token?r=yield uv(n,!0):r=yield uv(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=Vn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},hS.RETRIAL_MIN_WAIT,hS.RETRIAL_MAX_WAIT)}function Dj(n,e){let t=Vn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function tu(n){return n.expireTimeMillis-Date.now()>0}function pS(n){return{token:Ej(wj),error:n}}var lv=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Vn(this.app);for(let t of e)IS(this.app,t.next);return Promise.resolve()}};function Tj(n,e){return new lv(n,e)}function Sj(n){return{getToken:e=>uv(n,e),getLimitedUseToken:()=>Ij(n),addTokenListener:e=>Cj(n,"INTERNAL",e),removeTokenListener:e=>IS(n.app,e)}}var Aj="@firebase/app-check",xj="0.8.8";var Mj="app-check",gS="app-check-internal";function Rj(){Qa(new Oi(Mj,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return Tj(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(gS).initialize()})),Qa(new Oi(gS,n=>{let e=n.getProvider("app-check").getImmediate();return Sj(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),$r(Aj,xj)}Rj();var Nj=["localhost","0.0.0.0","127.0.0.1"],C8=typeof window<"u"&&Nj.includes(window.location.hostname);var dv=new Q("angularfire2.auth.use-emulator"),hv=new Q("angularfire2.auth.settings"),fv=new Q("angularfire2.auth.tenant-id"),pv=new Q("angularfire2.auth.langugage-code"),gv=new Q("angularfire2.auth.use-device-language"),mv=new Q("angularfire.auth.persistence"),yv=(n,e,t,r,i,o,s,a)=>fh(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[l,h]of Object.entries(s))c.settings[l]=h;return a&&c.setPersistence(a),c},[t,r,i,o,s,a]),bS=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,c,l,h,p,m,y){let D=new qe,A=re(void 0).pipe(gn(s.outsideAngular),Xe(()=>o.runOutsideAngular(()=>import("./chunk-DT56ZVVI.js"))),Z(()=>Pc(t,o,r)),Z(x=>yv(x,o,a,l,h,p,c,m)),Bl({bufferSize:1,refCount:!1}));if(ro(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=re(null);else{A.pipe(mn()).subscribe();let x=A.pipe(Xe(j=>j.getRedirectResult().then(X=>X,()=>null)),nn,Bl({bufferSize:1,refCount:!1})),U=A.pipe(Xe(j=>new me(X=>({unsubscribe:o.runOutsideAngular(()=>j.onAuthStateChanged(ie=>X.next(ie),ie=>X.error(ie),()=>X.complete()))})))),W=A.pipe(Xe(j=>new me(X=>({unsubscribe:o.runOutsideAngular(()=>j.onIdTokenChanged(ie=>X.next(ie),ie=>X.error(ie),()=>X.complete()))}))));this.authState=x.pipe(Ul(U),xn(s.outsideAngular),gn(s.insideAngular)),this.user=x.pipe(Ul(W),xn(s.outsideAngular),gn(s.insideAngular)),this.idToken=this.user.pipe(Xe(j=>j?De(j.getIdToken()):re(null))),this.idTokenResult=this.user.pipe(Xe(j=>j?De(j.getIdTokenResult()):re(null))),this.credential=ng(x,D,this.authState.pipe(bt(j=>!j))).pipe(Z(j=>j?.user?j:null),xn(s.outsideAngular),gn(s.insideAngular))}return vT(this,A,o,{spy:{apply:(x,U,W)=>{(x.startsWith("signIn")||x.startsWith("createUser"))&&W.then(j=>D.next(j))}}})}static \u0275fac=function(r){return new(r||n)(L(xs),L(Ms,8),L(Yt),L(Ee),L(dh),L(dv,8),L(hv,8),L(fv,8),L(pv,8),L(gv,8),L(mv,8),L(oo,8))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var DS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},TS={};var di,vv;(function(){var n;function e(E,v){function w(){}w.prototype=v.prototype,E.D=v.prototype,E.prototype=new w,E.prototype.constructor=E,E.C=function(I,C,T){for(var _=Array(arguments.length-2),dr=2;dr<arguments.length;dr++)_[dr-2]=arguments[dr];return v.prototype[C].apply(I,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,v,w){w||(w=0);var I=Array(16);if(typeof v=="string")for(var C=0;16>C;++C)I[C]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(C=0;16>C;++C)I[C]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=E.g[0],w=E.g[1],C=E.g[2];var T=E.g[3],_=v+(T^w&(C^T))+I[0]+3614090360&4294967295;v=w+(_<<7&4294967295|_>>>25),_=T+(C^v&(w^C))+I[1]+3905402710&4294967295,T=v+(_<<12&4294967295|_>>>20),_=C+(w^T&(v^w))+I[2]+606105819&4294967295,C=T+(_<<17&4294967295|_>>>15),_=w+(v^C&(T^v))+I[3]+3250441966&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(T^w&(C^T))+I[4]+4118548399&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(C^v&(w^C))+I[5]+1200080426&4294967295,T=v+(_<<12&4294967295|_>>>20),_=C+(w^T&(v^w))+I[6]+2821735955&4294967295,C=T+(_<<17&4294967295|_>>>15),_=w+(v^C&(T^v))+I[7]+4249261313&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(T^w&(C^T))+I[8]+1770035416&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(C^v&(w^C))+I[9]+2336552879&4294967295,T=v+(_<<12&4294967295|_>>>20),_=C+(w^T&(v^w))+I[10]+4294925233&4294967295,C=T+(_<<17&4294967295|_>>>15),_=w+(v^C&(T^v))+I[11]+2304563134&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(T^w&(C^T))+I[12]+1804603682&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(C^v&(w^C))+I[13]+4254626195&4294967295,T=v+(_<<12&4294967295|_>>>20),_=C+(w^T&(v^w))+I[14]+2792965006&4294967295,C=T+(_<<17&4294967295|_>>>15),_=w+(v^C&(T^v))+I[15]+1236535329&4294967295,w=C+(_<<22&4294967295|_>>>10),_=v+(C^T&(w^C))+I[1]+4129170786&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^C&(v^w))+I[6]+3225465664&4294967295,T=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(T^v))+I[11]+643717713&4294967295,C=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(C^T))+I[0]+3921069994&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(C^T&(w^C))+I[5]+3593408605&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^C&(v^w))+I[10]+38016083&4294967295,T=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(T^v))+I[15]+3634488961&4294967295,C=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(C^T))+I[4]+3889429448&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(C^T&(w^C))+I[9]+568446438&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^C&(v^w))+I[14]+3275163606&4294967295,T=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(T^v))+I[3]+4107603335&4294967295,C=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(C^T))+I[8]+1163531501&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(C^T&(w^C))+I[13]+2850285829&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^C&(v^w))+I[2]+4243563512&4294967295,T=v+(_<<9&4294967295|_>>>23),_=C+(v^w&(T^v))+I[7]+1735328473&4294967295,C=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(C^T))+I[12]+2368359562&4294967295,w=C+(_<<20&4294967295|_>>>12),_=v+(w^C^T)+I[5]+4294588738&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^C)+I[8]+2272392833&4294967295,T=v+(_<<11&4294967295|_>>>21),_=C+(T^v^w)+I[11]+1839030562&4294967295,C=T+(_<<16&4294967295|_>>>16),_=w+(C^T^v)+I[14]+4259657740&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(w^C^T)+I[1]+2763975236&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^C)+I[4]+1272893353&4294967295,T=v+(_<<11&4294967295|_>>>21),_=C+(T^v^w)+I[7]+4139469664&4294967295,C=T+(_<<16&4294967295|_>>>16),_=w+(C^T^v)+I[10]+3200236656&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(w^C^T)+I[13]+681279174&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^C)+I[0]+3936430074&4294967295,T=v+(_<<11&4294967295|_>>>21),_=C+(T^v^w)+I[3]+3572445317&4294967295,C=T+(_<<16&4294967295|_>>>16),_=w+(C^T^v)+I[6]+76029189&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(w^C^T)+I[9]+3654602809&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^C)+I[12]+3873151461&4294967295,T=v+(_<<11&4294967295|_>>>21),_=C+(T^v^w)+I[15]+530742520&4294967295,C=T+(_<<16&4294967295|_>>>16),_=w+(C^T^v)+I[2]+3299628645&4294967295,w=C+(_<<23&4294967295|_>>>9),_=v+(C^(w|~T))+I[0]+4096336452&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~C))+I[7]+1126891415&4294967295,T=v+(_<<10&4294967295|_>>>22),_=C+(v^(T|~w))+I[14]+2878612391&4294967295,C=T+(_<<15&4294967295|_>>>17),_=w+(T^(C|~v))+I[5]+4237533241&4294967295,w=C+(_<<21&4294967295|_>>>11),_=v+(C^(w|~T))+I[12]+1700485571&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~C))+I[3]+2399980690&4294967295,T=v+(_<<10&4294967295|_>>>22),_=C+(v^(T|~w))+I[10]+4293915773&4294967295,C=T+(_<<15&4294967295|_>>>17),_=w+(T^(C|~v))+I[1]+2240044497&4294967295,w=C+(_<<21&4294967295|_>>>11),_=v+(C^(w|~T))+I[8]+1873313359&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~C))+I[15]+4264355552&4294967295,T=v+(_<<10&4294967295|_>>>22),_=C+(v^(T|~w))+I[6]+2734768916&4294967295,C=T+(_<<15&4294967295|_>>>17),_=w+(T^(C|~v))+I[13]+1309151649&4294967295,w=C+(_<<21&4294967295|_>>>11),_=v+(C^(w|~T))+I[4]+4149444226&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~C))+I[11]+3174756917&4294967295,T=v+(_<<10&4294967295|_>>>22),_=C+(v^(T|~w))+I[2]+718787259&4294967295,C=T+(_<<15&4294967295|_>>>17),_=w+(T^(C|~v))+I[9]+3951481745&4294967295,E.g[0]=E.g[0]+v&4294967295,E.g[1]=E.g[1]+(C+(_<<21&4294967295|_>>>11))&4294967295,E.g[2]=E.g[2]+C&4294967295,E.g[3]=E.g[3]+T&4294967295}r.prototype.u=function(E,v){v===void 0&&(v=E.length);for(var w=v-this.blockSize,I=this.B,C=this.h,T=0;T<v;){if(C==0)for(;T<=w;)i(this,E,T),T+=this.blockSize;if(typeof E=="string"){for(;T<v;)if(I[C++]=E.charCodeAt(T++),C==this.blockSize){i(this,I),C=0;break}}else for(;T<v;)if(I[C++]=E[T++],C==this.blockSize){i(this,I),C=0;break}}this.h=C,this.o+=v},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var v=1;v<E.length-8;++v)E[v]=0;var w=8*this.o;for(v=E.length-8;v<E.length;++v)E[v]=w&255,w/=256;for(this.u(E),E=Array(16),v=w=0;4>v;++v)for(var I=0;32>I;I+=8)E[w++]=this.g[v]>>>I&255;return E};function o(E,v){var w=a;return Object.prototype.hasOwnProperty.call(w,E)?w[E]:w[E]=v(E)}function s(E,v){this.h=v;for(var w=[],I=!0,C=E.length-1;0<=C;C--){var T=E[C]|0;I&&T==v||(w[C]=T,I=!1)}this.g=w}var a={};function c(E){return-128<=E&&128>E?o(E,function(v){return new s([v|0],0>v?-1:0)}):new s([E|0],0>E?-1:0)}function l(E){if(isNaN(E)||!isFinite(E))return p;if(0>E)return x(l(-E));for(var v=[],w=1,I=0;E>=w;I++)v[I]=E/w|0,w*=4294967296;return new s(v,0)}function h(E,v){if(E.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(E.charAt(0)=="-")return x(h(E.substring(1),v));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(v,8)),I=p,C=0;C<E.length;C+=8){var T=Math.min(8,E.length-C),_=parseInt(E.substring(C,C+T),v);8>T?(T=l(Math.pow(v,T)),I=I.j(T).add(l(_))):(I=I.j(w),I=I.add(l(_)))}return I}var p=c(0),m=c(1),y=c(16777216);n=s.prototype,n.m=function(){if(A(this))return-x(this).m();for(var E=0,v=1,w=0;w<this.g.length;w++){var I=this.i(w);E+=(0<=I?I:4294967296+I)*v,v*=4294967296}return E},n.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(D(this))return"0";if(A(this))return"-"+x(this).toString(E);for(var v=l(Math.pow(E,6)),w=this,I="";;){var C=X(w,v).g;w=U(w,C.j(v));var T=((0<w.g.length?w.g[0]:w.h)>>>0).toString(E);if(w=C,D(w))return T+I;for(;6>T.length;)T="0"+T;I=T+I}},n.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function D(E){if(E.h!=0)return!1;for(var v=0;v<E.g.length;v++)if(E.g[v]!=0)return!1;return!0}function A(E){return E.h==-1}n.l=function(E){return E=U(this,E),A(E)?-1:D(E)?0:1};function x(E){for(var v=E.g.length,w=[],I=0;I<v;I++)w[I]=~E.g[I];return new s(w,~E.h).add(m)}n.abs=function(){return A(this)?x(this):this},n.add=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0,C=0;C<=v;C++){var T=I+(this.i(C)&65535)+(E.i(C)&65535),_=(T>>>16)+(this.i(C)>>>16)+(E.i(C)>>>16);I=_>>>16,T&=65535,_&=65535,w[C]=_<<16|T}return new s(w,w[w.length-1]&-2147483648?-1:0)};function U(E,v){return E.add(x(v))}n.j=function(E){if(D(this)||D(E))return p;if(A(this))return A(E)?x(this).j(x(E)):x(x(this).j(E));if(A(E))return x(this.j(x(E)));if(0>this.l(y)&&0>E.l(y))return l(this.m()*E.m());for(var v=this.g.length+E.g.length,w=[],I=0;I<2*v;I++)w[I]=0;for(I=0;I<this.g.length;I++)for(var C=0;C<E.g.length;C++){var T=this.i(I)>>>16,_=this.i(I)&65535,dr=E.i(C)>>>16,xa=E.i(C)&65535;w[2*I+2*C]+=_*xa,W(w,2*I+2*C),w[2*I+2*C+1]+=T*xa,W(w,2*I+2*C+1),w[2*I+2*C+1]+=_*dr,W(w,2*I+2*C+1),w[2*I+2*C+2]+=T*dr,W(w,2*I+2*C+2)}for(I=0;I<v;I++)w[I]=w[2*I+1]<<16|w[2*I];for(I=v;I<2*v;I++)w[I]=0;return new s(w,0)};function W(E,v){for(;(E[v]&65535)!=E[v];)E[v+1]+=E[v]>>>16,E[v]&=65535,v++}function j(E,v){this.g=E,this.h=v}function X(E,v){if(D(v))throw Error("division by zero");if(D(E))return new j(p,p);if(A(E))return v=X(x(E),v),new j(x(v.g),x(v.h));if(A(v))return v=X(E,x(v)),new j(x(v.g),v.h);if(30<E.g.length){if(A(E)||A(v))throw Error("slowDivide_ only works with positive integers.");for(var w=m,I=v;0>=I.l(E);)w=ie(w),I=ie(I);var C=te(w,1),T=te(I,1);for(I=te(I,2),w=te(w,2);!D(I);){var _=T.add(I);0>=_.l(E)&&(C=C.add(w),T=_),I=te(I,1),w=te(w,1)}return v=U(E,C.j(v)),new j(C,v)}for(C=p;0<=E.l(v);){for(w=Math.max(1,Math.floor(E.m()/v.m())),I=Math.ceil(Math.log(w)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),T=l(w),_=T.j(v);A(_)||0<_.l(E);)w-=I,T=l(w),_=T.j(v);D(T)&&(T=m),C=C.add(T),E=U(E,_)}return new j(C,E)}n.A=function(E){return X(this,E).h},n.and=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)&E.i(I);return new s(w,this.h&E.h)},n.or=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)|E.i(I);return new s(w,this.h|E.h)},n.xor=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)^E.i(I);return new s(w,this.h^E.h)};function ie(E){for(var v=E.g.length+1,w=[],I=0;I<v;I++)w[I]=E.i(I)<<1|E.i(I-1)>>>31;return new s(w,E.h)}function te(E,v){var w=v>>5;v%=32;for(var I=E.g.length-w,C=[],T=0;T<I;T++)C[T]=0<v?E.i(T+w)>>>v|E.i(T+w+1)<<32-v:E.i(T+w);return new s(C,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,vv=TS.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,di=TS.Integer=s}).apply(typeof DS<"u"?DS:typeof self<"u"?self:typeof window<"u"?window:{});var Oh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ar={};var _v,kj,$s,wv,nu,Fh,Ev,Iv,Cv;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,d,f){return u==Array.prototype||u==Object.prototype||(u[d]=f.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Oh=="object"&&Oh];for(var d=0;d<u.length;++d){var f=u[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(u,d){if(d)e:{var f=r;u=u.split(".");for(var g=0;g<u.length-1;g++){var b=u[g];if(!(b in f))break e;f=f[b]}u=u[u.length-1],g=f[u],d=d(g),d!=g&&d!=null&&e(f,u,{configurable:!0,writable:!0,value:d})}}function o(u,d){u instanceof String&&(u+="");var f=0,g=!1,b={next:function(){if(!g&&f<u.length){var M=f++;return{value:d(M,u[M]),done:!1}}return g=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(u){return u||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function c(u){var d=typeof u;return d=d!="object"?d:u?Array.isArray(u)?"array":d:"null",d=="array"||d=="object"&&typeof u.length=="number"}function l(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function h(u,d,f){return u.call.apply(u.bind,arguments)}function p(u,d,f){if(!u)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,g),u.apply(d,b)}}return function(){return u.apply(d,arguments)}}function m(u,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(u,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),u.apply(this,g)}}function D(u,d){function f(){}f.prototype=d.prototype,u.aa=d.prototype,u.prototype=new f,u.prototype.constructor=u,u.Qb=function(g,b,M){for(var $=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)$[Oe-2]=arguments[Oe];return d.prototype[b].apply(g,$)}}function A(u){let d=u.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=u[g];return f}return[]}function x(u,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(c(g)){let b=u.length||0,M=g.length||0;u.length=b+M;for(let $=0;$<M;$++)u[b+$]=g[$]}else u.push(g)}}class U{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function W(u){return/^[\s\xa0]*$/.test(u)}function j(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function X(u){return X[" "](u),u}X[" "]=function(){};var ie=j().indexOf("Gecko")!=-1&&!(j().toLowerCase().indexOf("webkit")!=-1&&j().indexOf("Edge")==-1)&&!(j().indexOf("Trident")!=-1||j().indexOf("MSIE")!=-1)&&j().indexOf("Edge")==-1;function te(u,d,f){for(let g in u)d.call(f,u[g],g,u)}function E(u,d){for(let f in u)d.call(void 0,u[f],f,u)}function v(u){let d={};for(let f in u)d[f]=u[f];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(u,d){let f,g;for(let b=1;b<arguments.length;b++){g=arguments[b];for(f in g)u[f]=g[f];for(let M=0;M<w.length;M++)f=w[M],Object.prototype.hasOwnProperty.call(g,f)&&(u[f]=g[f])}}function C(u){var d=1;u=u.split(":");let f=[];for(;0<d&&u.length;)f.push(u.shift()),d--;return u.length&&f.push(u.join(":")),f}function T(u){a.setTimeout(()=>{throw u},0)}function _(){var u=ap;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class dr{constructor(){this.h=this.g=null}add(d,f){let g=xa.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var xa=new U(()=>new ER,u=>u.reset());class ER{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Ma,Ra=!1,ap=new dr,DE=()=>{let u=a.Promise.resolve(void 0);Ma=()=>{u.then(IR)}};var IR=()=>{for(var u;u=_();){try{u.h.call(u.g)}catch(f){T(f)}var d=xa;d.j(u),100>d.h&&(d.h++,u.next=d.g,d.g=u)}Ra=!1};function Lr(){this.s=this.s,this.C=this.C}Lr.prototype.s=!1,Lr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Lr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function St(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}St.prototype.h=function(){this.defaultPrevented=!0};var CR=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return u}();function Na(u,d){if(St.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var f=this.type=u.type,g=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget){if(ie){e:{try{X(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else f=="mouseover"?d=u.fromElement:f=="mouseout"&&(d=u.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:bR[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Na.aa.h.call(this)}}D(Na,St);var bR={2:"touch",3:"pen",4:"mouse"};Na.prototype.h=function(){Na.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Pa="closure_listenable_"+(1e6*Math.random()|0),DR=0;function TR(u,d,f,g,b){this.listener=u,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=b,this.key=++DR,this.da=this.fa=!1}function Hu(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function qu(u){this.src=u,this.g={},this.h=0}qu.prototype.add=function(u,d,f,g,b){var M=u.toString();u=this.g[M],u||(u=this.g[M]=[],this.h++);var $=up(u,d,g,b);return-1<$?(d=u[$],f||(d.fa=!1)):(d=new TR(d,this.src,M,!!g,b),d.fa=f,u.push(d)),d};function cp(u,d){var f=d.type;if(f in u.g){var g=u.g[f],b=Array.prototype.indexOf.call(g,d,void 0),M;(M=0<=b)&&Array.prototype.splice.call(g,b,1),M&&(Hu(d),u.g[f].length==0&&(delete u.g[f],u.h--))}}function up(u,d,f,g){for(var b=0;b<u.length;++b){var M=u[b];if(!M.da&&M.listener==d&&M.capture==!!f&&M.ha==g)return b}return-1}var lp="closure_lm_"+(1e6*Math.random()|0),dp={};function TE(u,d,f,g,b){if(g&&g.once)return AE(u,d,f,g,b);if(Array.isArray(d)){for(var M=0;M<d.length;M++)TE(u,d[M],f,g,b);return null}return f=gp(f),u&&u[Pa]?u.K(d,f,l(g)?!!g.capture:!!g,b):SE(u,d,f,!1,g,b)}function SE(u,d,f,g,b,M){if(!d)throw Error("Invalid event type");var $=l(b)?!!b.capture:!!b,Oe=fp(u);if(Oe||(u[lp]=Oe=new qu(u)),f=Oe.add(d,f,g,$,M),f.proxy)return f;if(g=SR(),f.proxy=g,g.src=u,g.listener=f,u.addEventListener)CR||(b=$),b===void 0&&(b=!1),u.addEventListener(d.toString(),g,b);else if(u.attachEvent)u.attachEvent(ME(d.toString()),g);else if(u.addListener&&u.removeListener)u.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function SR(){function u(f){return d.call(u.src,u.listener,f)}let d=AR;return u}function AE(u,d,f,g,b){if(Array.isArray(d)){for(var M=0;M<d.length;M++)AE(u,d[M],f,g,b);return null}return f=gp(f),u&&u[Pa]?u.L(d,f,l(g)?!!g.capture:!!g,b):SE(u,d,f,!0,g,b)}function xE(u,d,f,g,b){if(Array.isArray(d))for(var M=0;M<d.length;M++)xE(u,d[M],f,g,b);else g=l(g)?!!g.capture:!!g,f=gp(f),u&&u[Pa]?(u=u.i,d=String(d).toString(),d in u.g&&(M=u.g[d],f=up(M,f,g,b),-1<f&&(Hu(M[f]),Array.prototype.splice.call(M,f,1),M.length==0&&(delete u.g[d],u.h--)))):u&&(u=fp(u))&&(d=u.g[d.toString()],u=-1,d&&(u=up(d,f,g,b)),(f=-1<u?d[u]:null)&&hp(f))}function hp(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[Pa])cp(d.i,u);else{var f=u.type,g=u.proxy;d.removeEventListener?d.removeEventListener(f,g,u.capture):d.detachEvent?d.detachEvent(ME(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=fp(d))?(cp(f,u),f.h==0&&(f.src=null,d[lp]=null)):Hu(u)}}}function ME(u){return u in dp?dp[u]:dp[u]="on"+u}function AR(u,d){if(u.da)u=!0;else{d=new Na(d,this);var f=u.listener,g=u.ha||u.src;u.fa&&hp(u),u=f.call(g,d)}return u}function fp(u){return u=u[lp],u instanceof qu?u:null}var pp="__closure_events_fn_"+(1e9*Math.random()>>>0);function gp(u){return typeof u=="function"?u:(u[pp]||(u[pp]=function(d){return u.handleEvent(d)}),u[pp])}function At(){Lr.call(this),this.i=new qu(this),this.M=this,this.F=null}D(At,Lr),At.prototype[Pa]=!0,At.prototype.removeEventListener=function(u,d,f,g){xE(this,u,d,f,g)};function Ot(u,d){var f,g=u.F;if(g)for(f=[];g;g=g.F)f.push(g);if(u=u.M,g=d.type||d,typeof d=="string")d=new St(d,u);else if(d instanceof St)d.target=d.target||u;else{var b=d;d=new St(g,u),I(d,b)}if(b=!0,f)for(var M=f.length-1;0<=M;M--){var $=d.g=f[M];b=zu($,g,!0,d)&&b}if($=d.g=u,b=zu($,g,!0,d)&&b,b=zu($,g,!1,d)&&b,f)for(M=0;M<f.length;M++)$=d.g=f[M],b=zu($,g,!1,d)&&b}At.prototype.N=function(){if(At.aa.N.call(this),this.i){var u=this.i,d;for(d in u.g){for(var f=u.g[d],g=0;g<f.length;g++)Hu(f[g]);delete u.g[d],u.h--}}this.F=null},At.prototype.K=function(u,d,f,g){return this.i.add(String(u),d,!1,f,g)},At.prototype.L=function(u,d,f,g){return this.i.add(String(u),d,!0,f,g)};function zu(u,d,f,g){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,M=0;M<d.length;++M){var $=d[M];if($&&!$.da&&$.capture==f){var Oe=$.listener,It=$.ha||$.src;$.fa&&cp(u.i,$),b=Oe.call(It,g)!==!1&&b}}return b&&!g.defaultPrevented}function RE(u,d,f){if(typeof u=="function")f&&(u=m(u,f));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(u,d||0)}function NE(u){u.g=RE(()=>{u.g=null,u.i&&(u.i=!1,NE(u))},u.l);let d=u.h;u.h=null,u.m.apply(null,d)}class xR extends Lr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:NE(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ka(u){Lr.call(this),this.h=u,this.g={}}D(ka,Lr);var PE=[];function kE(u){te(u.g,function(d,f){this.g.hasOwnProperty(f)&&hp(d)},u),u.g={}}ka.prototype.N=function(){ka.aa.N.call(this),kE(this)},ka.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var mp=a.JSON.stringify,MR=a.JSON.parse,RR=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function yp(){}yp.prototype.h=null;function OE(u){return u.h||(u.h=u.i())}function FE(){}var Oa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function vp(){St.call(this,"d")}D(vp,St);function _p(){St.call(this,"c")}D(_p,St);var Ri={},VE=null;function Gu(){return VE=VE||new At}Ri.La="serverreachability";function LE(u){St.call(this,Ri.La,u)}D(LE,St);function Fa(u){let d=Gu();Ot(d,new LE(d))}Ri.STAT_EVENT="statevent";function jE(u,d){St.call(this,Ri.STAT_EVENT,u),this.stat=d}D(jE,St);function Ft(u){let d=Gu();Ot(d,new jE(d,u))}Ri.Ma="timingevent";function BE(u,d){St.call(this,Ri.Ma,u),this.size=d}D(BE,St);function Va(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},d)}function La(){this.g=!0}La.prototype.xa=function(){this.g=!1};function NR(u,d,f,g,b,M){u.info(function(){if(u.g)if(M)for(var $="",Oe=M.split("&"),It=0;It<Oe.length;It++){var xe=Oe[It].split("=");if(1<xe.length){var xt=xe[0];xe=xe[1];var Mt=xt.split("_");$=2<=Mt.length&&Mt[1]=="type"?$+(xt+"="+xe+"&"):$+(xt+"=redacted&")}}else $=null;else $=M;return"XMLHTTP REQ ("+g+") [attempt "+b+"]: "+d+`
`+f+`
`+$})}function PR(u,d,f,g,b,M,$){u.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+b+"]: "+d+`
`+f+`
`+M+" "+$})}function Lo(u,d,f,g){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+OR(u,f)+(g?" "+g:"")})}function kR(u,d){u.info(function(){return"TIMEOUT: "+d})}La.prototype.info=function(){};function OR(u,d){if(!u.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(u=0;u<f.length;u++)if(Array.isArray(f[u])){var g=f[u];if(!(2>g.length)){var b=g[1];if(Array.isArray(b)&&!(1>b.length)){var M=b[0];if(M!="noop"&&M!="stop"&&M!="close")for(var $=1;$<b.length;$++)b[$]=""}}}}return mp(f)}catch{return d}}var Wu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},UE={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},wp;function Ku(){}D(Ku,yp),Ku.prototype.g=function(){return new XMLHttpRequest},Ku.prototype.i=function(){return{}},wp=new Ku;function jr(u,d,f,g){this.j=u,this.i=d,this.l=f,this.R=g||1,this.U=new ka(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new $E}function $E(){this.i=null,this.g="",this.h=!1}var HE={},Ep={};function Ip(u,d,f){u.L=1,u.v=Ju(hr(d)),u.m=f,u.P=!0,qE(u,null)}function qE(u,d){u.F=Date.now(),Qu(u),u.A=hr(u.v);var f=u.A,g=u.R;Array.isArray(g)||(g=[String(g)]),i0(f.i,"t",g),u.C=0,f=u.j.J,u.h=new $E,u.g=I0(u.j,f?d:null,!u.m),0<u.O&&(u.M=new xR(m(u.Y,u,u.g),u.O)),d=u.U,f=u.g,g=u.ca;var b="readystatechange";Array.isArray(b)||(b&&(PE[0]=b.toString()),b=PE);for(var M=0;M<b.length;M++){var $=TE(f,b[M],g||d.handleEvent,!1,d.h||d);if(!$)break;d.g[$.key]=$}d=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,d)):(u.u="GET",u.g.ea(u.A,u.u,null,d)),Fa(),NR(u.i,u.u,u.A,u.l,u.R,u.m)}jr.prototype.ca=function(u){u=u.target;let d=this.M;d&&fr(u)==3?d.j():this.Y(u)},jr.prototype.Y=function(u){try{if(u==this.g)e:{let Mt=fr(this.g);var d=this.g.Ba();let Uo=this.g.Z();if(!(3>Mt)&&(Mt!=3||this.g&&(this.h.h||this.g.oa()||d0(this.g)))){this.J||Mt!=4||d==7||(d==8||0>=Uo?Fa(3):Fa(2)),Cp(this);var f=this.g.Z();this.X=f;t:if(zE(this)){var g=d0(this.g);u="";var b=g.length,M=fr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ni(this),ja(this);var $="";break t}this.h.i=new a.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,u+=this.h.i.decode(g[d],{stream:!(M&&d==b-1)});g.length=0,this.h.g+=u,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=f==200,PR(this.i,this.u,this.A,this.l,this.R,Mt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Oe,It=this.g;if((Oe=It.g?It.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(Oe)){var xe=Oe;break t}}xe=null}if(f=xe)Lo(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bp(this,f);else{this.o=!1,this.s=3,Ft(12),Ni(this),ja(this);break e}}if(this.P){f=!0;let Sn;for(;!this.J&&this.C<$.length;)if(Sn=FR(this,$),Sn==Ep){Mt==4&&(this.s=4,Ft(14),f=!1),Lo(this.i,this.l,null,"[Incomplete Response]");break}else if(Sn==HE){this.s=4,Ft(15),Lo(this.i,this.l,$,"[Invalid Chunk]"),f=!1;break}else Lo(this.i,this.l,Sn,null),bp(this,Sn);if(zE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Mt!=4||$.length!=0||this.h.h||(this.s=1,Ft(16),f=!1),this.o=this.o&&f,!f)Lo(this.i,this.l,$,"[Invalid Chunked Response]"),Ni(this),ja(this);else if(0<$.length&&!this.W){this.W=!0;var xt=this.j;xt.g==this&&xt.ba&&!xt.M&&(xt.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),Mp(xt),xt.M=!0,Ft(11))}}else Lo(this.i,this.l,$,null),bp(this,$);Mt==4&&Ni(this),this.o&&!this.J&&(Mt==4?v0(this.j,this):(this.o=!1,Qu(this)))}else XR(this.g),f==400&&0<$.indexOf("Unknown SID")?(this.s=3,Ft(12)):(this.s=0,Ft(13)),Ni(this),ja(this)}}}catch{}finally{}};function zE(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function FR(u,d){var f=u.C,g=d.indexOf(`
`,f);return g==-1?Ep:(f=Number(d.substring(f,g)),isNaN(f)?HE:(g+=1,g+f>d.length?Ep:(d=d.slice(g,g+f),u.C=g+f,d)))}jr.prototype.cancel=function(){this.J=!0,Ni(this)};function Qu(u){u.S=Date.now()+u.I,GE(u,u.I)}function GE(u,d){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Va(m(u.ba,u),d)}function Cp(u){u.B&&(a.clearTimeout(u.B),u.B=null)}jr.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(kR(this.i,this.A),this.L!=2&&(Fa(),Ft(17)),Ni(this),this.s=2,ja(this)):GE(this,this.S-u)};function ja(u){u.j.G==0||u.J||v0(u.j,u)}function Ni(u){Cp(u);var d=u.M;d&&typeof d.ma=="function"&&d.ma(),u.M=null,kE(u.U),u.g&&(d=u.g,u.g=null,d.abort(),d.ma())}function bp(u,d){try{var f=u.j;if(f.G!=0&&(f.g==u||Dp(f.h,u))){if(!u.K&&Dp(f.h,u)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var b=g;if(b[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<u.F)rl(f),tl(f);else break e;xp(f),Ft(18)}}else f.za=b[1],0<f.za-f.T&&37500>b[2]&&f.F&&f.v==0&&!f.C&&(f.C=Va(m(f.Za,f),6e3));if(1>=QE(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ki(f,11)}else if((u.K||f.g==u)&&rl(f),!W(d))for(b=f.Da.g.parse(d),d=0;d<b.length;d++){let xe=b[d];if(f.T=xe[0],xe=xe[1],f.G==2)if(xe[0]=="c"){f.K=xe[1],f.ia=xe[2];let xt=xe[3];xt!=null&&(f.la=xt,f.j.info("VER="+f.la));let Mt=xe[4];Mt!=null&&(f.Aa=Mt,f.j.info("SVER="+f.Aa));let Uo=xe[5];Uo!=null&&typeof Uo=="number"&&0<Uo&&(g=1.5*Uo,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Sn=u.g;if(Sn){let ol=Sn.g?Sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ol){var M=g.h;M.g||ol.indexOf("spdy")==-1&&ol.indexOf("quic")==-1&&ol.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Tp(M,M.h),M.h=null))}if(g.D){let Rp=Sn.g?Sn.g.getResponseHeader("X-HTTP-Session-Id"):null;Rp&&(g.ya=Rp,Be(g.I,g.D,Rp))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-u.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var $=u;if(g.qa=E0(g,g.J?g.ia:null,g.W),$.K){YE(g.h,$);var Oe=$,It=g.L;It&&(Oe.I=It),Oe.B&&(Cp(Oe),Qu(Oe)),g.g=$}else m0(g);0<f.i.length&&nl(f)}else xe[0]!="stop"&&xe[0]!="close"||ki(f,7);else f.G==3&&(xe[0]=="stop"||xe[0]=="close"?xe[0]=="stop"?ki(f,7):Ap(f):xe[0]!="noop"&&f.l&&f.l.ta(xe),f.v=0)}}Fa(4)}catch{}}var VR=class{constructor(u,d){this.g=u,this.map=d}};function WE(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function KE(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function QE(u){return u.h?1:u.g?u.g.size:0}function Dp(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function Tp(u,d){u.g?u.g.add(d):u.h=d}function YE(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}WE.prototype.cancel=function(){if(this.i=ZE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function ZE(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let d=u.i;for(let f of u.g.values())d=d.concat(f.D);return d}return A(u.i)}function LR(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var d=[],f=u.length,g=0;g<f;g++)d.push(u[g]);return d}d=[],f=0;for(g in u)d[f++]=u[g];return d}function jR(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var d=[];u=u.length;for(var f=0;f<u;f++)d.push(f);return d}d=[],f=0;for(let g in u)d[f++]=g;return d}}}function JE(u,d){if(u.forEach&&typeof u.forEach=="function")u.forEach(d,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,d,void 0);else for(var f=jR(u),g=LR(u),b=g.length,M=0;M<b;M++)d.call(void 0,g[M],f&&f[M],u)}var XE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function BR(u,d){if(u){u=u.split("&");for(var f=0;f<u.length;f++){var g=u[f].indexOf("="),b=null;if(0<=g){var M=u[f].substring(0,g);b=u[f].substring(g+1)}else M=u[f];d(M,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function Pi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Pi){this.h=u.h,Yu(this,u.j),this.o=u.o,this.g=u.g,Zu(this,u.s),this.l=u.l;var d=u.i,f=new $a;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),e0(this,f),this.m=u.m}else u&&(d=String(u).match(XE))?(this.h=!1,Yu(this,d[1]||"",!0),this.o=Ba(d[2]||""),this.g=Ba(d[3]||"",!0),Zu(this,d[4]),this.l=Ba(d[5]||"",!0),e0(this,d[6]||"",!0),this.m=Ba(d[7]||"")):(this.h=!1,this.i=new $a(null,this.h))}Pi.prototype.toString=function(){var u=[],d=this.j;d&&u.push(Ua(d,t0,!0),":");var f=this.g;return(f||d=="file")&&(u.push("//"),(d=this.o)&&u.push(Ua(d,t0,!0),"@"),u.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&u.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&u.push("/"),u.push(Ua(f,f.charAt(0)=="/"?HR:$R,!0))),(f=this.i.toString())&&u.push("?",f),(f=this.m)&&u.push("#",Ua(f,zR)),u.join("")};function hr(u){return new Pi(u)}function Yu(u,d,f){u.j=f?Ba(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function Zu(u,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);u.s=d}else u.s=null}function e0(u,d,f){d instanceof $a?(u.i=d,GR(u.i,u.h)):(f||(d=Ua(d,qR)),u.i=new $a(d,u.h))}function Be(u,d,f){u.i.set(d,f)}function Ju(u){return Be(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ba(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ua(u,d,f){return typeof u=="string"?(u=encodeURI(u).replace(d,UR),f&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function UR(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var t0=/[#\/\?@]/g,$R=/[#\?:]/g,HR=/[#\?]/g,qR=/[#\?@]/g,zR=/#/g;function $a(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function Br(u){u.g||(u.g=new Map,u.h=0,u.i&&BR(u.i,function(d,f){u.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=$a.prototype,n.add=function(u,d){Br(this),this.i=null,u=jo(this,u);var f=this.g.get(u);return f||this.g.set(u,f=[]),f.push(d),this.h+=1,this};function n0(u,d){Br(u),d=jo(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function r0(u,d){return Br(u),d=jo(u,d),u.g.has(d)}n.forEach=function(u,d){Br(this),this.g.forEach(function(f,g){f.forEach(function(b){u.call(d,b,g,this)},this)},this)},n.na=function(){Br(this);let u=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let b=u[g];for(let M=0;M<b.length;M++)f.push(d[g])}return f},n.V=function(u){Br(this);let d=[];if(typeof u=="string")r0(this,u)&&(d=d.concat(this.g.get(jo(this,u))));else{u=Array.from(this.g.values());for(let f=0;f<u.length;f++)d=d.concat(u[f])}return d},n.set=function(u,d){return Br(this),this.i=null,u=jo(this,u),r0(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},n.get=function(u,d){return u?(u=this.V(u),0<u.length?String(u[0]):d):d};function i0(u,d,f){n0(u,d),0<f.length&&(u.i=null,u.g.set(jo(u,d),A(f)),u.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let M=encodeURIComponent(String(g)),$=this.V(g);for(g=0;g<$.length;g++){var b=M;$[g]!==""&&(b+="="+encodeURIComponent(String($[g]))),u.push(b)}}return this.i=u.join("&")};function jo(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function GR(u,d){d&&!u.j&&(Br(u),u.i=null,u.g.forEach(function(f,g){var b=g.toLowerCase();g!=b&&(n0(this,g),i0(this,b,f))},u)),u.j=d}function WR(u,d){let f=new La;if(a.Image){let g=new Image;g.onload=y(Ur,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(Ur,f,"TestLoadImage: error",!1,d,g),g.onabort=y(Ur,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(Ur,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=u}else d(!1)}function KR(u,d){let f=new La,g=new AbortController,b=setTimeout(()=>{g.abort(),Ur(f,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:g.signal}).then(M=>{clearTimeout(b),M.ok?Ur(f,"TestPingServer: ok",!0,d):Ur(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),Ur(f,"TestPingServer: error",!1,d)})}function Ur(u,d,f,g,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),g(f)}catch{}}function QR(){this.g=new RR}function YR(u,d,f){let g=f||"";try{JE(u,function(b,M){let $=b;l(b)&&($=mp(b)),d.push(g+M+"="+encodeURIComponent($))})}catch(b){throw d.push(g+"type="+encodeURIComponent("_badmap")),b}}function Ha(u){this.l=u.Ub||null,this.j=u.eb||!1}D(Ha,yp),Ha.prototype.g=function(){return new Xu(this.l,this.j)},Ha.prototype.i=function(u){return function(){return u}}({});function Xu(u,d){At.call(this),this.D=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Xu,At),n=Xu.prototype,n.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=d,this.readyState=1,za(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(d.body=u),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,qa(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,za(this)),this.g&&(this.readyState=3,za(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;o0(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function o0(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?qa(this):za(this),this.readyState==3&&o0(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,qa(this))},n.Qa=function(u){this.g&&(this.response=u,qa(this))},n.ga=function(){this.g&&qa(this)};function qa(u){u.readyState=4,u.l=null,u.j=null,u.v=null,za(u)}n.setRequestHeader=function(u,d){this.u.append(u,d)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,u.push(f[0]+": "+f[1]),f=d.next();return u.join(`\r
`)};function za(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Xu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function s0(u){let d="";return te(u,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Sp(u,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=s0(f),typeof u=="string"?f!=null&&encodeURIComponent(String(f)):Be(u,d,f))}function Ze(u){At.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(Ze,At);var ZR=/^https?$/i,JR=["POST","PUT"];n=Ze.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():wp.g(),this.v=this.o?OE(this.o):OE(wp),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(M){a0(this,M);return}if(u=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var b in g)f.set(b,g[b]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let M of g.keys())f.set(M,g.get(M));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(M=>M.toLowerCase()=="content-type"),b=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(JR,d,void 0))||g||b||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[M,$]of f)this.g.setRequestHeader(M,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{l0(this),this.u=!0,this.g.send(u),this.u=!1}catch(M){a0(this,M)}};function a0(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.m=5,c0(u),el(u)}function c0(u){u.A||(u.A=!0,Ot(u,"complete"),Ot(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ot(this,"complete"),Ot(this,"abort"),el(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),el(this,!0)),Ze.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?u0(this):this.bb())},n.bb=function(){u0(this)};function u0(u){if(u.h&&typeof s<"u"&&(!u.v[1]||fr(u)!=4||u.Z()!=2)){if(u.u&&fr(u)==4)RE(u.Ea,0,u);else if(Ot(u,"readystatechange"),fr(u)==4){u.h=!1;try{let $=u.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=$===0){var b=String(u.D).match(XE)[1]||null;!b&&a.self&&a.self.location&&(b=a.self.location.protocol.slice(0,-1)),g=!ZR.test(b?b.toLowerCase():"")}f=g}if(f)Ot(u,"complete"),Ot(u,"success");else{u.m=6;try{var M=2<fr(u)?u.g.statusText:""}catch{M=""}u.l=M+" ["+u.Z()+"]",c0(u)}}finally{el(u)}}}}function el(u,d){if(u.g){l0(u);let f=u.g,g=u.v[0]?()=>{}:null;u.g=null,u.v=null,d||Ot(u,"ready");try{f.onreadystatechange=g}catch{}}}function l0(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function fr(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<fr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),MR(d)}};function d0(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function XR(u){let d={};u=(u.g&&2<=fr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<u.length;g++){if(W(u[g]))continue;var f=C(u[g]);let b=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let M=d[b]||[];d[b]=M,M.push(f)}E(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ga(u,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[u]||d}function h0(u){this.Aa=0,this.i=[],this.j=new La,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ga("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ga("baseRetryDelayMs",5e3,u),this.cb=Ga("retryDelaySeedMs",1e4,u),this.Wa=Ga("forwardChannelMaxRetries",2,u),this.wa=Ga("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new WE(u&&u.concurrentRequestLimit),this.Da=new QR,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=h0.prototype,n.la=8,n.G=1,n.connect=function(u,d,f,g){Ft(0),this.W=u,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=E0(this,null,this.W),nl(this)};function Ap(u){if(f0(u),u.G==3){var d=u.U++,f=hr(u.I);if(Be(f,"SID",u.K),Be(f,"RID",d),Be(f,"TYPE","terminate"),Wa(u,f),d=new jr(u,u.j,d),d.L=2,d.v=Ju(hr(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=I0(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Qu(d)}w0(u)}function tl(u){u.g&&(Mp(u),u.g.cancel(),u.g=null)}function f0(u){tl(u),u.u&&(a.clearTimeout(u.u),u.u=null),rl(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function nl(u){if(!KE(u.h)&&!u.s){u.s=!0;var d=u.Ga;Ma||DE(),Ra||(Ma(),Ra=!0),ap.add(d,u),u.B=0}}function eN(u,d){return QE(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=d.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Va(m(u.Ga,u,d),_0(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let b=new jr(this,this.j,u),M=this.o;if(this.S&&(M?(M=v(M),I(M,this.S)):M=this.S),this.m!==null||this.O||(b.H=M,M=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=g0(this,b,d),f=hr(this.I),Be(f,"RID",u),Be(f,"CVER",22),this.D&&Be(f,"X-HTTP-Session-Id",this.D),Wa(this,f),M&&(this.O?d="headers="+encodeURIComponent(String(s0(M)))+"&"+d:this.m&&Sp(f,this.m,M)),Tp(this.h,b),this.Ua&&Be(f,"TYPE","init"),this.P?(Be(f,"$req",d),Be(f,"SID","null"),b.T=!0,Ip(b,f,null)):Ip(b,f,d),this.G=2}}else this.G==3&&(u?p0(this,u):this.i.length==0||KE(this.h)||p0(this))};function p0(u,d){var f;d?f=d.l:f=u.U++;let g=hr(u.I);Be(g,"SID",u.K),Be(g,"RID",f),Be(g,"AID",u.T),Wa(u,g),u.m&&u.o&&Sp(g,u.m,u.o),f=new jr(u,u.j,f,u.B+1),u.m===null&&(f.H=u.o),d&&(u.i=d.D.concat(u.i)),d=g0(u,f,1e3),f.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Tp(u.h,f),Ip(f,g,d)}function Wa(u,d){u.H&&te(u.H,function(f,g){Be(d,g,f)}),u.l&&JE({},function(f,g){Be(d,g,f)})}function g0(u,d,f){f=Math.min(u.i.length,f);var g=u.l?m(u.l.Na,u.l,u):null;e:{var b=u.i;let M=-1;for(;;){let $=["count="+f];M==-1?0<f?(M=b[0].g,$.push("ofs="+M)):M=0:$.push("ofs="+M);let Oe=!0;for(let It=0;It<f;It++){let xe=b[It].g,xt=b[It].map;if(xe-=M,0>xe)M=Math.max(0,b[It].g-100),Oe=!1;else try{YR(xt,$,"req"+xe+"_")}catch{g&&g(xt)}}if(Oe){g=$.join("&");break e}}}return u=u.i.splice(0,f),d.D=u,g}function m0(u){if(!u.g&&!u.u){u.Y=1;var d=u.Fa;Ma||DE(),Ra||(Ma(),Ra=!0),ap.add(d,u),u.v=0}}function xp(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Va(m(u.Fa,u),_0(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,y0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Va(m(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ft(10),tl(this),y0(this))};function Mp(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function y0(u){u.g=new jr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var d=hr(u.qa);Be(d,"RID","rpc"),Be(d,"SID",u.K),Be(d,"AID",u.T),Be(d,"CI",u.F?"0":"1"),!u.F&&u.ja&&Be(d,"TO",u.ja),Be(d,"TYPE","xmlhttp"),Wa(u,d),u.m&&u.o&&Sp(d,u.m,u.o),u.L&&(u.g.I=u.L);var f=u.g;u=u.ia,f.L=1,f.v=Ju(hr(d)),f.m=null,f.P=!0,qE(f,u)}n.Za=function(){this.C!=null&&(this.C=null,tl(this),xp(this),Ft(19))};function rl(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function v0(u,d){var f=null;if(u.g==d){rl(u),Mp(u),u.g=null;var g=2}else if(Dp(u.h,d))f=d.D,YE(u.h,d),g=1;else return;if(u.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var b=u.B;g=Gu(),Ot(g,new BE(g,f)),nl(u)}else m0(u);else if(b=d.s,b==3||b==0&&0<d.X||!(g==1&&eN(u,d)||g==2&&xp(u)))switch(f&&0<f.length&&(d=u.h,d.i=d.i.concat(f)),b){case 1:ki(u,5);break;case 4:ki(u,10);break;case 3:ki(u,6);break;default:ki(u,2)}}}function _0(u,d){let f=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(f*=2),f*d}function ki(u,d){if(u.j.info("Error code "+d),d==2){var f=m(u.fb,u),g=u.Xa;let b=!g;g=new Pi(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Yu(g,"https"),Ju(g),b?WR(g.toString(),f):KR(g.toString(),f)}else Ft(2);u.G=0,u.l&&u.l.sa(d),w0(u),f0(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Ft(2)):(this.j.info("Failed to ping google.com"),Ft(1))};function w0(u){if(u.G=0,u.ka=[],u.l){let d=ZE(u.h);(d.length!=0||u.i.length!=0)&&(x(u.ka,d),x(u.ka,u.i),u.h.i.length=0,A(u.i),u.i.length=0),u.l.ra()}}function E0(u,d,f){var g=f instanceof Pi?hr(f):new Pi(f);if(g.g!="")d&&(g.g=d+"."+g.g),Zu(g,g.s);else{var b=a.location;g=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var M=new Pi(null);g&&Yu(M,g),d&&(M.g=d),b&&Zu(M,b),f&&(M.l=f),g=M}return f=u.D,d=u.ya,f&&d&&Be(g,f,d),Be(g,"VER",u.la),Wa(u,g),g}function I0(u,d,f){if(d&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Ca&&!u.pa?new Ze(new Ha({eb:f})):new Ze(u.pa),d.Ha(u.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function C0(){}n=C0.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function il(){}il.prototype.g=function(u,d){return new sn(u,d)};function sn(u,d){At.call(this),this.g=new h0(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(u?u["X-WebChannel-Client-Profile"]=d.va:u={"X-WebChannel-Client-Profile":d.va}),this.g.S=u,(u=d&&d.Sb)&&!W(u)&&(this.g.m=u),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!W(d)&&(this.g.D=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new Bo(this)}D(sn,At),sn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},sn.prototype.close=function(){Ap(this.g)},sn.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var f={};f.__data__=u,u=f}else this.u&&(f={},f.__data__=mp(u),u=f);d.i.push(new VR(d.Ya++,u)),d.G==3&&nl(d)},sn.prototype.N=function(){this.g.l=null,delete this.j,Ap(this.g),delete this.g,sn.aa.N.call(this)};function b0(u){vp.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(let f in d){u=f;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}D(b0,vp);function D0(){_p.call(this),this.status=1}D(D0,_p);function Bo(u){this.g=u}D(Bo,C0),Bo.prototype.ua=function(){Ot(this.g,"a")},Bo.prototype.ta=function(u){Ot(this.g,new b0(u))},Bo.prototype.sa=function(u){Ot(this.g,new D0)},Bo.prototype.ra=function(){Ot(this.g,"b")},il.prototype.createWebChannel=il.prototype.g,sn.prototype.send=sn.prototype.o,sn.prototype.open=sn.prototype.m,sn.prototype.close=sn.prototype.close,Cv=Ar.createWebChannelTransport=function(){return new il},Iv=Ar.getStatEventTarget=function(){return Gu()},Ev=Ar.Event=Ri,Fh=Ar.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Wu.NO_ERROR=0,Wu.TIMEOUT=8,Wu.HTTP_ERROR=6,nu=Ar.ErrorCode=Wu,UE.COMPLETE="complete",wv=Ar.EventType=UE,FE.EventType=Oa,Oa.OPEN="a",Oa.CLOSE="b",Oa.ERROR="c",Oa.MESSAGE="d",At.prototype.listen=At.prototype.K,$s=Ar.WebChannel=FE,kj=Ar.FetchXmlHttpFactory=Ha,Ze.prototype.listenOnce=Ze.prototype.L,Ze.prototype.getLastError=Ze.prototype.Ka,Ze.prototype.getLastErrorCode=Ze.prototype.Ba,Ze.prototype.getStatus=Ze.prototype.Z,Ze.prototype.getResponseJson=Ze.prototype.Oa,Ze.prototype.getResponseText=Ze.prototype.oa,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Ha,_v=Ar.XhrIo=Ze}).apply(typeof Oh<"u"?Oh:typeof self<"u"?self:typeof window<"u"?window:{});var SS="@firebase/firestore";var dt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};dt.UNAUTHENTICATED=new dt(null),dt.GOOGLE_CREDENTIALS=new dt("google-credentials-uid"),dt.FIRST_PARTY=new dt("first-party-uid"),dt.MOCK_USER=new dt("mock-user");var _a="10.14.0";var vi=new cl("@firebase/firestore");function Ws(){return vi.logLevel}function MA(n){vi.setLogLevel(n)}function V(n,...e){if(vi.logLevel<=Hn.DEBUG){let t=e.map(Aw);vi.debug(`Firestore (${_a}): ${n}`,...t)}}function nt(n,...e){if(vi.logLevel<=Hn.ERROR){let t=e.map(Aw);vi.error(`Firestore (${_a}): ${n}`,...t)}}function Ln(n,...e){if(vi.logLevel<=Hn.WARN){let t=e.map(Aw);vi.warn(`Firestore (${_a}): ${n}`,...t)}}function Aw(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function Y(n="Unexpected state"){let e=`FIRESTORE (${_a}) INTERNAL ASSERTION FAILED: `+n;throw nt(e),new Error(e)}function J(n,e){n||Y()}function RA(n,e){n||Y()}function q(n,e){return n}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},F=class extends R0{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var mt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Gh=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},xv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(dt.UNAUTHENTICATED))}shutdown(){}},Mv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Rv=class{constructor(e){this.t=e,this.currentUser=dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){J(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new mt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new mt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>N(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new mt)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(J(typeof r.accessToken=="string"),new Gh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return J(e===null||typeof e=="string"),new dt(e)}},Nv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=dt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Pv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Nv(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},kv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Ov=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){J(this.o===void 0);let r=o=>{o.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,V("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(J(typeof t.token=="string"),this.R=t.token,new kv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Oj(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Wh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=Oj(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function ce(n,e){return n<e?-1:n>e?1:0}function na(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function NA(n){return n+"\0"}var Qe=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new F(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new F(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new F(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ne=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Qe(0,0))}static max(){return new n(new Qe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Kh=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Y(),r===void 0?r=e.length-t:r>e.length-t&&Y(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Ce=class n extends Kh{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new F(R.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},Fj=/^[_a-zA-Z][_a-zA-Z0-9]*$/,rt=class n extends Kh{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Fj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new F(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new F(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new F(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new F(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var z=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ce.fromString(e))}static fromName(e){return new n(Ce.fromString(e).popFirst(5))}static empty(){return new n(Ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ce.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ce(e.slice()))}};var ra=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function Fv(n){return n.fields.find(e=>e.kind===2)}function ho(n){return n.fields.filter(e=>e.kind!==2)}ra.UNKNOWN_ID=-1;var Xs=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var pu=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,Dn.min())}};function PA(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ne.fromTimestamp(r===1e9?new Qe(t+1,0):new Qe(t,r));return new Dn(i,z.empty(),e)}function kA(n){return new Dn(n.readTime,n.key,-1)}var Dn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ne.min(),z.empty(),-1)}static max(){return new n(ne.max(),z.empty(),-1)}};function xw(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=z.comparator(n.documentKey,e.documentKey),t!==0?t:ce(n.largestBatchId,e.largestBatchId))}var OA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Qh=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ai(n){return N(this,null,function*(){if(n.code!==R.FAILED_PRECONDITION||n.message!==OA)throw n;V("LocalStore","Unexpectedly lost primary lease")})}var S=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var Yh=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new mt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new vo(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=Mw(r.target.error);this.V.reject(new vo(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new vo(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(V("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new Lv(t)}},_i=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(Ka())===12.2&&nt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return V("SimpleDb","Removing database:",e),fo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!al())return!1;if(n.v())return!0;let e=Ka(),t=n.S(e),r=0<t&&t<10,i=FA(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return N(this,null,function*(){return this.db||(V("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new vo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new F(R.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new F(R.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new vo(e,s))},i.onupgradeneeded=o=>{V("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{V("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return N(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=Yh.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),S.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&s<3;if(V("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function FA(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var Vv=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return fo(this.B.delete())}},vo=class extends F{constructor(e,t){super(R.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function xi(n){return n.name==="IndexedDbTransactionError"}var Lv=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(V("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(V("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),fo(r)}add(e){return V("SimpleDb","ADD",this.store.name,e,e),fo(this.store.add(e))}get(e){return fo(this.store.get(e)).next(t=>(t===void 0&&(t=null),V("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return V("SimpleDb","DELETE",this.store.name,e),fo(this.store.delete(e))}count(){return V("SimpleDb","COUNT",this.store.name),fo(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new S((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,c)=>{s.push(c)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new S((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){V("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new S((r,i)=>{t.onerror=o=>{let s=Mw(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new S((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new Vv(a),l=t(a.primaryKey,a.value,c);if(l instanceof S){let h=l.catch(p=>(c.done(),S.reject(p)));r.push(h)}c.isDone?i():c.K===null?a.continue():a.continue(c.K)}}).next(()=>S.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function fo(n){return new S((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=Mw(r.target.error);t(i)}})}var AS=!1;function Mw(n){let e=_i.S(Ka());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new F("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return AS||(AS=!0,setTimeout(()=>{throw r},0)),r}}return n}var jv=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){V("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>N(this,null,function*(){this.task=null;try{V("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){xi(t)?V("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield Ai(t)}yield this.X(6e4)}))}},Bv=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return N(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return S.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return V("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(V("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=kA(o);xw(s,r)>0&&(r=s)}),new Dn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var fn=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Ou(n){return n==null}function gu(n){return n===0&&1/n==-1/0}function VA(n){return typeof n=="number"&&Number.isInteger(n)&&!gu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Gt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=xS(e)),e=Vj(n.get(t),e);return xS(e)}function Vj(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function xS(n){return n+""}function tr(n){let e=n.length;if(J(e>=2),e===2)return J(n.charAt(0)===""&&n.charAt(1)===""),Ce.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&Y(),n.charAt(s+1)){case"":let a=n.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:Y()}o=s+2}return new Ce(r)}var MS=["userId","batchId"];function Uh(n,e){return[n,Gt(e)]}function LA(n,e,t){return[n,Gt(e),t]}var Lj={},jj=["prefixPath","collectionGroup","readTime","documentId"],Bj=["prefixPath","collectionGroup","documentId"],Uj=["collectionGroup","readTime","prefixPath","documentId"],$j=["canonicalId","targetId"],Hj=["targetId","path"],qj=["path","targetId"],zj=["collectionId","parent"],Gj=["indexId","uid"],Wj=["uid","sequenceNumber"],Kj=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Qj=["indexId","uid","orderedDocumentKey"],Yj=["userId","collectionPath","documentId"],Zj=["userId","collectionPath","largestBatchId"],Jj=["userId","collectionGroup","largestBatchId"],jA=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Xj=[...jA,"documentOverlays"],BA=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],UA=BA,Rw=[...UA,"indexConfiguration","indexState","indexEntries"],eB=Rw,tB=[...Rw,"globals"];var mu=class extends Qh{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function yt(n,e){let t=q(n);return _i.F(t._e,e)}function RS(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Mo(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function $A(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var He=class n{constructor(e,t){this.comparator=e,this.root=t||rr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,rr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Js(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Js(this.root,e,this.comparator,!1)}getReverseIterator(){return new Js(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Js(this.root,e,this.comparator,!0)}},Js=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},rr=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Y();let e=this.left.check();if(e!==this.right.check())throw Y();return e+(this.isRed()?0:1)}};rr.EMPTY=null,rr.RED=!0,rr.BLACK=!1;rr.EMPTY=new class{constructor(){this.size=0}get key(){throw Y()}get value(){throw Y()}get color(){throw Y()}get left(){throw Y()}get right(){throw Y()}copy(e,t,r,i,o){return this}insert(e,t,r){return new rr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ve=class n{constructor(e){this.comparator=e,this.data=new He(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Zh(this.data.getIterator())}getIteratorFrom(e){return new Zh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Zh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Hs(n){return n.hasNext()?n.getNext():void 0}var pn=class n{constructor(e){this.fields=e,e.sort(rt.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ve(rt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return na(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Jh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function HA(){return typeof atob<"u"}var ot=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Jh("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ot.EMPTY_BYTE_STRING=new ot("");var nB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rr(n){if(J(!!n),typeof n=="string"){let e=0,t=nB.exec(n);if(J(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ze(n.seconds),nanos:ze(n.nanos)}}function ze(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function wi(n){return typeof n=="string"?ot.fromBase64String(n):ot.fromUint8Array(n)}function qf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Nw(n){let e=n.mapValue.fields.__previous_value__;return qf(e)?Nw(e):e}function yu(n){let e=Rr(n.mapValue.fields.__local_write_time__.timestampValue);return new Qe(e.seconds,e.nanos)}var Uv=class{constructor(e,t,r,i,o,s,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},Ei=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var mi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},$h={nullValue:"NULL_VALUE"};function _o(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?qf(n)?4:qA(n)?9007199254740991:zf(n)?10:11:Y()}function sr(n,e){if(n===e)return!0;let t=_o(n);if(t!==_o(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return yu(n).isEqual(yu(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Rr(i.timestampValue),a=Rr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return wi(i.bytesValue).isEqual(wi(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return ze(i.geoPointValue.latitude)===ze(o.geoPointValue.latitude)&&ze(i.geoPointValue.longitude)===ze(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return ze(i.integerValue)===ze(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=ze(i.doubleValue),a=ze(o.doubleValue);return s===a?gu(s)===gu(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return na(n.arrayValue.values||[],e.arrayValue.values||[],sr);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(RS(s)!==RS(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!sr(s[c],a[c])))return!1;return!0}(n,e);default:return Y()}}function vu(n,e){return(n.values||[]).find(t=>sr(t,e))!==void 0}function Ii(n,e){if(n===e)return 0;let t=_o(n),r=_o(e);if(t!==r)return ce(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ce(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=ze(o.integerValue||o.doubleValue),c=ze(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return NS(n.timestampValue,e.timestampValue);case 4:return NS(yu(n),yu(e));case 5:return ce(n.stringValue,e.stringValue);case 6:return function(o,s){let a=wi(o),c=wi(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let h=ce(a[l],c[l]);if(h!==0)return h}return ce(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=ce(ze(o.latitude),ze(s.latitude));return a!==0?a:ce(ze(o.longitude),ze(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return PS(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,l,h;let p=o.fields||{},m=s.fields||{},y=(a=p.value)===null||a===void 0?void 0:a.arrayValue,D=(c=m.value)===null||c===void 0?void 0:c.arrayValue,A=ce(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=D?.values)===null||h===void 0?void 0:h.length)||0);return A!==0?A:PS(y,D)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===mi.mapValue&&s===mi.mapValue)return 0;if(o===mi.mapValue)return 1;if(s===mi.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){let m=ce(c[p],h[p]);if(m!==0)return m;let y=Ii(a[c[p]],l[h[p]]);if(y!==0)return y}return ce(c.length,h.length)}(n.mapValue,e.mapValue);default:throw Y()}}function NS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ce(n,e);let t=Rr(n),r=Rr(e),i=ce(t.seconds,r.seconds);return i!==0?i:ce(t.nanos,r.nanos)}function PS(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Ii(t[i],r[i]);if(o)return o}return ce(t.length,r.length)}function ia(n){return $v(n)}function $v(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Rr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return wi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return z.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=$v(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${$v(t.fields[s])}`;return i+"}"}(n.mapValue):Y()}function wo(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Hv(n){return!!n&&"integerValue"in n}function _u(n){return!!n&&"arrayValue"in n}function kS(n){return!!n&&"nullValue"in n}function OS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Hh(n){return!!n&&"mapValue"in n}function zf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function uu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Mo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=uu(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=uu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function qA(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var zA={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function rB(n){return"nullValue"in n?$h:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?wo(Ei.empty(),z.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?zf(n)?zA:{mapValue:{}}:Y()}function iB(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?wo(Ei.empty(),z.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?zA:"mapValue"in n?zf(n)?{mapValue:{}}:mi:Y()}function FS(n,e){let t=Ii(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function VS(n,e){let t=Ii(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var kt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Hh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=uu(t)}setAll(e){let t=rt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=uu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Hh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return sr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Hh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Mo(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(uu(this.value))}};function GA(n){let e=[];return Mo(n.fields,(t,r)=>{let i=new rt([t]);if(Hh(r)){let o=GA(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new pn(e)}var ht=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ne.min(),ne.min(),ne.min(),kt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ne.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ne.min(),ne.min(),kt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ne.min(),ne.min(),kt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ar=class{constructor(e,t){this.position=e,this.inclusive=t}};function LS(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=z.comparator(z.fromName(s.referenceValue),t.key):r=Ii(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function jS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!sr(n.position[t],e.position[t]))return!1;return!0}var Eo=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function oB(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Xh=class{},_e=class n extends Xh{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Gv(e,t,r):t==="array-contains"?new Qv(e,r):t==="in"?new ef(e,r):t==="not-in"?new Yv(e,r):t==="array-contains-any"?new Zv(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Wv(e,r):new Kv(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Ii(t,this.value)):t!==null&&_o(this.value)===_o(t)&&this.matchesComparison(Ii(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ke=class n extends Xh{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return oa(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function oa(n){return n.op==="and"}function qv(n){return n.op==="or"}function Pw(n){return WA(n)&&oa(n)}function WA(n){for(let e of n.filters)if(e instanceof ke)return!1;return!0}function zv(n){if(n instanceof _e)return n.field.canonicalString()+n.op.toString()+ia(n.value);if(Pw(n))return n.filters.map(e=>zv(e)).join(",");{let e=n.filters.map(t=>zv(t)).join(",");return`${n.op}(${e})`}}function KA(n,e){return n instanceof _e?function(r,i){return i instanceof _e&&r.op===i.op&&r.field.isEqual(i.field)&&sr(r.value,i.value)}(n,e):n instanceof ke?function(r,i){return i instanceof ke&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&KA(s,i.filters[a]),!0):!1}(n,e):void Y()}function QA(n,e){let t=n.filters.concat(e);return ke.create(t,n.op)}function YA(n){return n instanceof _e?function(t){return`${t.field.canonicalString()} ${t.op} ${ia(t.value)}`}(n):n instanceof ke?function(t){return t.op.toString()+" {"+t.getFilters().map(YA).join(" ,")+"}"}(n):"Filter"}var Gv=class extends _e{constructor(e,t,r){super(e,t,r),this.key=z.fromName(r.referenceValue)}matches(e){let t=z.comparator(e.key,this.key);return this.matchesComparison(t)}},Wv=class extends _e{constructor(e,t){super(e,"in",t),this.keys=ZA("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Kv=class extends _e{constructor(e,t){super(e,"not-in",t),this.keys=ZA("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function ZA(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>z.fromName(r.referenceValue))}var Qv=class extends _e{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return _u(t)&&vu(t.arrayValue,this.value)}},ef=class extends _e{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&vu(this.value.arrayValue,t)}},Yv=class extends _e{constructor(e,t){super(e,"not-in",t)}matches(e){if(vu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!vu(this.value.arrayValue,t)}},Zv=class extends _e{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!_u(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>vu(this.value.arrayValue,r))}};var Jv=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function Xv(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Jv(n,e,t,r,i,o,s)}function Io(n){let e=q(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>zv(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Ou(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ia(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ia(r)).join(",")),e.ue=t}return e.ue}function Fu(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!oB(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!KA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!jS(n.startAt,e.startAt)&&jS(n.endAt,e.endAt)}function tf(n){return z.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function nf(n,e){return n.filters.filter(t=>t instanceof _e&&t.field.isEqual(e))}function BS(n,e,t){let r=$h,i=!0;for(let o of nf(n,e)){let s=$h,a=!0;switch(o.op){case"<":case"<=":s=rB(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=$h}FS({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];FS({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function US(n,e,t){let r=mi,i=!0;for(let o of nf(n,e)){let s=mi,a=!0;switch(o.op){case">=":case">":s=iB(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=mi}VS({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];VS({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var jn=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function JA(n,e,t,r,i,o,s,a){return new jn(n,e,t,r,i,o,s,a)}function wa(n){return new jn(n)}function $S(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function kw(n){return n.collectionGroup!==null}function ea(n){let e=q(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ve(rt.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Eo(o,r))}),t.has(rt.keyField().canonicalString())||e.ce.push(new Eo(rt.keyField(),r))}return e.ce}function Wt(n){let e=q(n);return e.le||(e.le=sB(e,ea(n))),e.le}function sB(n,e){if(n.limitType==="F")return Xv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Eo(i.field,o)});let t=n.endAt?new ar(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ar(n.startAt.position,n.startAt.inclusive):null;return Xv(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function e_(n,e){let t=n.filters.concat([e]);return new jn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function rf(n,e,t){return new jn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Vu(n,e){return Fu(Wt(n),Wt(e))&&n.limitType===e.limitType}function XA(n){return`${Io(Wt(n))}|lt:${n.limitType}`}function Ks(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>YA(i)).join(", ")}]`),Ou(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ia(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ia(i)).join(",")),`Target(${r})`}(Wt(n))}; limitType=${n.limitType})`}function Lu(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):z.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of ea(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let l=LS(s,a,c);return s.inclusive?l<=0:l<0}(r.startAt,ea(r),i)||r.endAt&&!function(s,a,c){let l=LS(s,a,c);return s.inclusive?l>=0:l>0}(r.endAt,ea(r),i))}(n,e)}function ex(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function tx(n){return(e,t)=>{let r=!1;for(let i of ea(n)){let o=aB(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function aB(n,e,t){let r=n.field.isKeyField()?z.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?Ii(c,l):Y()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Y()}}var cr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Mo(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return $A(this.inner)}size(){return this.innerSize}};var cB=new He(z.comparator);function rn(){return cB}var nx=new He(z.comparator);function au(...n){let e=nx;for(let t of n)e=e.insert(t.key,t);return e}function rx(n){let e=nx;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function nr(){return lu()}function ix(){return lu()}function lu(){return new cr(n=>n.toString(),(n,e)=>n.isEqual(e))}var uB=new He(z.comparator),lB=new Ve(z.comparator);function ue(...n){let e=lB;for(let t of n)e=e.add(t);return e}var dB=new Ve(ce);function Ow(){return dB}function Fw(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gu(e)?"-0":e}}function ox(n){return{integerValue:""+n}}function sx(n,e){return VA(e)?ox(e):Fw(n,e)}var sa=class{constructor(){this._=void 0}};function hB(n,e,t){return n instanceof Ci?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&qf(o)&&(o=Nw(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof Nr?cx(n,e):n instanceof Pr?ux(n,e):function(i,o){let s=ax(i,o),a=HS(s)+HS(i.Pe);return Hv(s)&&Hv(i.Pe)?ox(a):Fw(i.serializer,a)}(n,e)}function fB(n,e,t){return n instanceof Nr?cx(n,e):n instanceof Pr?ux(n,e):t}function ax(n,e){return n instanceof bi?function(r){return Hv(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Ci=class extends sa{},Nr=class extends sa{constructor(e){super(),this.elements=e}};function cx(n,e){let t=lx(e);for(let r of n.elements)t.some(i=>sr(i,r))||t.push(r);return{arrayValue:{values:t}}}var Pr=class extends sa{constructor(e){super(),this.elements=e}};function ux(n,e){let t=lx(e);for(let r of n.elements)t=t.filter(i=>!sr(i,r));return{arrayValue:{values:t}}}var bi=class extends sa{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function HS(n){return ze(n.integerValue||n.doubleValue)}function lx(n){return _u(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Co=class{constructor(e,t){this.field=e,this.transform=t}};function pB(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Nr&&i instanceof Nr||r instanceof Pr&&i instanceof Pr?na(r.elements,i.elements,sr):r instanceof bi&&i instanceof bi?sr(r.Pe,i.Pe):r instanceof Ci&&i instanceof Ci}(n.transform,e.transform)}var t_=class{constructor(e,t){this.version=e,this.transformResults=t}},tt=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function qh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var aa=class{};function dx(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ti(n.key,tt.none()):new Di(n.key,n.data,tt.none());{let t=n.data,r=kt.empty(),i=new Ve(rt.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Bn(n.key,r,new pn(i.toArray()),tt.none())}}function gB(n,e,t){n instanceof Di?function(i,o,s){let a=i.value.clone(),c=zS(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Bn?function(i,o,s){if(!qh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=zS(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(hx(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function du(n,e,t,r){return n instanceof Di?function(o,s,a,c){if(!qh(o.precondition,s))return a;let l=o.value.clone(),h=GS(o.fieldTransforms,c,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Bn?function(o,s,a,c){if(!qh(o.precondition,s))return a;let l=GS(o.fieldTransforms,c,s),h=s.data;return h.setAll(hx(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return qh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function mB(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=ax(r.transform,i||null);o!=null&&(t===null&&(t=kt.empty()),t.set(r.field,o))}return t||null}function qS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&na(r,i,(o,s)=>pB(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Di=class extends aa{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Bn=class extends aa{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function hx(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function zS(n,e,t){let r=new Map;J(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,fB(s,a,t[i]))}return r}function GS(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,hB(o,s,e))}return r}var Ti=class extends aa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},wu=class extends aa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Eu=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&gB(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=du(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=du(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=ix();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=dx(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(ne.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ue())}isEqual(e){return this.batchId===e.batchId&&na(this.mutations,e.mutations,(t,r)=>qS(t,r))&&na(this.baseMutations,e.baseMutations,(t,r)=>qS(t,r))}},n_=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){J(e.mutations.length===r.length);let i=function(){return uB}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Iu=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var r_=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var ut,Ie;function fx(n){switch(n){default:return Y();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function px(n){if(n===void 0)return nt("GRPC error has no .code"),R.UNKNOWN;switch(n){case ut.OK:return R.OK;case ut.CANCELLED:return R.CANCELLED;case ut.UNKNOWN:return R.UNKNOWN;case ut.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case ut.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case ut.INTERNAL:return R.INTERNAL;case ut.UNAVAILABLE:return R.UNAVAILABLE;case ut.UNAUTHENTICATED:return R.UNAUTHENTICATED;case ut.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case ut.NOT_FOUND:return R.NOT_FOUND;case ut.ALREADY_EXISTS:return R.ALREADY_EXISTS;case ut.PERMISSION_DENIED:return R.PERMISSION_DENIED;case ut.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case ut.ABORTED:return R.ABORTED;case ut.OUT_OF_RANGE:return R.OUT_OF_RANGE;case ut.UNIMPLEMENTED:return R.UNIMPLEMENTED;case ut.DATA_LOSS:return R.DATA_LOSS;default:return Y()}}(Ie=ut||(ut={}))[Ie.OK=0]="OK",Ie[Ie.CANCELLED=1]="CANCELLED",Ie[Ie.UNKNOWN=2]="UNKNOWN",Ie[Ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ie[Ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ie[Ie.NOT_FOUND=5]="NOT_FOUND",Ie[Ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ie[Ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ie[Ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ie[Ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ie[Ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ie[Ie.ABORTED=10]="ABORTED",Ie[Ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ie[Ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ie[Ie.INTERNAL=13]="INTERNAL",Ie[Ie.UNAVAILABLE=14]="UNAVAILABLE",Ie[Ie.DATA_LOSS=15]="DATA_LOSS";var WS=null;function gx(){return new TextEncoder}var yB=new di([4294967295,4294967295],0);function KS(n){let e=gx().encode(n),t=new vv;return t.update(e),new Uint8Array(t.digest())}function QS(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new di([t,r],0),new di([i,o],0)]}var i_=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new yo(`Invalid padding: ${t}`);if(r<0)throw new yo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new yo(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new yo(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=di.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(di.fromNumber(r)));return i.compare(yB)===1&&(i=new di([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=KS(e),[r,i]=QS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=KS(e),[r,i]=QS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},yo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Cu=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,bu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ne.min(),i,new He(ce),rn(),ue())}},bu=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ue(),ue(),ue())}};var ta=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},of=class{constructor(e,t){this.targetId=e,this.me=t}},sf=class{constructor(e,t,r=ot.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},af=class{constructor(){this.fe=0,this.ge=ZS(),this.pe=ot.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ue(),t=ue(),r=ue();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Y()}}),new bu(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=ZS()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,J(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},o_=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=rn(),this.qe=YS(),this.Qe=new He(ce)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Y()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(tf(o))if(r===0){let s=new z(o.path);this.Ue(t,s,ht.newNoDocument(s,ne.min()))}else J(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),c=a?this.Xe(a,e,s):1;if(c!==0){this.je(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}WS?.et(function(h,p,m,y,D){var A,x,U,W,j,X;let ie={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},te=p.unchangedNames;return te&&(ie.bloomFilter={applied:D===0,hashCount:(A=te?.hashCount)!==null&&A!==void 0?A:0,bitmapLength:(W=(U=(x=te?.bits)===null||x===void 0?void 0:x.bitmap)===null||U===void 0?void 0:U.length)!==null&&W!==void 0?W:0,padding:(X=(j=te?.bits)===null||j===void 0?void 0:j.padding)!==null&&X!==void 0?X:0,mightContain:E=>{var v;return(v=y?.mightContain(E))!==null&&v!==void 0&&v}}),ie}(s,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=wi(r).toUint8Array()}catch(c){if(c instanceof Jh)return Ln("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new i_(s,i,o)}catch(c){return Ln(c instanceof yo?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&tf(a.target)){let c=new z(a.target.path);this.ke.get(c)!==null||this.it(s,c)||this.Ue(s,c,ht.newNoDocument(c,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=ue();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new Cu(e,t,this.Qe,this.ke,r);return this.ke=rn(),this.qe=YS(),this.Qe=new He(ce),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new af,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ve(ce),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||V("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new af),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function YS(){return new He(z.comparator)}function ZS(){return new He(z.comparator)}var vB={asc:"ASCENDING",desc:"DESCENDING"},_B={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wB={and:"AND",or:"OR"},s_=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function a_(n,e){return n.useProto3Json||Ou(e)?e:{value:e}}function ca(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mx(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function EB(n,e){return ca(n,e.toTimestamp())}function it(n){return J(!!n),ne.fromTimestamp(function(t){let r=Rr(t);return new Qe(r.seconds,r.nanos)}(n))}function Vw(n,e){return c_(n,e).canonicalString()}function c_(n,e){let t=function(i){return new Ce(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function yx(n){let e=Ce.fromString(n);return J(Sx(e)),e}function Du(n,e){return Vw(n.databaseId,e.path)}function ir(n,e){let t=yx(e);if(t.get(1)!==n.databaseId.projectId)throw new F(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new F(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new z(wx(t))}function vx(n,e){return Vw(n.databaseId,e)}function _x(n){let e=yx(n);return e.length===4?Ce.emptyPath():wx(e)}function u_(n){return new Ce(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function wx(n){return J(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function JS(n,e,t){return{name:Du(n,e),fields:t.value.mapValue.fields}}function Ex(n,e,t){let r=ir(n,e.name),i=it(e.updateTime),o=e.createTime?it(e.createTime):ne.min(),s=new kt({mapValue:{fields:e.fields}}),a=ht.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function IB(n,e){return"found"in e?function(r,i){J(!!i.found),i.found.name,i.found.updateTime;let o=ir(r,i.found.name),s=it(i.found.updateTime),a=i.found.createTime?it(i.found.createTime):ne.min(),c=new kt({mapValue:{fields:i.found.fields}});return ht.newFoundDocument(o,s,a,c)}(n,e):"missing"in e?function(r,i){J(!!i.missing),J(!!i.readTime);let o=ir(r,i.missing),s=it(i.readTime);return ht.newNoDocument(o,s)}(n,e):Y()}function CB(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Y()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(J(h===void 0||typeof h=="string"),ot.fromBase64String(h||"")):(J(h===void 0||h instanceof Buffer||h instanceof Uint8Array),ot.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?R.UNKNOWN:px(l.code);return new F(h,l.message||"")}(s);t=new sf(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=ir(n,r.document.name),o=it(r.document.updateTime),s=r.document.createTime?it(r.document.createTime):ne.min(),a=new kt({mapValue:{fields:r.document.fields}}),c=ht.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new ta(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=ir(n,r.document),o=r.readTime?it(r.readTime):ne.min(),s=ht.newNoDocument(i,o),a=r.removedTargetIds||[];t=new ta([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=ir(n,r.document),o=r.removedTargetIds||[];t=new ta([],o,i,null)}else{if(!("filter"in e))return Y();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new r_(i,o),a=r.targetId;t=new of(a,s)}}return t}function Tu(n,e){let t;if(e instanceof Di)t={update:JS(n,e.key,e.value)};else if(e instanceof Ti)t={delete:Du(n,e.key)};else if(e instanceof Bn)t={update:JS(n,e.key,e.data),updateMask:xB(e.fieldMask)};else{if(!(e instanceof wu))return Y();t={verify:Du(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Ci)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Nr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Pr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof bi)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw Y()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:EB(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Y()}(n,e.precondition)),t}function l_(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?tt.updateTime(it(o.updateTime)):o.exists!==void 0?tt.exists(o.exists):tt.none()}(e.currentDocument):tt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;if("setToServerValue"in a)J(a.setToServerValue==="REQUEST_TIME"),c=new Ci;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];c=new Nr(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];c=new Pr(h)}else"increment"in a?c=new bi(s,a.increment):Y();let l=rt.fromServerFormat(a.fieldPath);return new Co(l,c)}(n,i)):[];if(e.update){e.update.name;let i=ir(n,e.update.name),o=new kt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let l=c.fieldPaths||[];return new pn(l.map(h=>rt.fromServerFormat(h)))}(e.updateMask);return new Bn(i,o,s,t,r)}return new Di(i,o,t,r)}if(e.delete){let i=ir(n,e.delete);return new Ti(i,t)}if(e.verify){let i=ir(n,e.verify);return new wu(i,t)}return Y()}function bB(n,e){return n&&n.length>0?(J(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?it(i.updateTime):it(o);return s.isEqual(ne.min())&&(s=it(o)),new t_(s,i.transformResults||[])}(t,e))):[]}function Ix(n,e){return{documents:[vx(n,e.path)]}}function Cx(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=vx(n,i);let o=function(l){if(l.length!==0)return Tx(ke.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:Qs(m.field),direction:TB(m.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=a_(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function bx(n){let e=_x(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){J(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let m=Dx(p);return m instanceof ke&&Pw(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(m=>function(D){return new Eo(Ys(D.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Ou(m)?null:m}(t.limit));let c=null;t.startAt&&(c=function(p){let m=!!p.before,y=p.values||[];return new ar(y,m)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let m=!p.before,y=p.values||[];return new ar(y,m)}(t.endAt)),JA(e,i,s,o,a,"F",c,l)}function DB(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Dx(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Ys(t.unaryFilter.field);return _e.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ys(t.unaryFilter.field);return _e.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Ys(t.unaryFilter.field);return _e.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Ys(t.unaryFilter.field);return _e.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Y()}}(n):n.fieldFilter!==void 0?function(t){return _e.create(Ys(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Y()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ke.create(t.compositeFilter.filters.map(r=>Dx(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Y()}}(t.compositeFilter.op))}(n):Y()}function TB(n){return vB[n]}function SB(n){return _B[n]}function AB(n){return wB[n]}function Qs(n){return{fieldPath:n.canonicalString()}}function Ys(n){return rt.fromServerFormat(n.fieldPath)}function Tx(n){return n instanceof _e?function(t){if(t.op==="=="){if(OS(t.value))return{unaryFilter:{field:Qs(t.field),op:"IS_NAN"}};if(kS(t.value))return{unaryFilter:{field:Qs(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(OS(t.value))return{unaryFilter:{field:Qs(t.field),op:"IS_NOT_NAN"}};if(kS(t.value))return{unaryFilter:{field:Qs(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qs(t.field),op:SB(t.op),value:t.value}}}(n):n instanceof ke?function(t){let r=t.getFilters().map(i=>Tx(i));return r.length===1?r[0]:{compositeFilter:{op:AB(t.op),filters:r}}}(n):Y()}function xB(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Sx(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var ua=class n{constructor(e,t,r,i,o=ne.min(),s=ne.min(),a=ot.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var cf=class{constructor(e){this.ct=e}};function MB(n,e){let t;if(e.document)t=Ex(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=z.fromSegments(e.noDocument.path),i=Do(e.noDocument.readTime);t=ht.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Y();{let r=z.fromSegments(e.unknownDocument.path),i=Do(e.unknownDocument.version);t=ht.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new Qe(i[0],i[1]);return ne.fromTimestamp(o)}(e.readTime)),t}function XS(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:uf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:Du(o,s.key),fields:s.data.value.mapValue.fields,updateTime:ca(o,s.version.toTimestamp()),createTime:ca(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:bo(e.version)};else{if(!e.isUnknownDocument())return Y();r.unknownDocument={path:t.path.toArray(),version:bo(e.version)}}return r}function uf(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function bo(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Do(n){let e=new Qe(n.seconds,n.nanoseconds);return ne.fromTimestamp(e)}function po(n,e){let t=(e.baseMutations||[]).map(o=>l_(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>l_(n.ct,o)),i=Qe.fromMillis(e.localWriteTimeMs);return new Eu(e.batchId,i,t,r)}function cu(n){let e=Do(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Do(n.lastLimboFreeSnapshotVersion):ne.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return J(o.documents.length===1),Wt(wa(_x(o.documents[0])))}(n.query):function(o){return Wt(bx(o))}(n.query),new ua(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,ot.fromBase64String(n.resumeToken))}function Ax(n,e){let t=bo(e.snapshotVersion),r=bo(e.lastLimboFreeSnapshotVersion),i;i=tf(e.target)?Ix(n.ct,e.target):Cx(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Io(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Lw(n){let e=bx({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?rf(e,e.limit,"L"):e}function bv(n,e){return new Iu(e.largestBatchId,l_(n.ct,e.overlayMutation))}function eA(n,e){let t=e.path.lastSegment();return[n,Gt(e.path.popLast()),t]}function tA(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:bo(r.readTime),documentKey:Gt(r.documentKey.path),largestBatchId:r.largestBatchId}}var d_=class{getBundleMetadata(e,t){return nA(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Do(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return nA(e).put(function(i){return{bundleId:i.id,createTime:bo(it(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return rA(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:Lw(o.bundledQuery),readTime:Do(o.readTime)}}(r)})}saveNamedQuery(e,t){return rA(e).put(function(i){return{name:i.name,readTime:bo(it(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function nA(n){return yt(n,"bundles")}function rA(n){return yt(n,"namedQueries")}var lf=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return ru(e).get(eA(this.userId,t)).next(r=>r?bv(this.serializer,r):null)}getOverlays(e,t){let r=nr();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new Iu(t,s);i.push(this.ht(e,a))}),S.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(Gt(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(ru(e).j("collectionPathOverlayIndex",a))}),S.waitFor(o)}getOverlaysForCollection(e,t,r){let i=nr(),o=Gt(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return ru(e).U("collectionPathOverlayIndex",s).next(a=>{for(let c of a){let l=bv(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=nr(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ru(e).J({index:"collectionGroupOverlayIndex",range:a},(c,l,h)=>{let p=bv(this.serializer,l);o.size()<i||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):h.done()}).next(()=>o)}ht(e,t){return ru(e).put(function(i,o,s){let[a,c,l]=eA(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Tu(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function ru(n){return yt(n,"documentOverlays")}var h_=class{Pt(e){return yt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?ot.fromUint8Array(r):ot.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var xr=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(ze(e.integerValue));else if("doubleValue"in e){let r=ze(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),gu(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Rr(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(wi(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?qA(e)?this.dt(t,Number.MAX_SAFE_INTEGER):zf(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Y()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(ze(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),z.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};xr.vt=new xr;function RB(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function iA(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=RB(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var f_=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=iA(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=iA(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},p_=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},g_=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},go=class{constructor(){this.jt=new f_,this.Ht=new p_(this.jt),this.Jt=new g_(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var mo=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function hi(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=oA(n.arrayValue,e.arrayValue),t!==0?t:(t=oA(n.directionalValue,e.directionalValue),t!==0?t:z.comparator(n.documentKey,e.documentKey)))}function oA(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var df=class{constructor(e){this.Xt=new Ve((t,r)=>rt.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(J(e.collectionGroup===this.collectionId),this.nn)return!1;let t=Fv(e);if(t!==void 0&&!this.sn(t))return!1;let r=ho(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.on(a,c)||!this._n(this.en[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Ve(rt.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Xs(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Xs(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Xs(r.field,r.dir==="asc"?0:1)));return new ra(ra.UNKNOWN_ID,this.collectionId,t,pu.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function xx(n){var e,t;if(J(n instanceof _e||n instanceof ke),n instanceof _e){if(n instanceof ef){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>_e.create(n.field,"==",o)))||[];return ke.create(i,"or")}return n}let r=n.filters.map(i=>xx(i));return ke.create(r,n.op)}function NB(n){if(n.getFilters().length===0)return[];let e=v_(xx(n));return J(Mx(e)),m_(e)||y_(e)?[e]:e.getFilters()}function m_(n){return n instanceof _e}function y_(n){return n instanceof ke&&Pw(n)}function Mx(n){return m_(n)||y_(n)||function(t){if(t instanceof ke&&qv(t)){for(let r of t.getFilters())if(!m_(r)&&!y_(r))return!1;return!0}return!1}(n)}function v_(n){if(J(n instanceof _e||n instanceof ke),n instanceof _e)return n;if(n.filters.length===1)return v_(n.filters[0]);let e=n.filters.map(r=>v_(r)),t=ke.create(e,n.op);return t=hf(t),Mx(t)?t:(J(t instanceof ke),J(oa(t)),J(t.filters.length>1),t.filters.reduce((r,i)=>jw(r,i)))}function jw(n,e){let t;return J(n instanceof _e||n instanceof ke),J(e instanceof _e||e instanceof ke),t=n instanceof _e?e instanceof _e?function(i,o){return ke.create([i,o],"and")}(n,e):sA(n,e):e instanceof _e?sA(e,n):function(i,o){if(J(i.filters.length>0&&o.filters.length>0),oa(i)&&oa(o))return QA(i,o.getFilters());let s=qv(i)?i:o,a=qv(i)?o:i,c=s.filters.map(l=>jw(l,a));return ke.create(c,"or")}(n,e),hf(t)}function sA(n,e){if(oa(e))return QA(e,n.getFilters());{let t=e.filters.map(r=>jw(n,r));return ke.create(t,"or")}}function hf(n){if(J(n instanceof _e||n instanceof ke),n instanceof _e)return n;let e=n.getFilters();if(e.length===1)return hf(e[0]);if(WA(n))return n;let t=e.map(i=>hf(i)),r=[];return t.forEach(i=>{i instanceof _e?r.push(i):i instanceof ke&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:ke.create(r,n.op)}var __=class{constructor(){this.un=new Su}addToCollectionParentIndex(e,t){return this.un.add(t),S.resolve()}getCollectionParents(e,t){return S.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return S.resolve()}deleteFieldIndex(e,t){return S.resolve()}deleteAllFieldIndexes(e){return S.resolve()}createTargetIndexes(e,t){return S.resolve()}getDocumentsMatchingTarget(e,t){return S.resolve(null)}getIndexType(e,t){return S.resolve(0)}getFieldIndexes(e,t){return S.resolve([])}getNextCollectionGroupToUpdate(e){return S.resolve(null)}getMinOffset(e,t){return S.resolve(Dn.min())}getMinOffsetFromCollectionGroup(e,t){return S.resolve(Dn.min())}updateCollectionGroup(e,t,r){return S.resolve()}updateIndexEntries(e,t){return S.resolve()}},Su=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ve(Ce.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ve(Ce.comparator)).toArray()}};var Vh=new Uint8Array(0),w_=class{constructor(e,t){this.databaseId=t,this.cn=new Su,this.ln=new cr(r=>Io(r),(r,i)=>Fu(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let o={collectionId:r,parent:Gt(i)};return aA(e).put(o)}return S.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[NA(t),""],!1,!0);return aA(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(tr(s.parent))}return r})}addFieldIndex(e,t){let r=iu(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=zs(e);return o.next(a=>{s.put(tA(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=iu(e),i=zs(e),o=qs(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=iu(e),r=qs(e),i=zs(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return S.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new df(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=qs(e),i=!0,o=new Map;return S.forEach(this.hn(t),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=ue(),a=[];return S.forEach(o,(c,l)=>{V("IndexedDbIndexManager",`Using index ${function(j){return`id=${j.indexId}|cg=${j.collectionGroup}|f=${j.fields.map(X=>`${X.fieldPath}:${X.kind}`).join(",")}`}(c)} to execute ${Io(t)}`);let h=function(j,X){let ie=Fv(X);if(ie===void 0)return null;for(let te of nf(j,ie.fieldPath))switch(te.op){case"array-contains-any":return te.value.arrayValue.values||[];case"array-contains":return[te.value]}return null}(l,c),p=function(j,X){let ie=new Map;for(let te of ho(X))for(let E of nf(j,te.fieldPath))switch(E.op){case"==":case"in":ie.set(te.fieldPath.canonicalString(),E.value);break;case"not-in":case"!=":return ie.set(te.fieldPath.canonicalString(),E.value),Array.from(ie.values())}return null}(l,c),m=function(j,X){let ie=[],te=!0;for(let E of ho(X)){let v=E.kind===0?BS(j,E.fieldPath,j.startAt):US(j,E.fieldPath,j.startAt);ie.push(v.value),te&&(te=v.inclusive)}return new ar(ie,te)}(l,c),y=function(j,X){let ie=[],te=!0;for(let E of ho(X)){let v=E.kind===0?US(j,E.fieldPath,j.endAt):BS(j,E.fieldPath,j.endAt);ie.push(v.value),te&&(te=v.inclusive)}return new ar(ie,te)}(l,c),D=this.In(c,l,m),A=this.In(c,l,y),x=this.Tn(c,l,p),U=this.En(c.indexId,h,D,m.inclusive,A,y.inclusive,x);return S.forEach(U,W=>r.G(W,t.limit).next(j=>{j.forEach(X=>{let ie=z.fromSegments(X.documentKey);s.has(ie)||(s=s.add(ie),a.push(ie))})}))}).next(()=>a)}return S.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=NB(ke.create(e.filters,"and")).map(r=>Xv(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,s,a){let c=(t!=null?t.length:1)*Math.max(r.length,o.length),l=c/(t!=null?t.length:1),h=[];for(let p=0;p<c;++p){let m=t?this.dn(t[p/l]):Vh,y=this.An(e,m,r[p%l],i),D=this.Rn(e,m,o[p%l],s),A=a.map(x=>this.An(e,m,x,!0));h.push(...this.createRange(y,D,A))}return h}An(e,t,r,i){let o=new mo(e,z.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){let o=new mo(e,z.empty(),t,r);return i?o.Zt():o}Pn(e,t){let r=new df(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.hn(t);return S.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(c){let l=new Ve(rt.comparator),h=!1;for(let p of c.filters)for(let m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:l=l.add(m.field));for(let p of c.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new go;for(let i of ho(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);xr.vt.It(o,s)}return r.zt()}dn(e){let t=new go;return xr.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new go;return xr.vt.It(wo(this.databaseId,t),r.Yt(function(o){let s=ho(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new go);let o=0;for(let s of ho(e)){let a=r[o++];for(let c of i)if(this.fn(t,s.fieldPath)&&_u(a))i=this.gn(i,s,a);else{let l=c.Yt(s.kind);xr.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new go;c.seed(a.zt()),xr.vt.It(s,c.Yt(t.kind)),o.push(c)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof _e&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=iu(e),i=zs(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return S.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(h,p){let m=p?new pu(p.sequenceNumber,new Dn(Do(p.readTime),new z(tr(p.documentKey)),p.largestBatchId)):pu.empty(),y=h.fields.map(([D,A])=>new Xs(rt.fromServerFormat(D),A));return new ra(h.indexId,h.collectionGroup,y,m)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:ce(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=iu(e),o=zs(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>S.forEach(a,c=>o.put(tA(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return S.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?S.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),S.forEach(a,c=>this.wn(e,i,c).next(l=>{let h=this.Sn(o,c);return l.isEqual(h)?S.resolve():this.bn(e,o,c,l,h)}))))})}Dn(e,t,r,i){return qs(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return qs(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=qs(e),o=new Ve(hi);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(s,a)=>{o=o.add(new mo(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,t){let r=new Ve(hi),i=this.Vn(t,e);if(i==null)return r;let o=Fv(t);if(o!=null){let s=e.data.field(o.fieldPath);if(_u(s))for(let a of s.arrayValue.values||[])r=r.add(new mo(t.indexId,e.key,this.dn(a),i))}else r=r.add(new mo(t.indexId,e.key,Vh,i));return r}bn(e,t,r,i,o){V("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(c,l,h,p,m){let y=c.getIterator(),D=l.getIterator(),A=Hs(y),x=Hs(D);for(;A||x;){let U=!1,W=!1;if(A&&x){let j=h(A,x);j<0?W=!0:j>0&&(U=!0)}else A!=null?W=!0:U=!0;U?(p(x),x=Hs(D)):W?(m(A),A=Hs(y)):(A=Hs(y),x=Hs(D))}}(i,o,hi,a=>{s.push(this.Dn(e,t,r,a))},a=>{s.push(this.vn(e,t,r,a))}),S.waitFor(s)}yn(e){let t=1;return zs(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>hi(s,a)).filter((s,a,c)=>!a||hi(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=hi(s,e),c=hi(s,t);if(a===0)i[0]=e.Zt();else if(a>0&&c<0)i.push(s),i.push(s.Zt());else if(c>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Vh,[]],c=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Vh,[]];o.push(IDBKeyRange.bound(a,c))}return o}Cn(e,t){return hi(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(cA)}getMinOffset(e,t){return S.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||Y())).next(cA)}};function aA(n){return yt(n,"collectionParents")}function qs(n){return yt(n,"indexEntries")}function iu(n){return yt(n,"indexConfiguration")}function zs(n){return yt(n,"indexState")}function cA(n){J(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;xw(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Dn(e.readTime,e.documentKey,t)}var uA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},bn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function Rx(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,c=r.J({range:s},(h,p,m)=>(a++,m.delete()));o.push(c.next(()=>{J(a===1)}));let l=[];for(let h of t.mutations){let p=LA(e,h.key.path,t.batchId);o.push(i.delete(p)),l.push(h.key)}return S.waitFor(o).next(()=>l)}function ff(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Y();e=n.noDocument}return JSON.stringify(e).length}bn.DEFAULT_COLLECTION_PERCENTILE=10,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bn.DEFAULT=new bn(41943040,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bn.DISABLED=new bn(-1,0,0);var pf=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){J(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return fi(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=Zs(e),s=fi(e);return s.add({}).next(a=>{J(typeof a=="number");let c=new Eu(a,t,r,i),l=function(y,D,A){let x=A.baseMutations.map(W=>Tu(y.ct,W)),U=A.mutations.map(W=>Tu(y.ct,W));return{userId:D,batchId:A.batchId,localWriteTimeMs:A.localWriteTime.toMillis(),baseMutations:x,mutations:U}}(this.serializer,this.userId,c),h=[],p=new Ve((m,y)=>ce(m.canonicalString(),y.canonicalString()));for(let m of i){let y=LA(this.userId,m.key.path,a);p=p.add(m.key.path.popLast()),h.push(s.put(l)),h.push(o.put(y,Lj))}return p.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=c.keys()}),S.waitFor(h).next(()=>c)})}lookupMutationBatch(e,t){return fi(e).get(t).next(r=>r?(J(r.userId===this.userId),po(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?S.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return fi(e).J({index:"userMutationsIndex",range:i},(s,a,c)=>{a.userId===this.userId&&(J(a.batchId>=r),o=po(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return fi(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return fi(e).U("userMutationsIndex",t).next(r=>r.map(i=>po(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=Uh(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Zs(e).J({range:i},(s,a,c)=>{let[l,h,p]=s,m=tr(h);if(l===this.userId&&t.path.isEqual(m))return fi(e).get(p).next(y=>{if(!y)throw Y();J(y.userId===this.userId),o.push(po(this.serializer,y))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ve(ce),i=[];return t.forEach(o=>{let s=Uh(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=Zs(e).J({range:a},(l,h,p)=>{let[m,y,D]=l,A=tr(y);m===this.userId&&o.path.isEqual(A)?r=r.add(D):p.done()});i.push(c)}),S.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=Uh(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Ve(ce);return Zs(e).J({range:s},(c,l,h)=>{let[p,m,y]=c,D=tr(m);p===this.userId&&r.isPrefixOf(D)?D.length===i&&(a=a.add(y)):h.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(fi(e).get(o).next(s=>{if(s===null)throw Y();J(s.userId===this.userId),r.push(po(this.serializer,s))}))}),S.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Rx(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),S.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return S.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Zs(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=tr(o[1]);i.push(c)}else a.done()}).next(()=>{J(i.length===0)})})}containsKey(e,t){return Nx(e,this.userId,t)}Nn(e){return Px(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function Nx(n,e,t){let r=Uh(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Zs(n).J({range:o,H:!0},(a,c,l)=>{let[h,p,m]=a;h===e&&p===i&&(s=!0),l.done()}).next(()=>s)}function fi(n){return yt(n,"mutations")}function Zs(n){return yt(n,"documentMutations")}function Px(n){return yt(n,"mutationQueues")}var la=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var E_=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new la(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>ne.fromTimestamp(new Qe(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Gs(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(J(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return Gs(e).J((s,a)=>{let c=cu(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>S.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Gs(e).J((r,i)=>{let o=cu(i);t(o)})}qn(e){return lA(e).get("targetGlobalKey").next(t=>(J(t!==null),t))}Qn(e,t){return lA(e).put("targetGlobalKey",t)}Kn(e,t){return Gs(e).put(Ax(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=Io(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Gs(e).J({range:i,index:"queryTargetsIndex"},(s,a,c)=>{let l=cu(a);Fu(t,l.target)&&(o=l,c.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=pi(e);return t.forEach(s=>{let a=Gt(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),S.waitFor(i)}removeMatchingKeys(e,t,r){let i=pi(e);return S.forEach(t,o=>{let s=Gt(o.path);return S.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=pi(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=pi(e),o=ue();return i.J({range:r,H:!0},(s,a,c)=>{let l=tr(s[1]),h=new z(l);o=o.add(h)}).next(()=>o)}containsKey(e,t){let r=Gt(t.path),i=IDBKeyRange.bound([r],[NA(r)],!1,!0),o=0;return pi(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],c,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return Gs(e).get(t).next(r=>r?cu(r):null)}};function Gs(n){return yt(n,"targets")}function lA(n){return yt(n,"targetGlobal")}function pi(n){return yt(n,"targetDocuments")}function dA([n,e],[t,r]){let i=ce(n,t);return i===0?ce(e,r):i}var I_=class{constructor(e){this.Un=e,this.buffer=new Ve(dA),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();dA(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},C_=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){V("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>N(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){xi(t)?V("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield Ai(t)}yield this.Hn(3e5)}))}},b_=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return S.resolve(fn.oe);let r=new I_(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(V("LruGarbageCollector","Garbage collection skipped; disabled"),S.resolve(uA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(V("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),uA):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,s,a,c,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(V("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Ws()<=Hn.DEBUG&&V("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(l-c)+`ms
Total Duration: ${l-h}ms`),S.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function PB(n,e){return new b_(n,e)}var D_=class{constructor(e,t){this.db=e,this.garbageCollector=PB(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return Lh(e,r)}removeReference(e,t,r){return Lh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Lh(e,t)}nr(e,t){return function(i,o){let s=!1;return Px(i).Y(a=>Nx(i,a,o).next(c=>(c&&(s=!0),S.resolve(!c)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=t){let c=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,ne.min()),pi(e).delete(function(p){return[0,Gt(p.path)]}(s))))});i.push(c)}}).next(()=>S.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Lh(e,t)}tr(e,t){let r=pi(e),i,o=fn.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:l})=>{s===0?(o!==fn.oe&&t(new z(tr(i)),o),o=l,i=c):o=fn.oe}).next(()=>{o!==fn.oe&&t(new z(tr(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Lh(n,e){return pi(n).put(function(r,i){return{targetId:0,path:Gt(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var gf=class{constructor(){this.changes=new cr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ht.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?S.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var T_=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return lo(e).put(r)}removeEntry(e,t,r){return lo(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],uf(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=ht.newInvalidDocument(t);return lo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ou(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:ht.newInvalidDocument(t)};return lo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ou(t))},(i,o)=>{r={document:this.ir(t,o),size:ff(o)}}).next(()=>r)}getEntries(e,t){let r=rn();return this._r(e,t,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,t){let r=rn(),i=new He(z.comparator);return this._r(e,t,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,ff(s))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return S.resolve();let i=new Ve(pA);t.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(ou(i.first()),ou(i.last())),s=i.getIterator(),a=s.getNext();return lo(e).J({index:"documentKeyIndex",range:o},(c,l,h)=>{let p=z.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&pA(a,p)<0;)r(a,null),a=s.getNext();a&&a.isEqual(p)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?h.$(ou(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),uf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return lo(e).U(IDBKeyRange.bound(a,c,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let h=rn();for(let p of l){let m=this.ir(z.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(Lu(t,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,t,r,i){let o=rn(),s=fA(t,r),a=fA(t,Dn.max());return lo(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,l,h)=>{let p=this.ir(z.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(p.key,p),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new S_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return hA(e).get("remoteDocumentGlobalKey").next(t=>(J(!!t),t))}rr(e,t){return hA(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=MB(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(ne.min())))return r}return ht.newInvalidDocument(e)}};function kx(n){return new T_(n)}var S_=class extends gf{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new cr(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Ve((o,s)=>ce(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=XS(this.cr.serializer,s);i=i.add(o.path.popLast());let l=ff(c);r+=l-a.size,t.push(this.cr.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=XS(this.cr.serializer,s.convertToNoDocument(ne.min()));t.push(this.cr.addEntry(e,o,c))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),S.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function hA(n){return yt(n,"remoteDocumentGlobal")}function lo(n){return yt(n,"remoteDocumentsV14")}function ou(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function fA(n,e){let t=e.documentKey.path.toArray();return[n,uf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function pA(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=ce(t[o],r[o]),i)return i;return i=ce(t.length,r.length),i||(i=ce(t[t.length-2],r[r.length-2]),i||ce(t[t.length-1],r[r.length-1]))}var A_=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var mf=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&du(r.mutation,i,pn.empty(),Qe.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ue()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ue()){let i=nr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=au();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=nr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ue()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=rn(),s=lu(),a=function(){return lu()}();return t.forEach((c,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Bn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),du(h.mutation,l,h.mutation.getFieldMask(),Qe.now())):s.set(l.key,pn.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new A_(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=lu(),i=new He((s,a)=>s-a),o=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let h=r.get(c)||pn.empty();h=a.applyToLocalView(l,h),r.set(c,h);let p=(i.get(a.batchId)||ue()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,h=c.value,p=ix();h.forEach(m=>{if(!o.has(m)){let y=dx(t.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return S.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return z.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):kw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):S.resolve(nr()),a=-1,c=o;return s.next(l=>S.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?S.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,ue())).next(h=>({batchId:a,changes:rx(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new z(t)).next(r=>{let i=au();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=au();return this.indexManager.getCollectionParents(e,o).next(a=>S.forEach(a,c=>{let l=function(p,m){return new jn(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,ht.newInvalidDocument(h)))});let a=au();return s.forEach((c,l)=>{let h=o.get(c);h!==void 0&&du(h.mutation,l,pn.empty(),Qe.now()),Lu(t,l)&&(a=a.insert(c,l))}),a})}};var x_=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return S.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:it(i.createTime)}}(t)),S.resolve()}getNamedQuery(e,t){return S.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:Lw(i.bundledQuery),readTime:it(i.readTime)}}(t)),S.resolve()}};var M_=class{constructor(){this.overlays=new He(z.comparator),this.Ir=new Map}getOverlay(e,t){return S.resolve(this.overlays.get(t))}getOverlays(e,t){let r=nr();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),S.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),S.resolve()}getOverlaysForCollection(e,t,r){let i=nr(),o=t.length+1,s=new z(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return S.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new He((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=nr(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=nr(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return S.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Iu(t,r));let o=this.Ir.get(t);o===void 0&&(o=ue(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var R_=class{constructor(){this.sessionToken=ot.EMPTY_BYTE_STRING}getSessionToken(e){return S.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,S.resolve()}};var Au=class{constructor(){this.Tr=new Ve(lt.Er),this.dr=new Ve(lt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new lt(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new lt(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new z(new Ce([])),r=new lt(t,e),i=new lt(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new z(new Ce([])),r=new lt(t,e),i=new lt(t,e+1),o=ue();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new lt(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},lt=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return z.comparator(e.key,t.key)||ce(e.wr,t.wr)}static Ar(e,t){return ce(e.wr,t.wr)||z.comparator(e.key,t.key)}};var N_=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ve(lt.Er)}checkEmpty(e){return S.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Eu(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new lt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return S.resolve(s)}lookupMutationBatch(e,t){return S.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return S.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return S.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return S.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new lt(t,0),i=new lt(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),S.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ve(ce);return t.forEach(i=>{let o=new lt(i,0),s=new lt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),S.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;z.isDocumentKey(o)||(o=o.child(""));let s=new lt(new z(o),0),a=new Ve(ce);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},s),S.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){J(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return S.forEach(t.mutations,i=>{let o=new lt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new lt(t,0),i=this.br.firstAfterOrEqual(r);return S.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,S.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var P_=class{constructor(e){this.Mr=e,this.docs=function(){return new He(z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return S.resolve(r?r.document.mutableCopy():ht.newInvalidDocument(t))}getEntries(e,t){let r=rn();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():ht.newInvalidDocument(i))}),S.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=rn(),s=t.path,a=new z(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:h}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||xw(kA(h),r)<=0||(i.has(h.key)||Lu(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return S.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Y()}Or(e,t){return S.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new k_(this)}getSize(e){return S.resolve(this.size)}},k_=class extends gf{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),S.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var O_=class{constructor(e){this.persistence=e,this.Nr=new cr(t=>Io(t),Fu),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Au,this.targetCount=0,this.kr=la.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),S.resolve()}getLastRemoteSnapshotVersion(e){return S.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return S.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),S.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),S.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new la(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,S.resolve()}updateTargetData(e,t){return this.Kn(t),S.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,S.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),S.waitFor(o).next(()=>i)}getTargetCount(e){return S.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return S.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),S.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),S.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),S.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return S.resolve(r)}containsKey(e,t){return S.resolve(this.Br.containsKey(t))}};var yf=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new fn(0),this.Kr=!1,this.Kr=!0,this.$r=new R_,this.referenceDelegate=e(this),this.Ur=new O_(this),this.indexManager=new __,this.remoteDocumentCache=function(i){return new P_(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new cf(t),this.Gr=new x_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new M_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new N_(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){V("MemoryPersistence","Starting transaction:",e);let i=new F_(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return S.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},F_=class extends Qh{constructor(e){super(),this.currentSequenceNumber=e}},vf=class n{constructor(e){this.persistence=e,this.Jr=new Au,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw Y()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),S.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),S.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),S.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return S.forEach(this.Xr,r=>{let i=z.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,ne.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return S.or([()=>S.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var V_=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new Yh("createOrUpgrade",t);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",MS,{unique:!0}),c.createObjectStore("documentMutations")}(e),gA(e),function(c){c.createObjectStore("remoteDocuments")}(e));let s=S.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),gA(e)),s=s.next(()=>function(c){let l=c.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ne.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(c,l){return l.store("mutations").U().next(h=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",MS,{unique:!0});let p=l.store("mutations"),m=h.map(y=>p.put(y));return S.waitFor(m)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:Yj});l.createIndex("collectionPathOverlayIndex",Zj,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",Jj,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:jj});l.createIndex("documentKeyIndex",Bj),l.createIndex("collectionGroupIndex",Uj)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:Gj}).createIndex("sequenceNumberIndex",Wj,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:Kj}).createIndex("documentKeyIndex",Qj,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=ff(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>S.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>S.forEach(a,c=>{J(c.userId===o.userId);let l=po(this.serializer,c);return Rx(e,o.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let c=new Ce(s),l=function(p){return[0,Gt(p)]}(c);o.push(t.get(l).next(h=>h?S.resolve():(p=>t.put({targetId:0,path:Gt(p),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>S.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:zj});let r=t.store("collectionParents"),i=new Su,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:Gt(c)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let c=new Ce(s);return o(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,c],l)=>{let h=tr(a);return o(h.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let o=cu(i),s=Ax(this.serializer,o);return t.put(s)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),c=function(p){return p.document?new z(Ce.fromString(p.document.name).popFirst(5)):p.noDocument?z.fromSegments(p.noDocument.path):p.unknownDocument?z.fromSegments(p.unknownDocument.path):Y()}(s).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>S.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=kx(this.serializer),o=new yf(vf.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(c=>{var l;let h=(l=a.get(c.userId))!==null&&l!==void 0?l:ue();po(this.serializer,c).keys().forEach(p=>h=h.add(p)),a.set(c.userId,h)}),S.forEach(a,(c,l)=>{let h=new dt(l),p=lf.lt(this.serializer,h),m=o.getIndexManager(h),y=pf.lt(h,this.serializer,m,o.referenceDelegate);return new mf(i,y,p,m).recalculateAndSaveOverlaysForDocumentKeys(new mu(t,fn.oe),c).next()})})}};function gA(n){n.createObjectStore("targetDocuments",{keyPath:Hj}).createIndex("documentTargetsIndex",qj,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",$j,{unique:!0}),n.createObjectStore("targetGlobal")}var Dv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",L_=class n{constructor(e,t,r,i,o,s,a,c,l,h,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=h,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!n.D())throw new F(R.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new D_(this,i),this.Ai=t+"main",this.serializer=new cf(c),this.Ri=new _i(this.Ai,this.hi,new V_(this.serializer)),this.$r=new h_,this.Ur=new E_(this.referenceDelegate,this.serializer),this.remoteDocumentCache=kx(this.serializer),this.Gr=new d_,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&nt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new F(R.FAILED_PRECONDITION,Dv);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new fn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>N(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>N(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>N(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>jh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(xi(e))return V("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return V("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return su(e).get("owner").next(t=>S.resolve(this.vi(t)))}Ci(e){return jh(e).delete(this.clientId)}Fi(){return N(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=yt(t,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return S.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?S.resolve(!0):su(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new F(R.FAILED_PRECONDITION,Dv);return!1}}return!(!this.networkEnabled||!this.inForeground)||jh(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&V("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return N(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new mu(e,fn.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>jh(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return pf.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new w_(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return lf.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){V("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(c){return c===17?tB:c===16?eB:c===15?Rw:c===14?UA:c===13?BA:c===12?Xj:c===11?jA:void Y()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new mu(a,this.Qr?this.Qr.next():fn.oe),t==="readwrite-primary"?this.wi(s).next(c=>!!c||this.Si(s)).next(c=>{if(!c)throw nt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new F(R.FAILED_PRECONDITION,OA);return r(s)}).next(c=>this.Di(s).next(()=>c)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return su(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new F(R.FAILED_PRECONDITION,Dv)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return su(e).put("owner",t)}static D(){return _i.D()}bi(e){let t=su(e);return t.get("owner").next(r=>this.vi(r)?(V("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):S.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(nt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;kp()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return V("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return nt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){nt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function su(n){return yt(n,"owner")}function jh(n){return yt(n,"clientMetadata")}function Bw(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var j_=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ue(),i=ue();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var B_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var _f=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return kp()?8:FA(Ka())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new B_;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Ws()<=Hn.DEBUG&&V("QueryEngine","SDK will not create cache indexes for query:",Ks(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),S.resolve()):(Ws()<=Hn.DEBUG&&V("QueryEngine","Query:",Ks(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ws()<=Hn.DEBUG&&V("QueryEngine","The SDK decides to create cache indexes for query:",Ks(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wt(t))):S.resolve())}Yi(e,t){if($S(t))return S.resolve(null);let r=Wt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=rf(t,null,"F"),r=Wt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ue(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(t,a);return this.ns(t,l,s,c.readTime)?this.Yi(e,rf(t,null,"F")):this.rs(e,l,t,c)}))})))}Zi(e,t,r,i){return $S(t)||i.isEqual(ne.min())?S.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?S.resolve(null):(Ws()<=Hn.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ks(t)),this.rs(e,s,t,PA(i,-1)).next(a=>a))})}ts(e,t){let r=new Ve(tx(e));return t.forEach((i,o)=>{Lu(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return Ws()<=Hn.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",Ks(t)),this.Ji.getDocumentsMatchingQuery(e,t,Dn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var U_=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new He(ce),this._s=new cr(o=>Io(o),Fu),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mf(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function Ox(n,e,t,r){return new U_(n,e,t,r)}function Fx(n,e){return N(this,null,function*(){let t=q(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=ue();for(let l of i){s.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function kB(n,e){let t=q(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,h){let p=l.batch,m=p.keys(),y=S.resolve();return m.forEach(D=>{y=y.next(()=>h.getEntry(c,D)).next(A=>{let x=l.docVersions.get(D);J(x!==null),A.version.compareTo(x)<0&&(p.applyToRemoteDocument(A,l),A.isValidDocument()&&(A.setReadTime(l.commitVersion),h.addEntry(A)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(c,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=ue();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Vx(n){let e=q(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function OB(n,e){let t=q(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(ot.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(A,x,U){return A.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0}(m,y,h)&&a.push(t.Ur.updateTargetData(o,y))});let c=rn(),l=ue();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(Lx(o,s,e.documentUpdates).next(h=>{c=h.Ps,l=h.Is})),!r.isEqual(ne.min())){let h=t.Ur.getLastRemoteSnapshotVersion(o).next(p=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return S.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(t.os=i,o))}function Lx(n,e,t){let r=ue(),i=ue();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=rn();return t.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ne.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):V("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:s,Is:i}})}function FB(n,e){let t=q(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function da(n,e){let t=q(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,S.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new ua(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function ha(n,e,t){return N(this,null,function*(){let r=q(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!xi(s))throw s;V("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function wf(n,e,t){let r=q(n),i=ne.min(),o=ue();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,l,h){let p=q(c),m=p._s.get(h);return m!==void 0?S.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,s,Wt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:ne.min(),t?o:ue())).next(a=>(Ux(r,ex(e),a),{documents:a,Ts:o})))}function jx(n,e){let t=q(n),r=q(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function Bx(n,e){let t=q(n),r=t.us.get(e)||ne.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,PA(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Ux(t,e,i),i))}function Ux(n,e,t){let r=n.us.get(e)||ne.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}function VB(n,e,t,r){return N(this,null,function*(){let i=q(n),o=ue(),s=rn();for(let l of t){let h=e.Es(l.metadata.name);l.document&&(o=o.add(h));let p=e.ds(l);p.setReadTime(e.As(l.metadata.readTime)),s=s.insert(h,p)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),c=yield da(i,function(h){return Wt(wa(Ce.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>Lx(l,a,s).next(h=>(a.apply(l),h)).next(h=>i.Ur.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.Ur.addMatchingKeys(l,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.Ps,h.Is)).next(()=>h.Ps)))})}function LB(r,i){return N(this,arguments,function*(n,e,t=ue()){let o=yield da(n,Wt(Lw(e.bundledQuery))),s=q(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=it(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken(ot.EMPTY_BYTE_STRING,c);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,t,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function mA(n,e){return`firestore_clients_${n}_${e}`}function yA(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Tv(n,e){return`firestore_targets_${n}_${e}`}var Ef=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new F(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(nt("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},hu=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new F(r.error.code,r.error.message))),o?new n(e,r.state,i):(nt("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},If=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=Ow();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=VA(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(nt("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},$_=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(nt("SharedClientState",`Failed to parse online state: ${e}`),null)}},xu=class{constructor(){this.activeTargetIds=Ow()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},fu=class{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new He(ce),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=mA(this.persistenceKey,this.ps),this.vs=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new xu),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return N(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(mA(this.persistenceKey,r));if(i){let o=If.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(Tv(this.persistenceKey,e));if(i){let o=hu.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Tv(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return V("SharedClientState","READ",e,t),t}setItem(e,t){V("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){V("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(V("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void nt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>N(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(o){let s=fn.oe;if(o!=null)try{let a=JSON.parse(o);J(typeof a=="number"),s=a}catch(a){nt("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==fn.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new Ef(this.currentUser,e,t,r),o=yA(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let t=yA(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=Tv(this.persistenceKey,e),o=new hu(e,t,r);this.setItem(i,o.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return If.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Ef.Rs(new dt(o),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return hu.Rs(i,t)}Ls(e){return $_.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return N(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);V("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=Ow();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},Cf=class{constructor(){this.so=new xu,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new xu,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var H_=class{_o(e){}shutdown(){}};var bf=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){V("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){V("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Bh=null;function Sv(){return Bh===null?Bh=function(){return 268435456+Math.round(2147483648*Math.random())}():Bh++,"0x"+Bh.toString(16)}var jB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var q_=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Pt="WebChannelConnection",z_=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=Sv(),c=this.xo(t,r.toUriEncodedString());V("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,c,l,i).then(h=>(V("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw Ln("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",c,"request:",i),h})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+_a}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=jB[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=Sv();return new Promise((s,a)=>{let c=new _v;c.setWithCredentials(!0),c.listenOnce(wv.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case nu.NO_ERROR:let h=c.getResponseJson();V(Pt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case nu.TIMEOUT:V(Pt,`RPC '${e}' ${o} timed out`),a(new F(R.DEADLINE_EXCEEDED,"Request time out"));break;case nu.HTTP_ERROR:let p=c.getStatus();if(V(Pt,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);let y=m?.error;if(y&&y.status&&y.message){let D=function(x){let U=x.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(U)>=0?U:R.UNKNOWN}(y.status);a(new F(D,y.message))}else a(new F(R.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new F(R.UNAVAILABLE,"Connection failed."));break;default:Y()}}finally{V(Pt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);V(Pt,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=Sv(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Cv(),a=Iv(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=o.join("");V(Pt,`Creating RPC '${e}' stream ${i}: ${h}`,c);let p=s.createWebChannel(h,c),m=!1,y=!1,D=new q_({Io:x=>{y?V(Pt,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(m||(V(Pt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),V(Pt,`RPC '${e}' stream ${i} sending:`,x),p.send(x))},To:()=>p.close()}),A=(x,U,W)=>{x.listen(U,j=>{try{W(j)}catch(X){setTimeout(()=>{throw X},0)}})};return A(p,$s.EventType.OPEN,()=>{y||(V(Pt,`RPC '${e}' stream ${i} transport opened.`),D.yo())}),A(p,$s.EventType.CLOSE,()=>{y||(y=!0,V(Pt,`RPC '${e}' stream ${i} transport closed`),D.So())}),A(p,$s.EventType.ERROR,x=>{y||(y=!0,Ln(Pt,`RPC '${e}' stream ${i} transport errored:`,x),D.So(new F(R.UNAVAILABLE,"The operation could not be completed")))}),A(p,$s.EventType.MESSAGE,x=>{var U;if(!y){let W=x.data[0];J(!!W);let j=W,X=j.error||((U=j[0])===null||U===void 0?void 0:U.error);if(X){V(Pt,`RPC '${e}' stream ${i} received error:`,X);let ie=X.status,te=function(w){let I=ut[w];if(I!==void 0)return px(I)}(ie),E=X.message;te===void 0&&(te=R.INTERNAL,E="Unknown error status: "+ie+" with message "+X.message),y=!0,D.So(new F(te,E)),p.close()}else V(Pt,`RPC '${e}' stream ${i} received:`,W),D.bo(W)}}),A(a,Ev.STAT_EVENT,x=>{x.stat===Fh.PROXY?V(Pt,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===Fh.NOPROXY&&V(Pt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{D.wo()},0),D}};function $x(){return typeof window<"u"?window:null}function zh(){return typeof document<"u"?document:null}function ju(n){return new s_(n,!0)}var Mu=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&V("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Df=class{constructor(e,t,r,i,o,s,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Mu(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return N(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return N(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return N(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===R.RESOURCE_EXHAUSTED?(nt(t.toString()),nt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new F(R.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>N(this,null,function*(){this.state=0,this.start()}))}I_(e){return V("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(V("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},G_=class extends Df{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=CB(this.serializer,e),r=function(o){if(!("targetChange"in o))return ne.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ne.min():s.readTime?it(s.readTime):ne.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=u_(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=tf(c)?{documents:Ix(o,c)}:{query:Cx(o,c)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=mx(o,s.resumeToken);let l=a_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ne.min())>0){a.readTime=ca(o,s.snapshotVersion.toTimestamp());let l=a_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=DB(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=u_(this.serializer),t.removeTarget=e,this.a_(t)}},W_=class extends Df{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return J(!!e.streamToken),this.lastStreamToken=e.streamToken,J(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){J(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=bB(e.writeResults,e.commitTime),r=it(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=u_(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Tu(this.serializer,r))};this.a_(t)}};var K_=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new F(R.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,c_(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new F(R.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,c_(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new F(R.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Q_=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(nt(t),this.D_=!1):V("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Y_=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>N(this,null,function*(){Mi(this)&&(V("RemoteStore","Restarting streams for network reachability change."),yield function(c){return N(this,null,function*(){let l=q(c);l.L_.add(4),yield Ea(l),l.q_.set("Unknown"),l.L_.delete(4),yield Bu(l)})}(this))}))}),this.q_=new Q_(r,i)}};function Bu(n){return N(this,null,function*(){if(Mi(n))for(let e of n.B_)yield e(!0)})}function Ea(n){return N(this,null,function*(){for(let e of n.B_)yield e(!1)})}function Gf(n,e){let t=q(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Hw(t)?$w(t):Ca(t).r_()&&Uw(t,e))}function fa(n,e){let t=q(n),r=Ca(t);t.N_.delete(e),r.r_()&&Hx(t,e),t.N_.size===0&&(r.r_()?r.o_():Mi(t)&&t.q_.set("Unknown"))}function Uw(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ca(n).A_(e)}function Hx(n,e){n.Q_.xe(e),Ca(n).R_(e)}function $w(n){n.Q_=new o_({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Ca(n).start(),n.q_.v_()}function Hw(n){return Mi(n)&&!Ca(n).n_()&&n.N_.size>0}function Mi(n){return q(n).L_.size===0}function qx(n){n.Q_=void 0}function BB(n){return N(this,null,function*(){n.q_.set("Online")})}function UB(n){return N(this,null,function*(){n.N_.forEach((e,t)=>{Uw(n,e)})})}function $B(n,e){return N(this,null,function*(){qx(n),Hw(n)?(n.q_.M_(e),$w(n)):n.q_.set("Unknown")})}function HB(n,e,t){return N(this,null,function*(){if(n.q_.set("Online"),e instanceof sf&&e.state===2&&e.cause)try{yield function(i,o){return N(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){V("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Tf(n,r)}else if(e instanceof ta?n.Q_.Ke(e):e instanceof of?n.Q_.He(e):n.Q_.We(e),!t.isEqual(ne.min()))try{let r=yield Vx(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let h=o.N_.get(l);h&&o.N_.set(l,h.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let h=o.N_.get(c);if(!h)return;o.N_.set(c,h.withResumeToken(ot.EMPTY_BYTE_STRING,h.snapshotVersion)),Hx(o,c);let p=new ua(h.target,c,l,h.sequenceNumber);Uw(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){V("RemoteStore","Failed to raise snapshot:",r),yield Tf(n,r)}})}function Tf(n,e,t){return N(this,null,function*(){if(!xi(e))throw e;n.L_.add(1),yield Ea(n),n.q_.set("Offline"),t||(t=()=>Vx(n.localStore)),n.asyncQueue.enqueueRetryable(()=>N(this,null,function*(){V("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Bu(n)}))})}function zx(n,e){return e().catch(t=>Tf(n,t,e))}function Ia(n){return N(this,null,function*(){let e=q(n),t=Si(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;qB(e);)try{let i=yield FB(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,zB(e,i)}catch(i){yield Tf(e,i)}Gx(e)&&Wx(e)})}function qB(n){return Mi(n)&&n.O_.length<10}function zB(n,e){n.O_.push(e);let t=Si(n);t.r_()&&t.V_&&t.m_(e.mutations)}function Gx(n){return Mi(n)&&!Si(n).n_()&&n.O_.length>0}function Wx(n){Si(n).start()}function GB(n){return N(this,null,function*(){Si(n).p_()})}function WB(n){return N(this,null,function*(){let e=Si(n);for(let t of n.O_)e.m_(t.mutations)})}function KB(n,e,t){return N(this,null,function*(){let r=n.O_.shift(),i=n_.from(r,e,t);yield zx(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Ia(n)})}function QB(n,e){return N(this,null,function*(){e&&Si(n).V_&&(yield function(r,i){return N(this,null,function*(){if(function(s){return fx(s)&&s!==R.ABORTED}(i.code)){let o=r.O_.shift();Si(r).s_(),yield zx(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Ia(r)}})}(n,e)),Gx(n)&&Wx(n)})}function vA(n,e){return N(this,null,function*(){let t=q(n);t.asyncQueue.verifyOperationInProgress(),V("RemoteStore","RemoteStore received new credentials");let r=Mi(t);t.L_.add(3),yield Ea(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Bu(t)})}function Z_(n,e){return N(this,null,function*(){let t=q(n);e?(t.L_.delete(2),yield Bu(t)):e||(t.L_.add(2),yield Ea(t),t.q_.set("Unknown"))})}function Ca(n){return n.K_||(n.K_=function(t,r,i){let o=q(t);return o.w_(),new G_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:BB.bind(null,n),Ro:UB.bind(null,n),mo:$B.bind(null,n),d_:HB.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.K_.s_(),Hw(n)?$w(n):n.q_.set("Unknown")):(yield n.K_.stop(),qx(n))}))),n.K_}function Si(n){return n.U_||(n.U_=function(t,r,i){let o=q(t);return o.w_(),new W_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:GB.bind(null,n),mo:QB.bind(null,n),f_:WB.bind(null,n),g_:KB.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.U_.s_(),yield Ia(n)):(yield n.U_.stop(),n.O_.length>0&&(V("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var J_=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new mt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function ba(n,e){if(nt("AsyncQueue",`${e}: ${n}`),xi(n))return new F(R.UNAVAILABLE,`${e}: ${n}`);throw n}var Sf=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||z.comparator(t.key,r.key):(t,r)=>z.comparator(t.key,r.key),this.keyedMap=au(),this.sortedSet=new He(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Af=class{constructor(){this.W_=new He(z.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Y():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},pa=class n{constructor(e,t,r,i,o,s,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Sf.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var X_=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},ew=class{constructor(){this.queries=_A(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=q(t),o=i.queries;i.queries=_A(),o.forEach((s,a)=>{for(let c of a.j_)c.onError(r)})})(this,new F(R.ABORTED,"Firestore shutting down"))}};function _A(){return new cr(n=>XA(n),Vu)}function qw(n,e){return N(this,null,function*(){let t=q(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new X_,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=ba(s,`Initialization of query '${Ks(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&Gw(t)})}function zw(n,e){return N(this,null,function*(){let t=q(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function YB(n,e){let t=q(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&Gw(t)}function ZB(n,e,t){let r=q(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function Gw(n){n.Y_.forEach(e=>{e.next()})}var tw,wA;(wA=tw||(tw={})).ea="default",wA.Cache="cache";var Ru=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new pa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=pa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==tw.Cache}};var nw=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var xf=class{constructor(e){this.serializer=e}Es(e){return ir(this.serializer,e)}ds(e){return e.metadata.exists?Ex(this.serializer,e.document,!1):ht.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return it(e)}},rw=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Kx(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=Ce.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new xf(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||ue()).add(o);t.set(s,a)}}return t}complete(){return N(this,null,function*(){let e=yield VB(this.localStore,new xf(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield LB(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function Kx(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var Mf=class{constructor(e){this.key=e}},Rf=class{constructor(e){this.key=e}},Nf=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ue(),this.mutatedKeys=ue(),this.Aa=tx(e),this.Ra=new Sf(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Af,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=Lu(this.query,p)?p:null,D=!!m&&this.mutatedKeys.has(m.key),A=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),x=!1;m&&y?m.data.isEqual(y.data)?D!==A&&(r.track({type:3,doc:y}),x=!0):this.ga(m,y)||(r.track({type:2,doc:y}),x=!0,(c&&this.Aa(y,c)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),x=!0):m&&!y&&(r.track({type:1,doc:m}),x=!0,(c||l)&&(a=!0)),x&&(y?(s=s.add(y),o=A?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,p)=>function(y,D){let A=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y()}};return A(y)-A(D)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,s.length!==0||l?{snapshot:new pa(this.query,e.Ra,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Af,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ue(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Rf(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Mf(r))}),t}ba(e){this.Ta=e.Ts,this.da=ue();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return pa.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},iw=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},ow=class{constructor(e){this.key=e,this.va=!1}},sw=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new cr(a=>XA(a),Vu),this.Ma=new Map,this.xa=new Set,this.Oa=new He(z.comparator),this.Na=new Map,this.La=new Au,this.Ba={},this.ka=new Map,this.qa=la.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function JB(n,e,t=!0){return N(this,null,function*(){let r=Wf(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield Qx(r,e,t,!0),i})}function XB(n,e){return N(this,null,function*(){let t=Wf(n);yield Qx(t,e,!0,!1)})}function Qx(n,e,t,r){return N(this,null,function*(){let i=yield da(n.localStore,Wt(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield Ww(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&Gf(n.remoteStore,i),a})}function Ww(n,e,t,r,i){return N(this,null,function*(){n.Ka=(p,m,y)=>function(A,x,U,W){return N(this,null,function*(){let j=x.view.ma(U);j.ns&&(j=yield wf(A.localStore,x.query,!1).then(({documents:E})=>x.view.ma(E,j)));let X=W&&W.targetChanges.get(x.targetId),ie=W&&W.targetMismatches.get(x.targetId)!=null,te=x.view.applyChanges(j,A.isPrimaryClient,X,ie);return aw(A,x.targetId,te.wa),te.snapshot})}(n,p,m,y);let o=yield wf(n.localStore,e,!0),s=new Nf(e,o.Ts),a=s.ma(o.documents),c=bu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,c);aw(n,t,l.wa);let h=new iw(e,t,s);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function eU(n,e,t){return N(this,null,function*(){let r=q(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Vu(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield ha(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&fa(r.remoteStore,i.targetId),ga(r,i.targetId)}).catch(Ai))):(ga(r,i.targetId),yield ha(r.localStore,i.targetId,!0))})}function tU(n,e){return N(this,null,function*(){let t=q(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),fa(t.remoteStore,r.targetId))})}function nU(n,e,t){return N(this,null,function*(){let r=Zw(n);try{let i=yield function(s,a){let c=q(s),l=Qe.now(),h=a.reduce((y,D)=>y.add(D.key),ue()),p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let D=rn(),A=ue();return c.cs.getEntries(y,h).next(x=>{D=x,D.forEach((U,W)=>{W.isValidDocument()||(A=A.add(U))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,D)).next(x=>{p=x;let U=[];for(let W of a){let j=mB(W,p.get(W.key).overlayedDocument);j!=null&&U.push(new Bn(W.key,j,GA(j.value.mapValue),tt.exists(!0)))}return c.mutationQueue.addMutationBatch(y,l,U,a)}).next(x=>{m=x;let U=x.applyToLocalDocumentSet(p,A);return c.documentOverlayCache.saveOverlays(y,x.batchId,U)})}).then(()=>({batchId:m.batchId,changes:rx(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let l=s.Ba[s.currentUser.toKey()];l||(l=new He(ce)),l=l.insert(a,c),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield Fr(r,i.changes),yield Ia(r.remoteStore)}catch(i){let o=ba(i,"Failed to persist write");t.reject(o)}})}function Yx(n,e){return N(this,null,function*(){let t=q(n);try{let r=yield OB(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(J(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?J(s.va):i.removedDocuments.size>0&&(J(s.va),s.va=!1))}),yield Fr(t,r,e)}catch(r){yield Ai(r)}})}function EA(n,e,t){let r=q(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=q(s);c.onlineState=a;let l=!1;c.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&Gw(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function rU(n,e,t){return N(this,null,function*(){let r=q(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new He(z.comparator);s=s.insert(o,ht.newNoDocument(o,ne.min()));let a=ue().add(o),c=new Cu(ne.min(),new Map,new He(ce),s,a);yield Yx(r,c),r.Oa=r.Oa.remove(o),r.Na.delete(e),Yw(r)}else yield ha(r.localStore,e,!1).then(()=>ga(r,e,t)).catch(Ai)})}function iU(n,e){return N(this,null,function*(){let t=q(n),r=e.batch.batchId;try{let i=yield kB(t.localStore,e);Qw(t,r,null),Kw(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Fr(t,i)}catch(i){yield Ai(i)}})}function oU(n,e,t){return N(this,null,function*(){let r=q(n);try{let i=yield function(s,a){let c=q(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return c.mutationQueue.lookupMutationBatch(l,a).next(p=>(J(p!==null),h=p.keys(),c.mutationQueue.removeMutationBatch(l,p))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>c.localDocuments.getDocuments(l,h))})}(r.localStore,e);Qw(r,e,t),Kw(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Fr(r,i)}catch(i){yield Ai(i)}})}function sU(n,e){return N(this,null,function*(){let t=q(n);Mi(t.remoteStore)||V("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=q(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=ba(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function Kw(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function Qw(n,e,t){let r=q(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function ga(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||Zx(n,r)})}function Zx(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(fa(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Yw(n))}function aw(n,e,t){for(let r of t)r instanceof Mf?(n.La.addReference(r.key,e),aU(n,r)):r instanceof Rf?(V("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||Zx(n,r.key)):Y()}function aU(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(V("SyncEngine","New document in limbo: "+t),n.xa.add(r),Yw(n))}function Yw(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new z(Ce.fromString(e)),r=n.qa.next();n.Na.set(r,new ow(t)),n.Oa=n.Oa.insert(t,r),Gf(n.remoteStore,new ua(Wt(wa(t.path)),r,"TargetPurposeLimboResolution",fn.oe))}}function Fr(n,e,t){return N(this,null,function*(){let r=q(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{s.push(r.Ka(c,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(l){i.push(l);let p=j_.Wi(c.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(c,l){return N(this,null,function*(){let h=q(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>S.forEach(l,m=>S.forEach(m.$i,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>S.forEach(m.Ui,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!xi(p))throw p;V("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.os.get(m),D=y.snapshotVersion,A=y.withLastLimboFreeSnapshotVersion(D);h.os=h.os.insert(m,A)}}})}(r.localStore,o))})}function cU(n,e){return N(this,null,function*(){let t=q(n);if(!t.currentUser.isEqual(e)){V("SyncEngine","User change. New user:",e.toKey());let r=yield Fx(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(c=>{c.reject(new F(R.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Fr(t,r.hs)}})}function uU(n,e){let t=q(n),r=t.Na.get(e);if(r&&r.va)return ue().add(r.key);{let i=ue(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function lU(n,e){return N(this,null,function*(){let t=q(n),r=yield wf(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&aw(t,e.targetId,i.wa),i})}function dU(n,e){return N(this,null,function*(){let t=q(n);return Bx(t.localStore,e).then(r=>Fr(t,r))})}function hU(n,e,t,r){return N(this,null,function*(){let i=q(n),o=yield function(a,c){let l=q(a),h=q(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",p=>h.Mn(p,c).next(m=>m?l.localDocuments.getDocuments(p,m):S.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield Ia(i.remoteStore):t==="acknowledged"||t==="rejected"?(Qw(i,e,r||null),Kw(i,e),function(a,c){q(q(a).mutationQueue).On(c)}(i.localStore,e)):Y(),yield Fr(i,o)):V("SyncEngine","Cannot apply mutation batch with id: "+e)})}function fU(n,e){return N(this,null,function*(){let t=q(n);if(Wf(t),Zw(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield IA(t,r.toArray());t.Qa=!0,yield Z_(t.remoteStore,!0);for(let o of i)Gf(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(ga(t,s),ha(t.localStore,s,!0))),fa(t.remoteStore,s)}),yield i,yield IA(t,r),function(s){let a=q(s);a.Na.forEach((c,l)=>{fa(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new He(z.comparator)}(t),t.Qa=!1,yield Z_(t.remoteStore,!1)}})}function IA(n,e,t){return N(this,null,function*(){let r=q(n),i=[],o=[];for(let s of e){let a,c=r.Ma.get(s);if(c&&c.length!==0){a=yield da(r.localStore,Wt(c[0]));for(let l of c){let h=r.Fa.get(l),p=yield lU(r,h);p.snapshot&&o.push(p.snapshot)}}else{let l=yield jx(r.localStore,s);a=yield da(r.localStore,l),yield Ww(r,Jx(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function Jx(n){return JA(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function pU(n){return function(t){return q(q(t).persistence).Qi()}(q(n).localStore)}function gU(n,e,t,r){return N(this,null,function*(){let i=q(n);if(i.Qa)return void V("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield Bx(i.localStore,ex(o[0])),a=Cu.createSynthesizedRemoteEventForCurrentChange(e,t==="current",ot.EMPTY_BYTE_STRING);yield Fr(i,s,a);break}case"rejected":yield ha(i.localStore,e,!0),ga(i,e,r);break;default:Y()}})}function mU(n,e,t){return N(this,null,function*(){let r=Wf(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){V("SyncEngine","Adding an already active target "+i);continue}let o=yield jx(r.localStore,i),s=yield da(r.localStore,o);yield Ww(r,Jx(o),s.targetId,!1,s.resumeToken),Gf(r.remoteStore,s)}for(let i of t)r.Ma.has(i)&&(yield ha(r.localStore,i,!1).then(()=>{fa(r.remoteStore,i),ga(r,i)}).catch(Ai))}})}function Wf(n){let e=q(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Yx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rU.bind(null,e),e.Ca.d_=YB.bind(null,e.eventManager),e.Ca.$a=ZB.bind(null,e.eventManager),e}function Zw(n){let e=q(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=iU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oU.bind(null,e),e}function yU(n,e,t){let r=q(n);(function(o,s,a){return N(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(y,D){let A=q(y),x=it(D.createTime);return A.persistence.runTransaction("hasNewerBundle","readonly",U=>A.Gr.getBundleMetadata(U,D.id)).then(U=>!!U&&U.createTime.compareTo(x)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(Kx(c));let l=new rw(c,o.localStore,s.serializer),h=yield s.Ua();for(;h;){let m=yield l.la(h);m&&a._updateProgress(m),h=yield s.Ua()}let p=yield l.complete();return yield Fr(o,p.Ia,void 0),yield function(y,D){let A=q(y);return A.persistence.runTransaction("Save bundle","readwrite",x=>A.Gr.saveBundleMetadata(x,D))}(o.localStore,c),a._completeWith(p.progress),Promise.resolve(p.Pa)}catch(c){return Ln("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var cw=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return N(this,null,function*(){this.serializer=ju(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return Ox(this.persistence,new _f,t.initialUser,this.serializer)}Ga(t){return new yf(vf.Zr,this.serializer)}Wa(t){return new Cf}terminate(){return N(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var Pf=class n extends cw{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){yield Np(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield Zw(this.Ja.syncEngine),yield Ia(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return Ox(this.persistence,new _f,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new C_(r,e.asyncQueue,t)}Ha(e,t){let r=new Bv(t,this.persistence);return new jv(e.asyncQueue,r)}Ga(e){let t=Bw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?bn.withCacheSize(this.cacheSizeBytes):bn.DEFAULT;return new L_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,$x(),zh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new Cf}},uw=class n extends Pf{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return N(this,null,function*(){yield Np(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof fu&&(this.sharedClientState.syncEngine={no:hU.bind(null,t),ro:gU.bind(null,t),io:mU.bind(null,t),Qi:pU.bind(null,t),eo:dU.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>N(this,null,function*(){yield fU(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=$x();if(!fu.D(t))throw new F(R.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=Bw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new fu(t,e.asyncQueue,r,e.clientId,e.initialUser)}},Jw=(()=>{class n{initialize(t,r){return N(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>EA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=cU.bind(null,this.syncEngine),yield Z_(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new ew}()}createDatastore(t){let r=ju(t.databaseInfo.databaseId),i=function(s){return new z_(s)}(t.databaseInfo);return function(s,a,c,l){return new K_(s,a,c,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new Y_(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>EA(this.syncEngine,r,0),function(){return bf.D()?new bf:new H_}())}createSyncEngine(t,r){return function(o,s,a,c,l,h,p){let m=new sw(o,s,a,c,l,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return N(this,null,function*(){var t,r;yield function(o){return N(this,null,function*(){let s=q(o);V("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield Ea(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function CA(n,e=10240){let t=0;return{read(){return N(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return N(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var ma=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):nt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var lw=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new mt,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return N(this,null,function*(){return this.metadata.promise})}Ua(){return N(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return N(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new nw(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return N(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return N(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return N(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var dw=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new F(R.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return N(this,null,function*(){let s=q(i),a={documents:o.map(p=>Du(s.serializer,p))},c=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,Ce.emptyPath(),a,o.length),l=new Map;c.forEach(p=>{let m=IB(s.serializer,p);l.set(m.key.toString(),m)});let h=[];return o.forEach(p=>{let m=l.get(p.toString());J(!!m),h.push(m)}),h})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ti(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=z.fromPath(r);this.mutations.push(new wu(i,this.precondition(i)))}),yield function(r,i){return N(this,null,function*(){let o=q(r),s={writes:i.map(a=>Tu(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,Ce.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Y();t=ne.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new F(R.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ne.min())?tt.exists(!1):tt.updateTime(t):tt.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ne.min()))throw new F(R.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return tt.updateTime(t)}return tt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var hw=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new Mu(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>N(this,null,function*(){let e=new dw(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!Ou(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!fx(t)}return!1}};var fw=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=dt.UNAUTHENTICATED,this.clientId=Wh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>N(this,null,function*(){V("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(V("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new mt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=ba(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Av(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),V("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>N(this,null,function*(){r.isEqual(i)||(yield Fx(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function bA(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield Xw(n);V("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>vA(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>vA(e.remoteStore,i)),n._onlineComponents=e})}function Xw(n){return N(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){V("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Av(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===R.FAILED_PRECONDITION||i.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Ln("Error using user provided cache. Falling back to memory cache: "+t),yield Av(n,new cw)}}else V("FirestoreClient","Using default OfflineComponentProvider"),yield Av(n,new cw);return n._offlineComponents})}function Kf(n){return N(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(V("FirestoreClient","Using user provided OnlineComponentProvider"),yield bA(n,n._uninitializedComponentsProvider._online)):(V("FirestoreClient","Using default OnlineComponentProvider"),yield bA(n,new Jw))),n._onlineComponents})}function Xx(n){return Xw(n).then(e=>e.persistence)}function eE(n){return Xw(n).then(e=>e.localStore)}function eM(n){return Kf(n).then(e=>e.remoteStore)}function tE(n){return Kf(n).then(e=>e.syncEngine)}function vU(n){return Kf(n).then(e=>e.datastore)}function ya(n){return N(this,null,function*(){let e=yield Kf(n),t=e.eventManager;return t.onListen=JB.bind(null,e.syncEngine),t.onUnlisten=eU.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=XB.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=tU.bind(null,e.syncEngine),t})}function _U(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield Xx(n),t=yield eM(n);return e.setNetworkEnabled(!0),function(i){let o=q(i);return o.L_.delete(0),Bu(o)}(t)}))}function wU(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield Xx(n),t=yield eM(n);return e.setNetworkEnabled(!1),function(i){return N(this,null,function*(){let o=q(i);o.L_.add(0),yield Ea(o),o.q_.set("Offline")})}(t)}))}function EU(n,e){let t=new mt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield function(l,h){let p=q(l);return p.persistence.runTransaction("read document","readonly",m=>p.localDocuments.getDocument(m,h))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new F(R.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=ba(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield eE(n),e,t)})),t.promise}function tM(n,e,t={}){let r=new mt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,c,l){let h=new ma({next:m=>{h.Za(),s.enqueueAndForget(()=>zw(o,p));let y=m.docs.has(a);!y&&m.fromCache?l.reject(new F(R.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&c&&c.source==="server"?l.reject(new F(R.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Ru(wa(a.path),h,{includeMetadataChanges:!0,_a:!0});return qw(o,p)}(yield ya(n),n.asyncQueue,e,t,r)})),r.promise}function IU(n,e){let t=new mt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield wf(i,o,!0),c=new Nf(o,a.Ts),l=c.ma(a.documents),h=c.applyChanges(l,!1);s.resolve(h.snapshot)}catch(a){let c=ba(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield eE(n),e,t)})),t.promise}function nM(n,e,t={}){let r=new mt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,c,l){let h=new ma({next:m=>{h.Za(),s.enqueueAndForget(()=>zw(o,p)),m.fromCache&&c.source==="server"?l.reject(new F(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Ru(a,h,{includeMetadataChanges:!0,_a:!0});return qw(o,p)}(yield ya(n),n.asyncQueue,e,t,r)})),r.promise}function CU(n,e){let t=new ma(e);return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){q(i).Y_.add(o),o.next()}(yield ya(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){q(i).Y_.delete(o)}(yield ya(n),t)}))}}function bU(n,e,t,r){let i=function(s,a){let c;return c=typeof s=="string"?gx().encode(s):s,function(h,p){return new lw(h,p)}(function(h,p){if(h instanceof Uint8Array)return CA(h,p);if(h instanceof ArrayBuffer)return CA(new Uint8Array(h),p);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(t,ju(e));n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){yU(yield tE(n),i,r)}))}function DU(n,e){return n.asyncQueue.enqueue(()=>N(this,null,function*(){return function(r,i){let o=q(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield eE(n),e)}))}function rM(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var DA=new Map;function nE(n,e,t){if(!t)throw new F(R.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function rE(n,e,t,r){if(e===!0&&r===!0)throw new F(R.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function TA(n){if(!z.isDocumentKey(n))throw new F(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function SA(n){if(z.isDocumentKey(n))throw new F(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Qf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Y()}function Ae(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new F(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Qf(n);throw new F(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function iM(n,e){if(e<=0)throw new F(R.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var kf=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new F(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new F(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rM((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new F(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new F(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new F(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},To=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kf({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new F(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new F(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kf(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new xv;switch(r.type){case"firstParty":return new Pv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new F(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return N(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=DA.get(t);r&&(V("ComponentProvider","Removing Datastore"),DA.delete(t),r.terminate())}(this),Promise.resolve()}};function oM(n,e,t,r={}){var i;let o=(n=Ae(n,To))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Ln("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=dt.MOCK_USER;else{a=M0(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new F(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new dt(l)}n._authCredentials=new Mv(new Gh(a,c))}}var Dt=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},je=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new or(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},or=class n extends Dt{constructor(e,t,r){super(e,t,wa(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new je(this.firestore,null,new z(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function iE(n,e,...t){if(n=Ge(n),nE("collection","path",e),n instanceof To){let r=Ce.fromString(e,...t);return SA(r),new or(n,null,r)}{if(!(n instanceof je||n instanceof or))throw new F(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ce.fromString(e,...t));return SA(r),new or(n.firestore,null,r)}}function sM(n,e){if(n=Ae(n,To),nE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new F(R.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Dt(n,null,function(r){return new jn(Ce.emptyPath(),r)}(e))}function Uu(n,e,...t){if(n=Ge(n),arguments.length===1&&(e=Wh.newId()),nE("doc","path",e),n instanceof To){let r=Ce.fromString(e,...t);return TA(r),new je(n,null,new z(r))}{if(!(n instanceof je||n instanceof or))throw new F(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ce.fromString(e,...t));return TA(r),new je(n.firestore,n instanceof or?n.converter:null,new z(r))}}function oE(n,e){return n=Ge(n),e=Ge(e),(n instanceof je||n instanceof or)&&(e instanceof je||e instanceof or)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function sE(n,e){return n=Ge(n),e=Ge(e),n instanceof Dt&&e instanceof Dt&&n.firestore===e.firestore&&Vu(n._query,e._query)&&n.converter===e.converter}var Of=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Mu(this,"async_queue_retry"),this.Vu=()=>{let r=zh();r&&V("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=zh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=zh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new mt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return N(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!xi(e))throw e;V("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw nt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=J_.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&Y()}verifyOperationInProgress(){}wu(){return N(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function pw(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var gw=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new mt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var aM=-1,Ye=class extends To{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Of,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return N(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Of(e),this._firestoreClient=void 0,yield e}})}};function Tt(n){if(n._terminated)throw new F(R.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||cM(n),n._firestoreClient}function cM(n){var e,t,r;let i=n._freezeSettings(),o=function(a,c,l,h){return new Uv(a,c,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,rM(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new fw(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}function uM(n,e){Ln("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return dM(n,Jw.provider,{build:r=>new Pf(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function lM(n){return N(this,null,function*(){Ln("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();dM(n,Jw.provider,{build:t=>new uw(t,e.cacheSizeBytes)})})}function dM(n,e,t){if((n=Ae(n,Ye))._firestoreClient||n._terminated)throw new F(R.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new F(R.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},cM(n)}function hM(n){if(n._initialized&&!n._terminated)throw new F(R.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new mt;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{yield function(r){return N(this,null,function*(){if(!_i.D())return Promise.resolve();let i=r+"main";yield _i.delete(i)})}(Bw(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function fM(n){return function(t){let r=new mt;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return sU(yield tE(t),r)})),r.promise}(Tt(n=Ae(n,Ye)))}function pM(n){return _U(Tt(n=Ae(n,Ye)))}function gM(n){return wU(Tt(n=Ae(n,Ye)))}function mM(n,e){let t=Tt(n=Ae(n,Ye)),r=new gw;return bU(t,n._databaseId,e,r),r}function yM(n,e){return DU(Tt(n=Ae(n,Ye)),e).then(t=>t?new Dt(n,null,t.query):null)}var ur=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(ot.fromBase64String(e))}catch(t){throw new F(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Un=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new F(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var kr=class{constructor(e){this._methodName=e}};var So=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new F(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new F(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}};var Nu=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var TU=/^__.*__$/,mw=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Bn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Di(e,this.data,t,this.fieldTransforms)}},Ff=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Bn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function vM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y()}}var Vf=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Lf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(vM(this.Cu)&&TU.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},yw=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ju(e)}Qu(e,t,r,i=!1){return new Vf({Cu:e,methodName:t,qu:r,path:rt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Ro(n){let e=n._freezeSettings(),t=ju(n._databaseId);return new yw(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Yf(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);uE("Data must be an object, but it was:",s,r);let a=EM(r,s),c,l;if(o.merge)c=new pn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=Iw(e,p,t);if(!s.contains(m))throw new F(R.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);CM(h,m)||h.push(m)}c=new pn(h),l=s.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,l=s.fieldTransforms;return new mw(new kt(a),c,l)}var Pu=class n extends kr{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function _M(n,e,t){return new Vf({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var vw=class n extends kr{_toFieldTransform(e){return new Co(e.path,new Ci)}isEqual(e){return e instanceof n}},_w=class n extends kr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=_M(this,e,!0),r=this.Ku.map(o=>No(o,t)),i=new Nr(r);return new Co(e.path,i)}isEqual(e){return e instanceof n&&Op(this.Ku,e.Ku)}},ww=class n extends kr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=_M(this,e,!0),r=this.Ku.map(o=>No(o,t)),i=new Pr(r);return new Co(e.path,i)}isEqual(e){return e instanceof n&&Op(this.Ku,e.Ku)}},Ew=class n extends kr{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new bi(e.serializer,sx(e.serializer,this.$u));return new Co(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function aE(n,e,t,r){let i=n.Qu(1,e,t);uE("Data must be an object, but it was:",i,r);let o=[],s=kt.empty();Mo(r,(c,l)=>{let h=lE(e,c,t);l=Ge(l);let p=i.Nu(h);if(l instanceof Pu)o.push(h);else{let m=No(l,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new pn(o);return new Ff(s,a,i.fieldTransforms)}function cE(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[Iw(e,r,t)],c=[i];if(o.length%2!=0)throw new F(R.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(Iw(e,o[m])),c.push(o[m+1]);let l=[],h=kt.empty();for(let m=a.length-1;m>=0;--m)if(!CM(l,a[m])){let y=a[m],D=c[m];D=Ge(D);let A=s.Nu(y);if(D instanceof Pu)l.push(y);else{let x=No(D,A);x!=null&&(l.push(y),h.set(y,x))}}let p=new pn(l);return new Ff(h,p,s.fieldTransforms)}function wM(n,e,t,r=!1){return No(t,n.Qu(r?4:3,e))}function No(n,e){if(IM(n=Ge(n)))return uE("Unsupported field value:",e,n),EM(n,e);if(n instanceof kr)return function(r,i){if(!vM(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=No(a,i.Lu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Ge(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return sx(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Qe.fromDate(r);return{timestampValue:ca(i.serializer,o)}}if(r instanceof Qe){let o=new Qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ca(i.serializer,o)}}if(r instanceof So)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ur)return{bytesValue:mx(i.serializer,r._byteString)};if(r instanceof je){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Vw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Nu)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return Fw(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Qf(r)}`)}(n,e)}function EM(n,e){let t={};return $A(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Mo(n,(r,i)=>{let o=No(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function IM(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Qe||n instanceof So||n instanceof ur||n instanceof je||n instanceof kr||n instanceof Nu)}function uE(n,e,t){if(!IM(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Qf(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function Iw(n,e,t){if((e=Ge(e))instanceof Un)return e._internalPath;if(typeof e=="string")return lE(n,e);throw Lf("Field path arguments must be of type string or ",n,!1,void 0,t)}var SU=new RegExp("[~\\*/\\[\\]]");function lE(n,e,t){if(e.search(SU)>=0)throw Lf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Un(...e.split("."))._internalPath}catch{throw Lf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Lf(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new F(R.INVALID_ARGUMENT,a+n+c)}function CM(n,e){return n.some(t=>t.isEqual(e))}var Ao=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new je(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Cw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Zf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Cw=class extends Ao{data(){return super.data()}};function Zf(n,e){return typeof e=="string"?lE(n,e):e instanceof Un?e._internalPath:e._delegate._internalPath}function bM(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new F(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ku=class{},xo=class extends ku{};function Vr(n,e,...t){let r=[];e instanceof ku&&r.push(e),r=r.concat(t),function(o){let s=o.filter(c=>c instanceof bw).length,a=o.filter(c=>c instanceof jf).length;if(s>1||s>0&&a>0)throw new F(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var jf=class n extends xo{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return kM(e._query,t),new Dt(e.firestore,e.converter,e_(e._query,t))}_parse(e){let t=Ro(e.firestore);return function(o,s,a,c,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new F(R.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){xA(p,h);let y=[];for(let D of p)y.push(AA(c,o,D));m={arrayValue:{values:y}}}else m=AA(c,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||xA(p,h),m=wM(a,s,p,h==="in"||h==="not-in");return _e.create(l,h,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function DM(n,e,t){let r=e,i=Zf("where",n);return jf._create(i,r,t)}var bw=class n extends ku{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:ke.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)kM(s,c),s=e_(s,c)}(e._query,t),new Dt(e.firestore,e.converter,e_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Dw=class n extends xo{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new F(R.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new F(R.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Eo(o,s)}(e._query,this._field,this._direction);return new Dt(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new jn(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function TM(n,e="asc"){let t=e,r=Zf("orderBy",n);return Dw._create(r,t)}var Bf=class n extends xo{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new Dt(e.firestore,e.converter,rf(e._query,this._limit,this._limitType))}};function SM(n){return iM("limit",n),Bf._create("limit",n,"F")}function AM(n){return iM("limitToLast",n),Bf._create("limitToLast",n,"L")}var Uf=class n extends xo{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=PM(e,this.type,this._docOrFields,this._inclusive);return new Dt(e.firestore,e.converter,function(i,o){return new jn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function xM(...n){return Uf._create("startAt",n,!0)}function MM(...n){return Uf._create("startAfter",n,!1)}var $f=class n extends xo{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=PM(e,this.type,this._docOrFields,this._inclusive);return new Dt(e.firestore,e.converter,function(i,o){return new jn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function RM(...n){return $f._create("endBefore",n,!1)}function NM(...n){return $f._create("endAt",n,!0)}function PM(n,e,t,r){if(t[0]=Ge(t[0]),t[0]instanceof Ao)return function(o,s,a,c,l){if(!c)throw new F(R.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let p of ea(o))if(p.field.isKeyField())h.push(wo(s,c.key));else{let m=c.data.field(p.field);if(qf(m))throw new F(R.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let y=p.field.canonicalString();throw new F(R.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}h.push(m)}return new ar(h,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=Ro(n.firestore);return function(s,a,c,l,h,p){let m=s.explicitOrderBy;if(h.length>m.length)throw new F(R.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let D=0;D<h.length;D++){let A=h[D];if(m[D].field.isKeyField()){if(typeof A!="string")throw new F(R.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof A}`);if(!kw(s)&&A.indexOf("/")!==-1)throw new F(R.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${A}' contains a slash.`);let x=s.path.child(Ce.fromString(A));if(!z.isDocumentKey(x))throw new F(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${x}' is not because it contains an odd number of segments.`);let U=new z(x);y.push(wo(a,U))}else{let x=wM(c,l,A);y.push(x)}}return new ar(y,p)}(n._query,n.firestore._databaseId,i,e,t,r)}}function AA(n,e,t){if(typeof(t=Ge(t))=="string"){if(t==="")throw new F(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kw(e)&&t.indexOf("/")!==-1)throw new F(R.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Ce.fromString(t));if(!z.isDocumentKey(r))throw new F(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wo(n,new z(r))}if(t instanceof je)return wo(n,t._key);throw new F(R.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Qf(t)}.`)}function xA(n,e){if(!Array.isArray(n)||n.length===0)throw new F(R.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function kM(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new F(R.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new F(R.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var va=class{convertValue(e,t="none"){switch(_o(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ze(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(wi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Y()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Mo(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>ze(s.doubleValue));return new Nu(o)}convertGeoPoint(e){return new So(ze(e.latitude),ze(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Nw(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(yu(e));default:return null}}convertTimestamp(e){let t=Rr(e);return new Qe(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Ce.fromString(e);J(Sx(r));let i=new Ei(r.get(1),r.get(3)),o=new z(r.popFirst(5));return i.isEqual(t)||nt(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Jf(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Tw=class extends va{constructor(e){super(),this.firestore=e}convertBytes(e){return new ur(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new je(this.firestore,null,t)}};var Mr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Tn=class extends Ao{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new yi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Zf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},yi=class extends Tn{data(e={}){return super.data(e)}},$n=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Mr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new yi(this._firestore,this._userDataWriter,r.key,r,new Mr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new F(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new yi(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Mr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new yi(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Mr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:AU(a.type),doc:c,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function AU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y()}}function dE(n,e){return n instanceof Tn&&e instanceof Tn?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof $n&&e instanceof $n&&n._firestore===e._firestore&&sE(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function OM(n){n=Ae(n,je);let e=Ae(n.firestore,Ye);return tM(Tt(e),n._key).then(t=>gE(e,n,t))}var Or=class extends va{constructor(e){super(),this.firestore=e}convertBytes(e){return new ur(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new je(this.firestore,null,t)}};function FM(n){n=Ae(n,je);let e=Ae(n.firestore,Ye),t=Tt(e),r=new Or(e);return EU(t,n._key).then(i=>new Tn(e,r,n._key,i,new Mr(i!==null&&i.hasLocalMutations,!0),n.converter))}function VM(n){n=Ae(n,je);let e=Ae(n.firestore,Ye);return tM(Tt(e),n._key,{source:"server"}).then(t=>gE(e,n,t))}function LM(n){n=Ae(n,Dt);let e=Ae(n.firestore,Ye),t=Tt(e),r=new Or(e);return bM(n._query),nM(t,n._query).then(i=>new $n(e,r,n,i))}function jM(n){n=Ae(n,Dt);let e=Ae(n.firestore,Ye),t=Tt(e),r=new Or(e);return IU(t,n._query).then(i=>new $n(e,r,n,i))}function BM(n){n=Ae(n,Dt);let e=Ae(n.firestore,Ye),t=Tt(e),r=new Or(e);return nM(t,n._query,{source:"server"}).then(i=>new $n(e,r,n,i))}function hE(n,e,t){n=Ae(n,je);let r=Ae(n.firestore,Ye),i=Jf(n.converter,e,t);return Da(r,[Yf(Ro(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,tt.none())])}function fE(n,e,t,...r){n=Ae(n,je);let i=Ae(n.firestore,Ye),o=Ro(i),s;return s=typeof(e=Ge(e))=="string"||e instanceof Un?cE(o,"updateDoc",n._key,e,t,r):aE(o,"updateDoc",n._key,e),Da(i,[s.toMutation(n._key,tt.exists(!0))])}function UM(n){return Da(Ae(n.firestore,Ye),[new Ti(n._key,tt.none())])}function $M(n,e){let t=Ae(n.firestore,Ye),r=Uu(n),i=Jf(n.converter,e);return Da(t,[Yf(Ro(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,tt.exists(!1))]).then(()=>r)}function pE(n,...e){var t,r,i;n=Ge(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||pw(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(pw(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,l,h;if(n instanceof je)l=Ae(n.firestore,Ye),h=wa(n._key.path),c={next:p=>{e[s]&&e[s](gE(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=Ae(n,Dt);l=Ae(p.firestore,Ye),h=p._query;let m=new Or(l);c={next:y=>{e[s]&&e[s](new $n(l,m,p,y))},error:e[s+1],complete:e[s+2]},bM(n._query)}return function(m,y,D,A){let x=new ma(A),U=new Ru(y,x,D);return m.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return qw(yield ya(m),U)})),()=>{x.Za(),m.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return zw(yield ya(m),U)}))}}(Tt(l),h,a,c)}function HM(n,e){return CU(Tt(n=Ae(n,Ye)),pw(e)?e:{next:e})}function Da(n,e){return function(r,i){let o=new mt;return r.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return nU(yield tE(r),i,o)})),o.promise}(Tt(n),e)}function gE(n,e,t){let r=t.docs.get(e._key),i=new Or(n);return new Tn(n,i,e._key,r,new Mr(t.hasPendingWrites,t.fromCache),e.converter)}var xU={maxAttempts:5};var Hf=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ro(e)}set(e,t,r){this._verifyNotCommitted();let i=gi(e,this._firestore),o=Jf(i.converter,t,r),s=Yf(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,tt.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=gi(e,this._firestore),s;return s=typeof(t=Ge(t))=="string"||t instanceof Un?cE(this._dataReader,"WriteBatch.update",o._key,t,r,i):aE(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,tt.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=gi(e,this._firestore);return this._mutations=this._mutations.concat(new Ti(t._key,tt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new F(R.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function gi(n,e){if((n=Ge(n)).firestore!==e)throw new F(R.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var Sw=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Ro(t)}get(t){let r=gi(t,this._firestore),i=new Tw(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return Y();let s=o[0];if(s.isFoundDocument())return new Ao(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Ao(this._firestore,i,r._key,null,r.converter);throw Y()})}set(t,r,i){let o=gi(t,this._firestore),s=Jf(o.converter,r,i),a=Yf(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=gi(t,this._firestore),a;return a=typeof(r=Ge(r))=="string"||r instanceof Un?cE(this._dataReader,"Transaction.update",s._key,r,i,o):aE(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=gi(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=gi(e,this._firestore),r=new Or(this._firestore);return super.get(e).then(i=>new Tn(this._firestore,r,t._key,i._document,new Mr(!1,!1),t.converter))}};function qM(n,e,t){n=Ae(n,Ye);let r=Object.assign(Object.assign({},xU),t);return function(o){if(o.maxAttempts<1)throw new F(R.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let c=new mt;return o.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){let l=yield vU(o);new hw(o.asyncQueue,l,a,s,c).au()})),c.promise}(Tt(n),i=>e(new Sw(n,i)),r)}function zM(){return new Pu("deleteField")}function GM(){return new vw("serverTimestamp")}function WM(...n){return new _w("arrayUnion",n)}function KM(...n){return new ww("arrayRemove",n)}function QM(n){return new Ew("increment",n)}(function(e,t=!0){(function(i){_a=i})(P0),Qa(new Oi("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Ye(new Rv(r.getProvider("auth-internal")),new Ov(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new F(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ei(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),$r(SS,"4.7.3",e),$r(SS,"4.7.3","esm2017")})();var MU="@firebase/firestore-compat",RU="0.3.38";function EE(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new F("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function YM(){if(typeof Uint8Array>"u")throw new F("unimplemented","Uint8Arrays are not available in this environment.")}function ZM(){if(!HA())throw new F("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Xf=class n{constructor(e){this._delegate=e}static fromBase64String(e){return ZM(),new n(ur.fromBase64String(e))}static fromUint8Array(e){return YM(),new n(ur.fromUint8Array(e))}toBase64(){return ZM(),this._delegate.toBase64()}toUint8Array(){return YM(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function mE(n){return NU(n,["next","error","complete"])}function NU(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var yE=class{enableIndexedDbPersistence(e,t){return uM(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return lM(e._delegate)}clearIndexedDbPersistence(e){return hM(e._delegate)}},ep=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ei||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ln("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){oM(this._delegate,e,t,r)}enableNetwork(){return pM(this._delegate)}disableNetwork(){return gM(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,rE("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return fM(this._delegate)}onSnapshotsInSync(e){return HM(this._delegate,e)}get app(){if(!this._appCompat)throw new F("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Aa(this,iE(this._delegate,e))}catch(t){throw Kt(t,"collection()","Firestore.collection()")}}doc(e){try{return new lr(this,Uu(this._delegate,e))}catch(t){throw Kt(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Fo(this,sM(this._delegate,e))}catch(t){throw Kt(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return qM(this._delegate,t=>e(new tp(this,t)))}batch(){return Tt(this._delegate),new np(new Hf(this._delegate,e=>Da(this._delegate,e)))}loadBundle(e){return mM(this._delegate,e)}namedQuery(e){return yM(this._delegate,e).then(t=>t?new Fo(this,t):null)}},Ta=class extends va{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xf(new ur(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return lr.forKey(t,this.firestore,null)}};function PU(n){MA(n)}var tp=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Ta(e)}get(e){let t=Po(e);return this._delegate.get(t).then(r=>new ko(this._firestore,new Tn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=Po(e);return r?(EE("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Po(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Po(e);return this._delegate.delete(t),this}},np=class{constructor(e){this._delegate=e}set(e,t,r){let i=Po(e);return r?(EE("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Po(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Po(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},Sa=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new yi(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Oo(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new Ta(e),t),i.set(t,o)),o}};Sa.INSTANCES=new WeakMap;var lr=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ta(e)}static forPath(e,t,r){if(e.length%2!==0)throw new F("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new je(t._delegate,r,new z(e)))}static forKey(e,t,r){return new n(t,new je(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Aa(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Aa(this.firestore,iE(this._delegate,e))}catch(t){throw Kt(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Ge(e),e instanceof je?oE(this._delegate,e):!1}set(e,t){t=EE("DocumentReference.set",t);try{return t?hE(this._delegate,e,t):hE(this._delegate,e)}catch(r){throw Kt(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?fE(this._delegate,e):fE(this._delegate,e,t,...r)}catch(i){throw Kt(i,"updateDoc()","DocumentReference.update()")}}delete(){return UM(this._delegate)}onSnapshot(...e){let t=JM(e),r=XM(e,i=>new ko(this.firestore,new Tn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return pE(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=FM(this._delegate):e?.source==="server"?t=VM(this._delegate):t=OM(this._delegate),t.then(r=>new ko(this.firestore,new Tn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Sa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Kt(n,e,t){return n.message=n.message.replace(e,t),n}function JM(n){for(let e of n)if(typeof e=="object"&&!mE(e))return e;return{}}function XM(n,e){var t,r;let i;return mE(n[0])?i=n[0]:mE(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var ko=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new lr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return dE(this._delegate,e._delegate)}},Oo=class extends ko{data(e){let t=this._delegate.data(e);return this._delegate._converter||RA(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},Fo=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ta(e)}where(e,t,r){try{return new n(this.firestore,Vr(this._delegate,DM(e,t,r)))}catch(i){throw Kt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,Vr(this._delegate,TM(e,t)))}catch(r){throw Kt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,Vr(this._delegate,SM(e)))}catch(t){throw Kt(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,Vr(this._delegate,AM(e)))}catch(t){throw Kt(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,Vr(this._delegate,xM(...e)))}catch(t){throw Kt(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,Vr(this._delegate,MM(...e)))}catch(t){throw Kt(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,Vr(this._delegate,RM(...e)))}catch(t){throw Kt(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,Vr(this._delegate,NM(...e)))}catch(t){throw Kt(t,"endAt()","Query.endAt()")}}isEqual(e){return sE(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=jM(this._delegate):e?.source==="server"?t=BM(this._delegate):t=LM(this._delegate),t.then(r=>new $u(this.firestore,new $n(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=JM(e),r=XM(e,i=>new $u(this.firestore,new $n(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return pE(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Sa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},vE=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Oo(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},$u=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Fo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Oo(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new vE(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Oo(this._firestore,r))})}isEqual(e){return dE(this._delegate,e._delegate)}},Aa=class n extends Fo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new lr(this.firestore,e):null}doc(e){try{return e===void 0?new lr(this.firestore,Uu(this._delegate)):new lr(this.firestore,Uu(this._delegate,e))}catch(t){throw Kt(t,"doc()","CollectionReference.doc()")}}add(e){return $M(this._delegate,e).then(t=>new lr(this.firestore,t))}isEqual(e){return oE(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Sa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Po(n){return Ae(n,je)}var _E=class n{constructor(...e){this._delegate=new Un(...e)}static documentId(){return new n(rt.keyField().canonicalString())}isEqual(e){return e=Ge(e),e instanceof Un?this._delegate._internalPath.isEqual(e._internalPath):!1}};var wE=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=GM();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=zM();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=WM(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=KM(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=QM(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var kU={Firestore:ep,GeoPoint:So,Timestamp:Qe,Blob:Xf,Transaction:tp,WriteBatch:np,DocumentReference:lr,DocumentSnapshot:ko,Query:Fo,QueryDocumentSnapshot:Oo,QuerySnapshot:$u,CollectionReference:Aa,FieldPath:_E,FieldValue:wE,setLogLevel:PU,CACHE_SIZE_UNLIMITED:aM};function OU(n,e){n.INTERNAL.registerComponent(new Oi("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},kU)))}function FU(n){OU(n,(e,t)=>new ep(e,t,new yE)),n.registerVersion(MU,RU)}FU(an);function VU(n,e=tc){return new me(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function eR(n,e){return VU(n,e)}function LU(n,e){return eR(n,e).pipe(Ui(void 0),ic(),Z(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function bE(n,e){return eR(n,e).pipe(Z(t=>({payload:t,type:"query"})))}var rp=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=rR(r,t);return new op(i,o,this.afs)}snapshotChanges(){return LU(this.ref,this.afs.schedulers.outsideAngular).pipe(nn)}valueChanges(e={}){return this.snapshotChanges().pipe(Z(({payload:t})=>e.idField?pe(O({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return De(this.ref.get(e)).pipe(nn)}};function ip(n,e){return bE(n,e).pipe(Ui(void 0),ic(),Z(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let l=o.find(p=>p.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(p=>p.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function tR(n,e,t){return ip(n,t).pipe(Bi((r,i)=>jU(r,i.map(o=>o.payload),e),[]),ig(),Z(r=>r.map(i=>({type:i.type,payload:i}))))}function jU(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=BU(n,r))}),n}function IE(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function BU(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return IE(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return IE(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return IE(n,e.oldIndex,1);break}return n}function nR(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var op=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=ip(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(Z(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Ui(void 0),ic(),bt(([r,i])=>i.length>0||!r),Z(([,r])=>r),nn)}auditTrail(e){return this.stateChanges(e).pipe(Bi((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=nR(e);return tR(this.query,t,this.afs.schedulers.outsideAngular).pipe(nn)}valueChanges(e={}){return bE(this.query,this.afs.schedulers.outsideAngular).pipe(Z(t=>t.payload.docs.map(r=>e.idField?pe(O({},r.data()),{[e.idField]:r.id}):r.data())),nn)}get(e){return De(this.query.get(e)).pipe(nn)}add(e){return this.ref.add(e)}doc(e){return new rp(this.ref.doc(e),this.afs)}},CE=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?ip(this.query,this.afs.schedulers.outsideAngular).pipe(nn):ip(this.query,this.afs.schedulers.outsideAngular).pipe(Z(t=>t.filter(r=>e.indexOf(r.type)>-1)),bt(t=>t.length>0),nn)}auditTrail(e){return this.stateChanges(e).pipe(Bi((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=nR(e);return tR(this.query,t,this.afs.schedulers.outsideAngular).pipe(nn)}valueChanges(e={}){return bE(this.query,this.afs.schedulers.outsideAngular).pipe(Z(r=>r.payload.docs.map(i=>e.idField?O({[e.idField]:i.id},i.data()):i.data())),nn)}get(e){return De(this.query.get(e)).pipe(nn)}},UU=new Q("angularfire2.enableFirestorePersistence"),$U=new Q("angularfire2.firestore.persistenceSettings"),HU=new Q("angularfire2.firestore.settings"),qU=new Q("angularfire2.firestore.use-emulator");function rR(n,e=t=>t){return{query:e(n),ref:n}}var on=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,c,l,h,p,m,y,D,A,x,U,W){this.schedulers=c;let j=Pc(t,a,r),X=h;p&&yv(j,a,m,D,A,x,y,U),[this.firestore,this.persistenceEnabled$]=fh(`${j.name}.firestore`,"AngularFirestore",j.name,()=>{let ie=a.runOutsideAngular(()=>j.firestore());if(o&&ie.settings(o),X&&ie.useEmulator(...X),i&&!ro(s)){let te=()=>{try{return De(ie.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(E){return typeof console<"u"&&console.warn(E),re(!1)}};return[ie,a.runOutsideAngular(te)]}else return[ie,re(!1)]},[o,X,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=rR(i,r),a=this.schedulers.ngZone.run(()=>o);return new op(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new CE(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new rp(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(L(xs),L(Ms,8),L(UU,8),L(HU,8),L(Yt),L(Ee),L(dh),L($U,8),L(qU,8),L(bS,8),L(dv,8),L(hv,8),L(fv,8),L(pv,8),L(gv,8),L(mv,8),L(oo,8))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var iR=(()=>{class n{constructor(t){this.db=t,this.dbPath="/work-experience",this.workExperienceRef=t.collection(this.dbPath)}getWorkExperience(){return this.workExperienceRef}createWorkExperience(t){return this.workExperienceRef.add(O({},t))}updateWorkExperience(t,r){return this.workExperienceRef.doc(t).update(r)}deleteWorkExperience(t){return this.workExperienceRef.doc(t).delete()}static{this.\u0275fac=function(r){return new(r||n)(L(on))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function GU(n,e){if(n&1){let t=ct();k(0,"button",19),ge("click",function(){Te(t);let i=we();return Se(i.resetForm())}),B(1,"Cancelar"),P()}}function WU(n,e){if(n&1){let t=ct();k(0,"div",20)(1,"div",21)(2,"strong"),B(3),P(),B(4),On(5,"br"),k(6,"small"),B(7),P(),k(8,"p"),B(9),P()(),k(10,"div",22)(11,"button",23),ge("click",function(){let i=Te(t).$implicit,o=we();return Se(o.editJob(i))}),B(12,"Editar"),P(),k(13,"button",24),ge("click",function(){let i=Te(t).$implicit,o=we();return Se(o.deleteJob(i.id))}),B(14,"Eliminar"),P()()()}if(n&2){let t=e.$implicit;K(3),Ke(t.company),K(),Rt(" \u2014 ",t.position," "),K(3),qm("",t.startDate," - ",t.endDate," | ",t.location,""),K(2),Ke(t.accomplishments)}}var oR=(()=>{class n{constructor(t){this.workExperienceService=t,this.itemCount=0,this.btntxt="Agregar",this.goaltext="",this.workExperience=[],this.myWorkExperience=new eu,this.isEditing=!1,this.currentJobId=null,this.loadWorkExperience()}loadWorkExperience(){this.workExperienceService.getWorkExperience().snapshotChanges().pipe(Z(t=>t.map(r=>O({id:r.payload.doc.id},r.payload.doc.data())))).subscribe(t=>{this.workExperience=t,console.log(this.workExperience)})}AgregarJob(){this.isEditing&&this.currentJobId?this.workExperienceService.updateWorkExperience(this.currentJobId,this.myWorkExperience).then(()=>{console.log("Updated item successfully!"),this.resetForm()}):this.workExperienceService.createWorkExperience(this.myWorkExperience).then(()=>{console.log("Created new item successfully!"),this.resetForm()})}editJob(t){this.isEditing=!0,this.currentJobId=t.id||null,this.myWorkExperience=O({},t),this.btntxt="Guardar Cambios"}deleteJob(t){this.workExperienceService.deleteWorkExperience(t).then(()=>{console.log("delete item  successfully!")})}resetForm(){this.myWorkExperience=new eu,this.isEditing=!1,this.currentJobId=null,this.btntxt="Agregar"}static{this.\u0275fac=function(r){return new(r||n)(oe(iR))}}static{this.\u0275cmp=_t({type:n,selectors:[["app-admin-workexperience"]],decls:36,vars:10,consts:[[1,"experience-section"],[1,"card"],[3,"ngSubmit"],[1,"form-group"],["for","startDate"],["type","text","id","startDate","placeholder","mm/yyyy","name","startDate",1,"txt",3,"ngModelChange","ngModel"],["for","endDate"],["type","text","id","endDate","placeholder","mm/yyyy","name","endDate",1,"txt",3,"ngModelChange","ngModel"],["for","location"],["type","text","id","location","placeholder","Ciudad, Pa\xEDs","name","location",1,"txt",3,"ngModelChange","ngModel"],["for","position"],["type","text","id","position","placeholder","Puesto desempe\xF1ado","name","position",1,"txt",3,"ngModelChange","ngModel"],["for","company"],["type","text","id","company","placeholder","Nombre de la empresa","name","company",1,"txt",3,"ngModelChange","ngModel"],["for","accomplishments"],["type","text","id","accomplishments","placeholder","Principales logros","name","accomplishments",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn","submit"],["type","button","class","btn",3,"click",4,"ngIf"],["class","experience-item",4,"ngFor","ngForOf"],["type","button",1,"btn",3,"click"],[1,"experience-item"],[1,"job-details"],[1,"actions"],[1,"btn","edit",3,"click"],[1,"btn","delete",3,"click"]],template:function(r,i){r&1&&(k(0,"div",0)(1,"div",1)(2,"h2"),B(3),P(),k(4,"form",2),ge("ngSubmit",function(){return i.AgregarJob()}),k(5,"div",3)(6,"label",4),B(7,"Inicio"),P(),k(8,"input",5),Re("ngModelChange",function(s){return Ne(i.myWorkExperience.startDate,s)||(i.myWorkExperience.startDate=s),s}),P()(),k(9,"div",3)(10,"label",6),B(11,"Fin"),P(),k(12,"input",7),Re("ngModelChange",function(s){return Ne(i.myWorkExperience.endDate,s)||(i.myWorkExperience.endDate=s),s}),P()(),k(13,"div",3)(14,"label",8),B(15,"Ubicaci\xF3n"),P(),k(16,"input",9),Re("ngModelChange",function(s){return Ne(i.myWorkExperience.location,s)||(i.myWorkExperience.location=s),s}),P()(),k(17,"div",3)(18,"label",10),B(19,"Puesto"),P(),k(20,"input",11),Re("ngModelChange",function(s){return Ne(i.myWorkExperience.position,s)||(i.myWorkExperience.position=s),s}),P()(),k(21,"div",3)(22,"label",12),B(23,"Empresa"),P(),k(24,"input",13),Re("ngModelChange",function(s){return Ne(i.myWorkExperience.company,s)||(i.myWorkExperience.company=s),s}),P()(),k(25,"div",3)(26,"label",14),B(27,"Logros"),P(),k(28,"input",15),Re("ngModelChange",function(s){return Ne(i.myWorkExperience.accomplishments,s)||(i.myWorkExperience.accomplishments=s),s}),P()(),k(29,"button",16),B(30),P(),et(31,GU,2,0,"button",17),P()(),k(32,"div",1)(33,"h3"),B(34,"Lista de Experiencia"),P(),et(35,WU,15,6,"div",18),P()()),r&2&&(K(3),Rt("",i.btntxt," Experiencia Laboral"),K(5),Me("ngModel",i.myWorkExperience.startDate),K(4),Me("ngModel",i.myWorkExperience.endDate),K(4),Me("ngModel",i.myWorkExperience.location),K(4),Me("ngModel",i.myWorkExperience.position),K(4),Me("ngModel",i.myWorkExperience.company),K(4),Me("ngModel",i.myWorkExperience.accomplishments),K(2),Ke(i.btntxt),K(),We("ngIf",i.isEditing),K(4),We("ngForOf",i.workExperience))},dependencies:[In,Jt,tn,Nt,Xt,en,zt,qt],styles:[".experience-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem;padding:2rem;align-items:center}.card[_ngcontent-%COMP%]{background-color:#2c3e50;color:#ecf0f1;padding:1.5rem;border-radius:8px;box-shadow:0 2px 4px #0003;text-align:center;width:80%;max-width:600px}.card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#f1c40f;margin-top:0;margin-bottom:1rem;font-size:1.5rem;font-weight:500;display:inline-block;border-bottom:2px solid #f1c40f;padding-bottom:.5rem}.card[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:#ecf0f1;font-size:.9rem;font-weight:300}.card[_ngcontent-%COMP%]   .txt[_ngcontent-%COMP%]{width:calc(100% - 1rem);padding:.75rem;margin-bottom:1rem;border:1px solid #34495e;border-radius:4px;background-color:#34495e;color:#ecf0f1;font-size:1rem}.card[_ngcontent-%COMP%]   .txt[_ngcontent-%COMP%]::placeholder{color:#bdc3c7}.card[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background-color:#f1c40f;color:#333;padding:.8rem 1.2rem;border:none;border-radius:5px;cursor:pointer;font-size:1rem;transition:background-color .3s ease}.card[_ngcontent-%COMP%]   .btn.submit[_ngcontent-%COMP%]{width:100%;display:block;margin-top:1rem}.card[_ngcontent-%COMP%]   .btn.delete[_ngcontent-%COMP%]{background-color:#e74c3c;color:#fff;margin-left:.5rem}.card[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background-color:#e6b800}.experience-item[_ngcontent-%COMP%]{background-color:#34495e;padding:1rem;margin-bottom:1rem;border-radius:4px;display:flex;justify-content:space-between;align-items:center;width:80%;max-width:600px;margin-left:auto;margin-right:auto}.job-details[_ngcontent-%COMP%]{flex-grow:1;text-align:left}.job-details[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600;color:#f0f0f0}.job-details[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#bdc3c7;display:block;margin-bottom:.5rem;font-size:.85rem}.job-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:.5rem;margin-bottom:0;color:#ecf0f1;font-size:.95rem}.experience-item[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-left:1rem}.btn.edit[_ngcontent-%COMP%]{background-color:#2980b9;color:#fff}.btn.edit[_ngcontent-%COMP%]:hover{background-color:#3498db}"]})}}return n})();var sp=class{constructor(){this.name="",this.goalLife="",this.photoUrl="",this.email="",this.phoneNumber="",this.location="",this.socialNetwork=""}};var sR=(()=>{class n{constructor(t){this.db=t,this.dbPath="/header",this.headerRef=t.collection(this.dbPath)}getHeader(){return this.headerRef}createHeader(t){return this.headerRef.add(O({},t))}deleteHeader(t){return this.headerRef.doc(t).delete()}updateHeader(t,r){return this.headerRef.doc(t).update(r)}static{this.\u0275fac=function(r){return new(r||n)(L(on))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function QU(n,e){if(n&1&&(k(0,"div",14),On(1,"img",15),P()),n&2){let t=we(2);K(),We("src",t.header.photoUrl,Nm)}}function YU(n,e){if(n&1){let t=ct();k(0,"div",3),et(1,QU,2,1,"div",4),k(2,"form",5),ge("ngSubmit",function(){Te(t);let i=we();return Se(i.actualizarHeader())}),k(3,"label"),B(4,"Nombre"),P(),k(5,"input",6),Re("ngModelChange",function(i){Te(t);let o=we();return Ne(o.header.name,i)||(o.header.name=i),Se(i)}),P(),k(6,"label"),B(7,"Meta de vida"),P(),k(8,"input",7),Re("ngModelChange",function(i){Te(t);let o=we();return Ne(o.header.goalLife,i)||(o.header.goalLife=i),Se(i)}),P(),k(9,"label"),B(10,"URL de Foto"),P(),k(11,"input",8),Re("ngModelChange",function(i){Te(t);let o=we();return Ne(o.header.photoUrl,i)||(o.header.photoUrl=i),Se(i)}),P(),k(12,"label"),B(13,"Correo Electr\xF3nico"),P(),k(14,"input",9),Re("ngModelChange",function(i){Te(t);let o=we();return Ne(o.header.email,i)||(o.header.email=i),Se(i)}),P(),k(15,"label"),B(16,"Tel\xE9fono"),P(),k(17,"input",10),Re("ngModelChange",function(i){Te(t);let o=we();return Ne(o.header.phoneNumber,i)||(o.header.phoneNumber=i),Se(i)}),P(),k(18,"label"),B(19,"Ubicaci\xF3n"),P(),k(20,"input",11),Re("ngModelChange",function(i){Te(t);let o=we();return Ne(o.header.location,i)||(o.header.location=i),Se(i)}),P(),k(21,"label"),B(22,"Red Social"),P(),k(23,"input",12),Re("ngModelChange",function(i){Te(t);let o=we();return Ne(o.header.socialNetwork,i)||(o.header.socialNetwork=i),Se(i)}),P(),k(24,"button",13),B(25,"Actualizar Header"),P()()()}if(n&2){let t=we();K(),We("ngIf",t.header.photoUrl),K(4),Me("ngModel",t.header.name),K(3),Me("ngModel",t.header.goalLife),K(3),Me("ngModel",t.header.photoUrl),K(3),Me("ngModel",t.header.email),K(3),Me("ngModel",t.header.phoneNumber),K(3),Me("ngModel",t.header.location),K(3),Me("ngModel",t.header.socialNetwork)}}var aR=(()=>{class n{constructor(t){this.headerService=t,this.header=new sp,console.log(this.headerService),this.headerService.getHeader().snapshotChanges().pipe(Z(r=>r.map(i=>O({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.header=r[0],console.log(this.header)})}actualizarHeader(){this.header.id&&this.headerService.updateHeader(this.header.id,this.header).then(()=>{console.log("Header actualizado exitosamente")})}static{this.\u0275fac=function(r){return new(r||n)(oe(sR))}}static{this.\u0275cmp=_t({type:n,selectors:[["app-admin-header"]],decls:5,vars:1,consts:[[1,"header-section"],[1,"header-title","card"],["class","header-form card",4,"ngIf"],[1,"header-form","card"],["class","image-preview",4,"ngIf"],[3,"ngSubmit"],["type","text","name","name","placeholder","Nombre",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","goalLife","placeholder","Meta de vida",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","photoUrl","placeholder","URL de foto",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","email","placeholder","Correo electr\xF3nico",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","phoneNumber","placeholder","Tel\xE9fono",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","location","placeholder","Ubicaci\xF3n",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","socialNetwork","placeholder","Red social",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn","submit"],[1,"image-preview"],["alt","Vista previa",3,"src"]],template:function(r,i){r&1&&(k(0,"div",0)(1,"div",1)(2,"h2"),B(3,"Editar Header"),P()(),et(4,YU,26,8,"div",2),P()),r&2&&(K(4),We("ngIf",i.header))},dependencies:[Jt,tn,Nt,Xt,en,zt,qt],styles:[".header-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem;padding:2rem;align-items:center}.header-title.card[_ngcontent-%COMP%]{background-color:#2c3e50;color:#ecf0f1;padding:1.5rem;border-radius:8px;box-shadow:0 2px 4px #0003;text-align:center;width:80%;max-width:600px}.header-title.card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#f1c40f;margin-top:0;margin-bottom:1rem;font-size:1.5rem;font-weight:500;display:inline-block;border-bottom:2px solid #f1c40f;padding-bottom:.5rem}.header-title.card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#bdc3c7;margin-top:.25rem;margin-bottom:.25rem;font-size:.9rem}.header-form.card[_ngcontent-%COMP%]{background-color:#34495e;color:#ecf0f1;padding:1.5rem;border-radius:8px;box-shadow:0 2px 4px #0003;display:flex;flex-direction:column;width:80%;max-width:600px}.header-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:#ecf0f1;font-size:.9rem;font-weight:300}.header-form[_ngcontent-%COMP%]   .txt[_ngcontent-%COMP%]{width:calc(100% - 1rem);padding:.75rem;margin-bottom:1rem;border:1px solid #2c3e50;border-radius:4px;background-color:#2c3e50;color:#ecf0f1;font-size:1rem}.header-form[_ngcontent-%COMP%]   .txt[_ngcontent-%COMP%]::placeholder{color:#bdc3c7}.header-form[_ngcontent-%COMP%]   .btn.submit[_ngcontent-%COMP%]{background-color:#f1c40f;color:#333;padding:.8rem 1.2rem;border:none;border-radius:5px;cursor:pointer;font-size:1rem;transition:background-color .3s ease;margin-top:1rem}.header-form[_ngcontent-%COMP%]   .btn.submit[_ngcontent-%COMP%]:hover{background-color:#e6b800}.image-preview[_ngcontent-%COMP%]{margin-bottom:1rem;border-radius:5px;overflow:hidden;max-height:300px;display:flex;justify-content:center;align-items:center;background-color:#2c3e50}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;width:auto;height:auto;max-width:100%;max-height:100%;object-fit:contain}"]})}}return n})();var cR=(()=>{class n{constructor(t){this.db=t,this.dbPath="/education",this.educationRef=t.collection(this.dbPath)}getEducation(){return this.educationRef}createEducation(t){return this.educationRef.add(O({},t))}updateEducation(t,r){return this.educationRef.doc(t).update(r)}deleteEducation(t){return this.educationRef.doc(t).delete()}static{this.\u0275fac=function(r){return new(r||n)(L(on))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function JU(n,e){if(n&1){let t=ct();k(0,"button",14),ge("click",function(){Te(t);let i=we();return Se(i.resetForm())}),B(1,"Cancelar"),P()}}function XU(n,e){if(n&1){let t=ct();k(0,"div",15)(1,"div",16)(2,"span",17),B(3),P(),k(4,"span",18),B(5),P(),k(6,"span",19),B(7),P()(),k(8,"div",20)(9,"button",21),ge("click",function(){let i=Te(t).$implicit,o=we();return Se(o.editEducation(i))}),B(10,"Editar"),P(),k(11,"button",22),ge("click",function(){let i=Te(t).$implicit,o=we();return Se(o.deleteEducation(i.id))}),B(12,"Eliminar"),P()()()}if(n&2){let t=e.$implicit;K(3),Ke(t.school),K(2),Ke(t.startDate),K(2),Rt("(",t.location,")")}}var uR=(()=>{class n{constructor(t){this.educationService=t,this.itemCount=0,this.btntxt="Agregar",this.goalText="",this.education=[],this.myEducation={},this.isEditing=!1,this.currentEducationId=null,this.loadEducation()}loadEducation(){this.educationService.getEducation().snapshotChanges().pipe(Z(t=>t.map(r=>O({id:r.payload.doc.id},r.payload.doc.data())))).subscribe(t=>{this.education=t,console.log(this.education)})}AgregarEducation(){this.isEditing&&this.currentEducationId?this.educationService.updateEducation(this.currentEducationId,this.myEducation).then(()=>{console.log("Updated education successfully!"),this.resetForm()}):this.educationService.createEducation(this.myEducation).then(()=>{console.log("Created new education successfully!"),this.resetForm()})}editEducation(t){this.isEditing=!0,this.currentEducationId=t.id||null,this.myEducation=O({},t),this.btntxt="Guardar Cambios"}deleteEducation(t){this.educationService.deleteEducation(t).then(()=>{console.log("delete item succesfully")}),console.log(t)}resetForm(){this.myEducation={},this.isEditing=!1,this.currentEducationId=null,this.btntxt="Agregar"}static{this.\u0275fac=function(r){return new(r||n)(oe(cR))}}static{this.\u0275cmp=_t({type:n,selectors:[["app-admin-education"]],decls:24,vars:7,consts:[[1,"education-section"],[1,"edu-form","card"],[3,"ngSubmit"],[1,"form-group"],["for","startDate"],["type","text","id","startDate","name","startDate","placeholder","mmm-yyyy",1,"txt",3,"ngModelChange","ngModel"],["for","school"],["type","text","id","school","name","school","placeholder","Escuela",1,"txt",3,"ngModelChange","ngModel"],["for","location"],["type","text","id","location","name","location","placeholder","Locaci\xF3n",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn","submit"],["type","button","class","btn",3,"click",4,"ngIf"],[1,"edu-list","card"],["class","edu-item",4,"ngFor","ngForOf"],["type","button",1,"btn",3,"click"],[1,"edu-item"],[1,"edu-info"],[1,"edu-school"],[1,"edu-startDate"],[1,"edu-location"],[1,"actions"],[1,"btn","edit",3,"click"],[1,"btn","delete",3,"click"]],template:function(r,i){r&1&&(k(0,"div",0)(1,"div",1)(2,"h2"),B(3),P(),k(4,"form",2),ge("ngSubmit",function(){return i.AgregarEducation()}),k(5,"div",3)(6,"label",4),B(7,"Fecha de Inicio"),P(),k(8,"input",5),Re("ngModelChange",function(s){return Ne(i.myEducation.startDate,s)||(i.myEducation.startDate=s),s}),P()(),k(9,"div",3)(10,"label",6),B(11,"Escuela"),P(),k(12,"input",7),Re("ngModelChange",function(s){return Ne(i.myEducation.school,s)||(i.myEducation.school=s),s}),P()(),k(13,"div",3)(14,"label",8),B(15,"Locaci\xF3n"),P(),k(16,"input",9),Re("ngModelChange",function(s){return Ne(i.myEducation.location,s)||(i.myEducation.location=s),s}),P()(),k(17,"button",10),B(18),P(),et(19,JU,2,0,"button",11),P()(),k(20,"div",12)(21,"h2"),B(22,"Estudios Guardados"),P(),et(23,XU,13,3,"div",13),P()()),r&2&&(K(3),Rt("",i.btntxt," Educaci\xF3n"),K(5),Me("ngModel",i.myEducation.startDate),K(4),Me("ngModel",i.myEducation.school),K(4),Me("ngModel",i.myEducation.location),K(2),Ke(i.btntxt),K(),We("ngIf",i.isEditing),K(4),We("ngForOf",i.education))},dependencies:[In,Jt,tn,Nt,Xt,en,zt,qt],styles:[".education-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem;padding:2rem;align-items:start;width:80%;max-width:960px;margin:0 auto}.edu-form.card[_ngcontent-%COMP%], .edu-list.card[_ngcontent-%COMP%]{background-color:#2c3e50;color:#ecf0f1;padding:1.5rem;border-radius:8px;box-shadow:0 2px 4px #0003;text-align:left}.edu-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .edu-list[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#f1c40f;margin-top:0;margin-bottom:1rem;font-size:1.3rem;font-weight:500;border-bottom:2px solid #f1c40f;padding-bottom:.5rem;display:inline-block;text-align:left}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem;text-align:left}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:#ecf0f1;font-size:.9rem;font-weight:300}.edu-form[_ngcontent-%COMP%]   .txt[_ngcontent-%COMP%]{width:calc(100% - 1rem);padding:.75rem;border:1px solid #34495e;border-radius:4px;background-color:#34495e;color:#ecf0f1;font-size:1rem}.edu-form[_ngcontent-%COMP%]   .btn.submit[_ngcontent-%COMP%]{background-color:#f1c40f;color:#333;padding:.8rem 1.2rem;border:none;border-radius:5px;cursor:pointer;font-size:1rem;transition:background-color .3s ease;width:100%;display:block;margin-top:1rem}.edu-list[_ngcontent-%COMP%]   .edu-item[_ngcontent-%COMP%]{background-color:#34495e;color:#ecf0f1;padding:1rem;margin-bottom:1rem;border-radius:4px;display:flex;justify-content:space-between;align-items:center}.edu-list[_ngcontent-%COMP%]   .edu-info[_ngcontent-%COMP%]{flex-grow:1;text-align:left}.edu-list[_ngcontent-%COMP%]   .edu-school[_ngcontent-%COMP%]{font-weight:700;margin-right:1rem}.edu-list[_ngcontent-%COMP%]   .edu-startDate[_ngcontent-%COMP%]{font-style:italic;color:#bdc3c7}.edu-list[_ngcontent-%COMP%]   .edu-location[_ngcontent-%COMP%]{font-style:italic;color:#bdc3c7;margin-left:.5rem}.edu-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.btn[_ngcontent-%COMP%]{padding:.6rem 1rem;border:none;border-radius:5px;cursor:pointer;font-size:.9rem;transition:background-color .3s ease}.btn.edit[_ngcontent-%COMP%]{background-color:#f1c40f;color:#333;padding:.8rem 1.2rem;border:none;border-radius:5px;cursor:pointer;font-size:1rem;transition:background-color .3s ease}.btn.delete[_ngcontent-%COMP%]{background-color:#e74c3c;color:#fff}.btn[_ngcontent-%COMP%]:hover{opacity:.8}"]})}}return n})();var lR=(()=>{class n{constructor(t){this.db=t,this.dbPath="/certificates",this.certificateRef=t.collection(this.dbPath)}getCertificate(){return this.certificateRef}createCertificate(t){return this.certificateRef.add(O({},t))}updateCertificate(t,r){return this.certificateRef.doc(t).update(r)}deleteCertificate(t){return this.certificateRef.doc(t).delete()}static{this.\u0275fac=function(r){return new(r||n)(L(on))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function t$(n,e){if(n&1){let t=ct();k(0,"button",14),ge("click",function(){Te(t);let i=we();return Se(i.resetForm())}),B(1,"Cancelar"),P()}}function n$(n,e){if(n&1){let t=ct();k(0,"div",15)(1,"div",16)(2,"span",17),B(3),P(),k(4,"span",18),B(5),P(),k(6,"p"),B(7),P()(),k(8,"div",19)(9,"button",20),ge("click",function(){let i=Te(t).$implicit,o=we();return Se(o.editCertificate(i))}),B(10,"Editar"),P(),k(11,"button",21),ge("click",function(){let i=Te(t).$implicit,o=we();return Se(o.deleteCertificate(i.id))}),B(12,"Eliminar"),P()()()}if(n&2){let t=e.$implicit;K(3),Ke(t.certificate),K(2),Ke(t.year),K(2),Ke(t.description)}}var dR=(()=>{class n{constructor(t){this.certificatesService=t,this.itemCount=0,this.btntxt="Agregar",this.goalText="",this.certificates=[],this.myCertificates={},this.isEditing=!1,this.currentCertificateId=null,this.loadCertificates()}loadCertificates(){this.certificatesService.getCertificate().snapshotChanges().pipe(Z(t=>t.map(r=>O({id:r.payload.doc.id},r.payload.doc.data())))).subscribe(t=>{this.certificates=t,console.log(this.certificates)})}AgregarCertificates(){this.isEditing&&this.currentCertificateId?this.certificatesService.updateCertificate(this.currentCertificateId,this.myCertificates).then(()=>{console.log("Certificate updated successfully!"),this.resetForm()}):this.certificatesService.createCertificate(this.myCertificates).then(()=>{console.log("Create new item successfully!"),this.resetForm()})}editCertificate(t){this.isEditing=!0,this.currentCertificateId=t.id||null,this.myCertificates=O({},t),this.btntxt="Guardar Cambios"}deleteCertificate(t){this.certificatesService.deleteCertificate(t).then(()=>{console.log("delete item successfully")}),console.log(t)}resetForm(){this.myCertificates={},this.isEditing=!1,this.currentCertificateId=null,this.btntxt="Agregar"}static{this.\u0275fac=function(r){return new(r||n)(oe(lR))}}static{this.\u0275cmp=_t({type:n,selectors:[["app-admin-certificates"]],decls:24,vars:7,consts:[[1,"certificate-section"],[1,"cert-form","card"],[3,"ngSubmit"],[1,"form-group"],["for","certificateName"],["type","text","id","certificateName","name","certificate","placeholder","Nombre del certificado",1,"txt",3,"ngModelChange","ngModel"],["for","certificateDescription"],["type","text","id","certificateDescription","name","description","placeholder","Contexto o instituci\xF3n",1,"txt",3,"ngModelChange","ngModel"],["for","certificateYear"],["type","text","id","certificateYear","name","year","placeholder","A\xF1o (YYYY)",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn","submit"],["type","button","class","btn",3,"click",4,"ngIf"],[1,"cert-list","card"],["class","cert-preview",4,"ngFor","ngForOf"],["type","button",1,"btn",3,"click"],[1,"cert-preview"],[1,"cert-info"],[1,"cert-certificate"],[1,"cert-year"],[1,"actions"],[1,"btn","edit",3,"click"],[1,"btn","delete",3,"click"]],template:function(r,i){r&1&&(k(0,"div",0)(1,"div",1)(2,"h2"),B(3),P(),k(4,"form",2),ge("ngSubmit",function(){return i.AgregarCertificates()}),k(5,"div",3)(6,"label",4),B(7,"Nombre del Certificado"),P(),k(8,"input",5),Re("ngModelChange",function(s){return Ne(i.myCertificates.certificate,s)||(i.myCertificates.certificate=s),s}),P()(),k(9,"div",3)(10,"label",6),B(11,"Contexto o Instituci\xF3n"),P(),k(12,"input",7),Re("ngModelChange",function(s){return Ne(i.myCertificates.description,s)||(i.myCertificates.description=s),s}),P()(),k(13,"div",3)(14,"label",8),B(15,"A\xF1o"),P(),k(16,"input",9),Re("ngModelChange",function(s){return Ne(i.myCertificates.year,s)||(i.myCertificates.year=s),s}),P()(),k(17,"button",10),B(18),P(),et(19,t$,2,0,"button",11),P()(),k(20,"div",12)(21,"h2"),B(22,"Certificados Guardados"),P(),et(23,n$,13,3,"div",13),P()()),r&2&&(K(3),Rt("",i.btntxt," Certificado"),K(5),Me("ngModel",i.myCertificates.certificate),K(4),Me("ngModel",i.myCertificates.description),K(4),Me("ngModel",i.myCertificates.year),K(2),Ke(i.btntxt),K(),We("ngIf",i.isEditing),K(4),We("ngForOf",i.certificates))},dependencies:[In,Jt,tn,Nt,Xt,en,zt,qt],styles:[".certificate-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem;padding:2rem;align-items:start;width:80%;max-width:960px;margin:0 auto}.cert-form.card[_ngcontent-%COMP%], .cert-list.card[_ngcontent-%COMP%]{background-color:#2c3e50;color:#ecf0f1;padding:1.5rem;border-radius:8px;box-shadow:0 2px 4px #0003;text-align:left}.cert-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .cert-list[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#f1c40f;text-align:left;padding-bottom:.5rem;margin-bottom:1rem;border-bottom:2px solid #f1c40f;font-size:1.3rem;font-weight:500;display:inline-block}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem;text-align:left}.cert-form[_ngcontent-%COMP%]   input.txt[_ngcontent-%COMP%]{width:calc(100% - 1rem);padding:.75rem;margin-bottom:1rem;border:1px solid #34495e;border-radius:4px;background-color:#34495e;color:#ecf0f1;font-size:1rem}.cert-form[_ngcontent-%COMP%]   input.txt[_ngcontent-%COMP%]::placeholder{color:#bdc3c7}.cert-form[_ngcontent-%COMP%]   button.btn.submit[_ngcontent-%COMP%]{background-color:#f1c40f;color:#333;padding:.8rem 1.2rem;border:none;border-radius:5px;cursor:pointer;font-size:1rem;transition:background-color .3s ease;width:100%;display:block;margin-top:1rem}.cert-form[_ngcontent-%COMP%]   button.btn.submit[_ngcontent-%COMP%]:hover{background-color:#e6b800}.cert-list[_ngcontent-%COMP%]   .cert-preview[_ngcontent-%COMP%]{background-color:#34495e;color:#ecf0f1;padding:1rem;margin-bottom:1rem;border-radius:4px;display:flex;justify-content:space-between;align-items:center}.cert-list[_ngcontent-%COMP%]   .cert-preview[_ngcontent-%COMP%]:last-child{margin-bottom:0}.cert-list[_ngcontent-%COMP%]   .cert-info[_ngcontent-%COMP%]{flex-grow:1;text-align:left}.cert-list[_ngcontent-%COMP%]   .cert-certificate[_ngcontent-%COMP%]{font-weight:700;margin-right:1rem}.cert-list[_ngcontent-%COMP%]   .cert-year[_ngcontent-%COMP%]{font-style:italic;color:#bdc3c7}.cert-list[_ngcontent-%COMP%]   button.btn.delete[_ngcontent-%COMP%]{background-color:#e74c3c;color:#fff;padding:.6rem 1rem;border:none;border-radius:5px;cursor:pointer;font-size:.9rem;transition:background-color .3s ease;margin-left:1rem}.cert-list[_ngcontent-%COMP%]   button.btn.delete[_ngcontent-%COMP%]:hover{background-color:#c0392b}.cert-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.btn.edit[_ngcontent-%COMP%]{background-color:#f1c40f;color:#333;padding:.8rem 1.2rem;border:none;border-radius:5px;cursor:pointer;font-size:1rem;transition:background-color .3s ease}.btn.edit[_ngcontent-%COMP%]:hover{background-color:#3498db}"]})}}return n})();var hR=(()=>{class n{constructor(t){this.db=t,this.dbPath="/skills",this.skillRef=t.collection(this.dbPath)}getSkill(){return this.skillRef}createSkill(t){return this.skillRef.add(O({},t))}updateSkill(t,r){return this.skillRef.doc(t).update(r)}deleteSkill(t){return this.skillRef.doc(t).delete()}static{this.\u0275fac=function(r){return new(r||n)(L(on))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function i$(n,e){if(n&1){let t=ct();k(0,"button",12),ge("click",function(){Te(t);let i=we();return Se(i.resetForm())}),B(1,"Cancelar"),P()}}function o$(n,e){if(n&1){let t=ct();k(0,"div",13)(1,"div",14)(2,"div",15)(3,"span",16),B(4),P(),k(5,"span",17),B(6),P(),k(7,"div",18),On(8,"div",19),P()(),k(9,"div",20)(10,"button",21),ge("click",function(){let i=Te(t).$implicit,o=we();return Se(o.editSkill(i))}),B(11,"Editar"),P(),k(12,"button",22),ge("click",function(){let i=Te(t).$implicit,o=we();return Se(o.deleteSkill(i.id))}),B(13,"Eliminar"),P()()()()}if(n&2){let t=e.$implicit;K(4),Ke(t.skill),K(2),Ke(t.percentage),K(2),qd("width",t.percentage,"%")}}var fR=(()=>{class n{constructor(t){this.skillsService=t,this.skills=[],this.mySkill={},this.isEditing=!1,this.currentSkillId=null,this.btntxt="Guardar",this.loadSkills()}loadSkills(){this.skillsService.getSkill().snapshotChanges().pipe(Z(t=>t.map(r=>O({id:r.payload.doc.id},r.payload.doc.data())))).subscribe(t=>{this.skills=t,console.log(this.skills)})}AgregarSkill(){this.isEditing&&this.currentSkillId?this.skillsService.updateSkill(this.currentSkillId,this.mySkill).then(()=>{console.log("Skill updated successfully!"),this.resetForm()}):this.skillsService.createSkill(this.mySkill).then(()=>{console.log("Created new skill successfully!"),this.resetForm()})}editSkill(t){this.isEditing=!0,this.currentSkillId=t.id||null,this.mySkill=O({},t),this.btntxt="Guardar Cambios"}deleteSkill(t){this.skillsService.deleteSkill(t).then(()=>{console.log("Skill deleted successfully!")})}resetForm(){this.mySkill={},this.isEditing=!1,this.currentSkillId=null,this.btntxt="Guardar"}static{this.\u0275fac=function(r){return new(r||n)(oe(hR))}}static{this.\u0275cmp=_t({type:n,selectors:[["app-admin-skills"]],decls:20,vars:6,consts:[[1,"skill-section"],[1,"skill-form","card"],[3,"ngSubmit"],[1,"form-group"],["for","skillName"],["type","text","id","skillName","placeholder","Tipo de skill","name","skill",1,"txt",3,"ngModelChange","ngModel"],["for","skillPercentage"],["type","text","id","skillPercentage","placeholder","Porcentaje de tu skill","name","level",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn","submit"],["type","button","class","btn",3,"click",4,"ngIf"],[1,"skill-list","card"],["class","skill-item",4,"ngFor","ngForOf"],["type","button",1,"btn",3,"click"],[1,"skill-item"],[1,"skill-main"],[1,"skill-info"],[1,"skill-skill"],[1,"skill-percentage"],[1,"progress-bar"],[1,"progress-fill"],[1,"actions"],["type","button",1,"btn","edit",3,"click"],["type","button",1,"btn","delete",3,"click"]],template:function(r,i){r&1&&(k(0,"div",0)(1,"div",1)(2,"h2"),B(3),P(),k(4,"form",2),ge("ngSubmit",function(){return i.AgregarSkill()}),k(5,"div",3)(6,"label",4),B(7,"Tipo de skill"),P(),k(8,"input",5),Re("ngModelChange",function(s){return Ne(i.mySkill.skill,s)||(i.mySkill.skill=s),s}),P()(),k(9,"div",3)(10,"label",6),B(11,"Porcentaje de tu skill"),P(),k(12,"input",7),Re("ngModelChange",function(s){return Ne(i.mySkill.percentage,s)||(i.mySkill.percentage=s),s}),P()(),k(13,"button",8),B(14),P(),et(15,i$,2,0,"button",9),P()(),k(16,"div",10)(17,"h2"),B(18,"Habilidades Guardadas"),P(),et(19,o$,14,4,"div",11),P()()),r&2&&(K(3),Rt("",i.btntxt," Habilidad"),K(5),Me("ngModel",i.mySkill.skill),K(4),Me("ngModel",i.mySkill.percentage),K(2),Ke(i.btntxt),K(),We("ngIf",i.isEditing),K(4),We("ngForOf",i.skills))},dependencies:[In,Jt,tn,Nt,Xt,en,zt,qt],styles:[".skill-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem;padding:2rem;align-items:start;width:80%;max-width:960px;margin:0 auto}.skill-form.card[_ngcontent-%COMP%], .skill-list.card[_ngcontent-%COMP%]{background-color:#2c3e50;color:#ecf0f1;padding:1.5rem;border-radius:8px;box-shadow:0 2px 4px #0003;text-align:left}.skill-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .skill-list[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#f1c40f;text-align:left;padding-bottom:.5rem;margin-bottom:1rem;border-bottom:2px solid #f1c40f;font-size:1.3rem;font-weight:500;display:inline-block}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem;text-align:left}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:#ecf0f1;font-size:.9rem;font-weight:300}.skill-form[_ngcontent-%COMP%]   input.txt[_ngcontent-%COMP%]{width:calc(100% - 1rem);padding:.75rem;margin-bottom:1rem;border:1px solid #34495e;border-radius:4px;background-color:#34495e;color:#ecf0f1;font-size:1rem}.skill-form[_ngcontent-%COMP%]   input.txt[_ngcontent-%COMP%]::placeholder{color:#bdc3c7}.skill-form[_ngcontent-%COMP%]   button.btn.submit[_ngcontent-%COMP%]{background-color:#f1c40f;color:#333;padding:.8rem 1.2rem;border:none;border-radius:5px;cursor:pointer;font-size:1rem;transition:background-color .3s ease;width:100%;display:block;margin-top:1rem}.skill-form[_ngcontent-%COMP%]   button.btn.submit[_ngcontent-%COMP%]:hover{background-color:#e6b800}.skill-list[_ngcontent-%COMP%]   .skill-item[_ngcontent-%COMP%]{background-color:#34495e;color:#ecf0f1;padding:1rem;margin-bottom:1rem;border-radius:4px}.skill-list[_ngcontent-%COMP%]   .skill-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.skill-list[_ngcontent-%COMP%]   .skill-main[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.skill-list[_ngcontent-%COMP%]   .skill-info[_ngcontent-%COMP%]{flex-grow:1;display:flex;align-items:center}.skill-list[_ngcontent-%COMP%]   .skill-skill[_ngcontent-%COMP%]{font-weight:700;margin-right:1rem;min-width:80px}.skill-list[_ngcontent-%COMP%]   .skill-percentage[_ngcontent-%COMP%]{color:#bdc3c7;margin-left:.5rem;min-width:40px;text-align:right}.skill-list[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{background-color:#2c3e50;border-radius:5px;height:10px;width:100%;margin-left:1rem;overflow:hidden}.skill-list[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{background-color:#f1c40f;height:100%;border-radius:5px;transition:width .3s ease}.skill-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.btn[_ngcontent-%COMP%]{padding:.6rem 1rem;border:none;border-radius:5px;cursor:pointer;font-size:.9rem;transition:background-color .3s ease}.btn.edit[_ngcontent-%COMP%]{background-color:#f1c40f;color:#333;padding:.8rem 1.2rem;border:none;border-radius:5px;cursor:pointer;font-size:1rem;transition:background-color .3s ease}.btn.delete[_ngcontent-%COMP%]{background-color:#e74c3c;color:#fff}.btn[_ngcontent-%COMP%]:hover{opacity:.8}",`.skill-item[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%] {
      display: flex;
      gap: 0.5rem;
  }

  .btn.edit[_ngcontent-%COMP%] {
      background-color: #2980b9;
      color: white;
  }

  .btn.edit[_ngcontent-%COMP%]:hover {
      background-color: #3498db;
  }`]})}}return n})();var pR=(()=>{class n{constructor(t){this.db=t,this.accesoLanguages="Languagues Service is Running...",this.dbPath="/languages",this.languageRef=t.collection(this.dbPath)}getLanguage(){return this.languageRef}createLanguage(t){return this.languageRef.add(O({},t))}updateLanguage(t,r){return this.languageRef.doc(t).update(r)}deleteLanguage(t){return this.languageRef.doc(t).delete()}static{this.\u0275fac=function(r){return new(r||n)(L(on))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function a$(n,e){if(n&1){let t=ct();k(0,"button",10),ge("click",function(){Te(t);let i=we();return Se(i.resetForm())}),B(1,"Cancelar"),P()}}function c$(n,e){if(n&1){let t=ct();k(0,"div",11)(1,"div",12)(2,"span",13),B(3),P()(),k(4,"div",14)(5,"button",15),ge("click",function(){let i=Te(t).$implicit,o=we();return Se(o.editLanguage(i))}),B(6,"Editar"),P(),k(7,"button",16),ge("click",function(){let i=Te(t).$implicit,o=we();return Se(o.deleteLanguage(i.id))}),B(8,"Eliminar"),P()()()}if(n&2){let t=e.$implicit;K(3),Ke(t.language)}}var gR=(()=>{class n{constructor(t){this.languagesService=t,this.languages=[],this.myLanguage={},this.isEditing=!1,this.currentLanguageId=null,this.btntxt="Guardar",this.loadLanguages()}loadLanguages(){this.languagesService.getLanguage().snapshotChanges().pipe(Z(t=>t.map(r=>O({id:r.payload.doc.id},r.payload.doc.data())))).subscribe(t=>{this.languages=t,console.log(this.languages)})}AgregarLanguage(){this.isEditing&&this.currentLanguageId?this.languagesService.updateLanguage(this.currentLanguageId,this.myLanguage).then(()=>{console.log("Language updated successfully!"),this.resetForm()}):this.languagesService.createLanguage(this.myLanguage).then(()=>{console.log("Created a new language successfully"),this.resetForm()})}editLanguage(t){this.isEditing=!0,this.currentLanguageId=t.id||null,this.myLanguage=O({},t),this.btntxt="Guardar Cambios"}deleteLanguage(t){this.languagesService.deleteLanguage(t).then(()=>{console.log("delete item successfully")}),console.log(t)}resetForm(){this.myLanguage={},this.isEditing=!1,this.currentLanguageId=null,this.btntxt="Guardar"}static{this.\u0275fac=function(r){return new(r||n)(oe(pR))}}static{this.\u0275cmp=_t({type:n,selectors:[["app-admin-languages"]],decls:16,vars:5,consts:[[1,"language-section"],[1,"language-form","card"],[3,"ngSubmit"],[1,"form-group"],["for","languageName"],["type","text","id","languageName","name","language","placeholder","Idioma que hablas",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn","submit"],["type","button","class","btn",3,"click",4,"ngIf"],[1,"language-list","card"],["class","language-item",4,"ngFor","ngForOf"],["type","button",1,"btn",3,"click"],[1,"language-item"],[1,"language-info"],[1,"language-name"],[1,"actions"],["type","button",1,"btn","edit",3,"click"],["type","button",1,"btn","delete",3,"click"]],template:function(r,i){r&1&&(k(0,"div",0)(1,"div",1)(2,"h2"),B(3),P(),k(4,"form",2),ge("ngSubmit",function(){return i.AgregarLanguage()}),k(5,"div",3)(6,"label",4),B(7,"Idioma que hablas"),P(),k(8,"input",5),Re("ngModelChange",function(s){return Ne(i.myLanguage.language,s)||(i.myLanguage.language=s),s}),P()(),k(9,"button",6),B(10),P(),et(11,a$,2,0,"button",7),P()(),k(12,"div",8)(13,"h2"),B(14,"Idiomas Guardados"),P(),et(15,c$,9,1,"div",9),P()()),r&2&&(K(3),Rt("",i.btntxt," Idioma"),K(5),Me("ngModel",i.myLanguage.language),K(2),Ke(i.btntxt),K(),We("ngIf",i.isEditing),K(4),We("ngForOf",i.languages))},dependencies:[In,Jt,tn,Nt,Xt,en,zt,qt],styles:[".language-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem;padding:2rem;align-items:start;width:80%;max-width:960px;margin:0 auto}.language-form.card[_ngcontent-%COMP%], .language-list.card[_ngcontent-%COMP%]{background-color:#2c3e50;color:#ecf0f1;padding:1.5rem;border-radius:8px;box-shadow:0 2px 4px #0003;text-align:left}.language-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .language-list[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#f1c40f;text-align:left;padding-bottom:.5rem;margin-bottom:1rem;border-bottom:2px solid #f1c40f;font-size:1.3rem;font-weight:500;display:inline-block}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem;text-align:left}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:#ecf0f1;font-size:.9rem;font-weight:300}.language-form[_ngcontent-%COMP%]   input.txt[_ngcontent-%COMP%]{width:calc(100% - 1rem);padding:.75rem;margin-bottom:1rem;border:1px solid #34495e;border-radius:4px;background-color:#34495e;color:#ecf0f1;font-size:1rem}.language-form[_ngcontent-%COMP%]   input.txt[_ngcontent-%COMP%]::placeholder{color:#bdc3c7}.language-form[_ngcontent-%COMP%]   button.btn.submit[_ngcontent-%COMP%]{background-color:#f1c40f;color:#333;padding:.8rem 1.2rem;border:none;border-radius:5px;cursor:pointer;font-size:1rem;transition:background-color .3s ease;width:100%;display:block;margin-top:1rem}.language-form[_ngcontent-%COMP%]   button.btn.submit[_ngcontent-%COMP%]:hover{background-color:#e6b800}.language-list[_ngcontent-%COMP%]   .language-item[_ngcontent-%COMP%]{background-color:#34495e;color:#ecf0f1;padding:1rem;margin-bottom:1rem;border-radius:4px;display:flex;justify-content:space-between;align-items:center}.language-list[_ngcontent-%COMP%]   .language-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.language-list[_ngcontent-%COMP%]   .language-info[_ngcontent-%COMP%]{flex-grow:1;text-align:left}.language-list[_ngcontent-%COMP%]   .language-name[_ngcontent-%COMP%]{font-weight:700;margin-right:1rem}.language-list[_ngcontent-%COMP%]   button.btn.delete[_ngcontent-%COMP%]{background-color:#e74c3c;color:#fff;padding:.6rem 1rem;border:none;border-radius:5px;cursor:pointer;font-size:.9rem;transition:background-color .3s ease;margin-left:1rem}.language-list[_ngcontent-%COMP%]   button.btn.delete[_ngcontent-%COMP%]:hover{background-color:#c0392b}.language-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.btn[_ngcontent-%COMP%]{padding:.6rem 1rem;border:none;border-radius:5px;cursor:pointer;font-size:.9rem;transition:background-color .3s ease}.btn.edit[_ngcontent-%COMP%]{background-color:#f1c40f;color:#333;padding:.8rem 1.2rem;border:none;border-radius:5px;cursor:pointer;font-size:1rem;transition:background-color .3s ease}.btn.edit[_ngcontent-%COMP%]:hover{background-color:#3498db}"]})}}return n})();var mR=(()=>{class n{constructor(t){this.db=t,this.accessoInterests="Interests Service is Running",this.dbPath="/interest",this.interestsRef=t.collection(this.dbPath)}getInterests(){return this.interestsRef}createInterests(t){return this.interestsRef.add(O({},t))}updateInterest(t,r){return this.interestsRef.doc(t).update(r)}deleteInterests(t){return this.interestsRef.doc(t).delete()}static{this.\u0275fac=function(r){return new(r||n)(L(on))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function l$(n,e){if(n&1){let t=ct();k(0,"button",10),ge("click",function(){Te(t);let i=we();return Se(i.resetForm())}),B(1,"Cancelar"),P()}}function d$(n,e){if(n&1){let t=ct();k(0,"div",11)(1,"span",12),B(2),P(),k(3,"div",13)(4,"button",14),ge("click",function(){let i=Te(t).$implicit,o=we();return Se(o.editInterest(i))}),B(5,"Editar"),P(),k(6,"button",15),ge("click",function(){let i=Te(t).$implicit,o=we();return Se(o.deleteInterest(i.id))}),B(7,"Eliminar"),P()()()}if(n&2){let t=e.$implicit;K(2),Ke(t.interest)}}var yR=(()=>{class n{constructor(t){this.interestsService=t,this.myInterests={},this.interests=[],this.isEditing=!1,this.currentInterestId=null,this.btntxt="Guardar",this.loadInterests()}loadInterests(){this.interestsService.getInterests().snapshotChanges().pipe(Z(t=>t.map(r=>O({id:r.payload.doc.id},r.payload.doc.data())))).subscribe(t=>{this.interests=t,console.log(this.interests)})}AregarInterest(){this.isEditing&&this.currentInterestId?this.interestsService.updateInterest(this.currentInterestId,this.myInterests).then(()=>{console.log("Interests updated successfully!"),this.resetForm()}):this.interestsService.createInterests(this.myInterests).then(()=>{console.log("created new item successfully"),this.resetForm()})}editInterest(t){this.isEditing=!0,this.currentInterestId=t.id||null,this.myInterests=O({},t),this.btntxt="Guardar Cambios"}deleteInterest(t){this.interestsService.deleteInterests(t).then(()=>{console.log("delete item successfully")})}resetForm(){this.myInterests={},this.isEditing=!1,this.currentInterestId=null,this.btntxt="Guardar"}static{this.\u0275fac=function(r){return new(r||n)(oe(mR))}}static{this.\u0275cmp=_t({type:n,selectors:[["app-admin-interests"]],decls:16,vars:4,consts:[[1,"interest-section"],[1,"interest-form","card"],[3,"ngSubmit"],[1,"form-group"],["for","interestName"],["type","text","id","interestName","name","interest","placeholder","\xBFCuales son tus pasatiempos?",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn","submit"],["type","button","class","btn",3,"click",4,"ngIf"],[1,"interest-list","card"],["class","interest-item",4,"ngFor","ngForOf"],["type","button",1,"btn",3,"click"],[1,"interest-item"],[1,"interest-name"],[1,"actions"],["type","button",1,"btn","edit",3,"click"],["type","button",1,"btn","delete",3,"click"]],template:function(r,i){r&1&&(k(0,"div",0)(1,"div",1)(2,"h2"),B(3),P(),k(4,"form",2),ge("ngSubmit",function(){return i.AregarInterest()}),k(5,"div",3)(6,"label",4),B(7,"\xBFCu\xE1les son tus pasatiempos?"),P(),k(8,"input",5),Re("ngModelChange",function(s){return Ne(i.myInterests.interest,s)||(i.myInterests.interest=s),s}),P()(),k(9,"button",6),B(10,"Guardar"),P(),et(11,l$,2,0,"button",7),P()(),k(12,"div",8)(13,"h3"),B(14,"Tus intereses"),P(),et(15,d$,8,1,"div",9),P()()),r&2&&(K(3),Rt("",i.btntxt," Inter\xE9s"),K(5),Me("ngModel",i.myInterests.interest),K(3),We("ngIf",i.isEditing),K(4),We("ngForOf",i.interests))},dependencies:[In,Jt,tn,Nt,Xt,en,zt,qt],styles:[".interest-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem;padding:2rem;align-items:start;width:80%;max-width:960px;margin:0 auto}.interest-form.card[_ngcontent-%COMP%], .interest-list.card[_ngcontent-%COMP%]{background-color:#2c3e50;color:#ecf0f1;padding:1.5rem;border-radius:8px;box-shadow:0 2px 4px #0003;text-align:left}.interest-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .interest-list[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#f1c40f;text-align:left;padding-bottom:.5rem;margin-bottom:1rem;border-bottom:2px solid #f1c40f;font-size:1.3rem;font-weight:500;display:inline-block}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem;text-align:left}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:#ecf0f1;font-size:.9rem;font-weight:300}.interest-form[_ngcontent-%COMP%]   input.txt[_ngcontent-%COMP%]{width:calc(100% - 1rem);padding:.75rem;margin-bottom:1rem;border:1px solid #34495e;border-radius:4px;background-color:#34495e;color:#ecf0f1;font-size:1rem}.interest-form[_ngcontent-%COMP%]   input.txt[_ngcontent-%COMP%]::placeholder{color:#bdc3c7}.interest-form[_ngcontent-%COMP%]   button.btn.submit[_ngcontent-%COMP%]{background-color:#f1c40f;color:#333;padding:.8rem 1.2rem;border:none;border-radius:5px;cursor:pointer;font-size:1rem;transition:background-color .3s ease;width:100%;display:block;margin-top:1rem}.interest-form[_ngcontent-%COMP%]   button.btn.submit[_ngcontent-%COMP%]:hover{background-color:#e6b800}.interest-list[_ngcontent-%COMP%]   .interest-item[_ngcontent-%COMP%]{background-color:#34495e;color:#ecf0f1;padding:1rem;margin-bottom:1rem;border-radius:4px;display:flex;justify-content:space-between;align-items:center}.interest-list[_ngcontent-%COMP%]   .interest-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.interest-list[_ngcontent-%COMP%]   .interest-name[_ngcontent-%COMP%]{font-weight:700;flex-grow:1;text-align:left}.interest-list[_ngcontent-%COMP%]   button.btn.delete[_ngcontent-%COMP%]{background-color:#e74c3c;color:#fff;padding:.6rem 1rem;border:none;border-radius:5px;cursor:pointer;font-size:.9rem;transition:background-color .3s ease;margin-left:1rem}.interest-list[_ngcontent-%COMP%]   button.btn.delete[_ngcontent-%COMP%]:hover{background-color:#c0392b}.interest-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.btn[_ngcontent-%COMP%]{padding:.6rem 1rem;border:none;border-radius:5px;cursor:pointer;font-size:.9rem;transition:background-color .3s ease}.btn.edit[_ngcontent-%COMP%]{background-color:#f1c40f;color:#333;padding:.8rem 1.2rem;border:none;border-radius:5px;cursor:pointer;font-size:1rem;transition:background-color .3s ease}.btn.edit[_ngcontent-%COMP%]:hover{background-color:#3498db}"]})}}return n})();var h$=[{path:"work-experience",component:oR},{path:"header",component:aR},{path:"education",component:uR},{path:"certificates",component:dR},{path:"skills",component:fR},{path:"languages",component:gR},{path:"interests",component:yR}],vR=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=wt({type:n})}static{this.\u0275inj=vt({imports:[iv.forRoot(h$),iv]})}}return n})();var _R=(()=>{class n{constructor(){this.title="admin-cv"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=_t({type:n,selectors:[["app-root"]],decls:24,vars:0,consts:[[1,"main-header"],[1,"title"],[1,"nav-links"],[1,"dropdown"],[1,"dropbtn"],[1,"dropdown-content"],["routerLink","/header"],["routerLink","/work-experience"],["routerLink","/education"],["routerLink","/certificates"],["routerLink","/skills"],["routerLink","/languages"],["routerLink","/interests"]],template:function(r,i){r&1&&(k(0,"header",0)(1,"h1",1),B(2,"Admin-CV"),P(),k(3,"nav",2)(4,"div",3)(5,"button",4),B(6,"Men\xFA"),P(),k(7,"div",5)(8,"a",6),B(9,"Header"),P(),k(10,"a",7),B(11,"Work Experience"),P(),k(12,"a",8),B(13,"Education"),P(),k(14,"a",9),B(15,"Certificates"),P(),k(16,"a",10),B(17,"Skills"),P(),k(18,"a",11),B(19,"Languages"),P(),k(20,"a",12),B(21,"Interests"),P()()()()(),k(22,"main"),On(23,"router-outlet"),P())},dependencies:[Jy,cS],styles:["body[_ngcontent-%COMP%]{margin:0;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;background-color:#1e1b2e;color:#f0f0f0;line-height:1.6}.main-header[_ngcontent-%COMP%]{background-color:#2c3e50;color:#fff;padding:1rem 2rem;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #34495e}.title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;margin:0}.nav-links[_ngcontent-%COMP%]{display:flex;gap:1rem}.nav-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#ecf0f1;text-decoration:none;transition:color .3s ease;padding:.5rem 0}.nav-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#f1c40f}main[_ngcontent-%COMP%]{padding:2rem}.section[_ngcontent-%COMP%]{background-color:#2c3e50;padding:1.5rem;margin-bottom:1.5rem;border-radius:5px;box-shadow:0 1px 3px #0000001a}.section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#f1c40f;margin-top:0;margin-bottom:1rem;border-bottom:2px solid #f1c40f;padding-bottom:.3rem;font-size:1.2rem;font-weight:500}.section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1rem;color:#ecf0f1}.dropdown[_ngcontent-%COMP%]{position:relative;display:inline-block}.dropbtn[_ngcontent-%COMP%]{background-color:#2c3e50;color:#ecf0f1;padding:.5rem 1rem;border:1px solid #34495e;border-radius:5px;cursor:pointer;font-size:1rem;transition:background-color .3s ease,color .3s ease,border-color .3s ease}.dropbtn[_ngcontent-%COMP%]:hover, .dropbtn[_ngcontent-%COMP%]:focus{background-color:#f1c40f;color:#333;border-color:#f1c40f}.dropdown-content[_ngcontent-%COMP%]{display:none;position:absolute;background-color:#34495e;min-width:160px;box-shadow:0 8px 16px #0003;z-index:1;border-radius:5px;border:1px solid #34495e}.dropdown-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#ecf0f1;padding:.75rem 1rem;text-decoration:none;display:block;transition:background-color .3s ease,color .3s ease}.dropdown-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#2c3e50;color:#f1c40f}.dropdown[_ngcontent-%COMP%]:hover   .dropdown-content[_ngcontent-%COMP%]{display:block}.dropdown[_ngcontent-%COMP%]:focus-within   .dropdown-content[_ngcontent-%COMP%]{display:block}"]})}}return n})();var wR=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=wt({type:n,bootstrap:[_R]})}static{this.\u0275inj=vt({imports:[zD,vR,gT,_T.initializeApp(wT.firebase)]})}}return n})();qD().bootstrapModule(wR,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
